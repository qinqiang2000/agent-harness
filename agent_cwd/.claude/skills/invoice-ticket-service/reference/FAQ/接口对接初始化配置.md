| **文档编号** | **适用产品版本** | **使用范围** | **更新内容** | **创建（修改）时间** | **责任人** |
| :---: | :---: | :---: | :---: | :---: | :---: |
| **v25.0.01** | **星瀚5.0及以上** | **公开** | **创建** | **2025-10-30** | **兰茜凤** |


# 一、环境初始化配置
[产品初始化配置](https://jdpiaozone.yuque.com/nbklz3/tadboa/yluad50k587l6q1l)

# 二、异构对接初始化配置
## 创建第三方应用
### 星瀚6.0及以上
**8.0路径****<font style="color:#117CEE;">：【开放服务云】→【OpenApi】→【安全策略】→【第三方应用】  </font>**

**注意事项：**

默认已配置的数据，请勿修改和删除，新的系统需要对接，直接新增配置即可。

新增配置时，请注意配置这几个数据“系统编码”、“系统名称”，“AccessToken加密认证密钥”，<font style="color:#DF2A3F;">并开启“授权全部API”和“允许全部IP访问”</font>。

![](https://cdn.nlark.com/yuque/0/2025/png/39256605/1764320001907-82d27039-a226-47ca-8601-701a93b8aef7.png)

点击新增第三方应用--注意编码也对接业务系统相关方便后期维护

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723806358687-0fe2da33-0106-4c12-aef2-9da628629c1a.png)

第三方应用设置，**<font style="color:#DF2A3F;">并开启“授权全部API”和“允许全部IP访问”</font>**。

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1725434885106-f54601ad-9cc5-46f9-bf9e-b4e49d5327a5.png)

获取星瀚鉴权接口示列

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1725434735300-52b46e07-e50c-40e4-a2c0-65f385c2d64b.png)

<font style="color:#DF2A3F;">注意：获取token示列的两个接口参数，既是获取星瀚授权access_token的参数，login.do登录的user参数，既是获取授权信息的用户手机号或用户姓名（如果用姓名避免使用汉字） 然后需要对获取授权的用户做api接口授权</font>

### 星瀚版本5.0及以下
如现场星瀚版本为5.0，则无获取token示例，可通过以下方式获取erp前缀地址及数据中心信息

![](https://cdn.nlark.com/yuque/0/2025/png/27248535/1745747790205-f0c78830-5539-4148-8350-e85e83242807.png)

**如图浏览器访问地址：**

**<font style="color:#DF2A3F;">https://cosmic-sandbox.piaozone.com/bsqcjsfwbj/i</font>**ndex.html?formId=pc_main_console 

index前面内容（标红部分）为获取apptoken地址的前缀，其他环境同理

**该环境获取apptoken的地址为：**

https://cosmic-sandbox.piaozone.com/bsqcjsfwbj/api/getAppToken.do

数据中心获取在登录erp环境账号时浏览器调试模式，监听网络请求

![](https://cdn.nlark.com/yuque/0/2025/png/27248535/1745748480088-7ceb9e50-6f2e-4e26-a16a-11fec384c2bb.png)

找到getUserLanguage.do网络请求的预览获取<font style="color:#DF2A3F;">accountId</font>

![](https://cdn.nlark.com/yuque/0/2025/png/27248535/1745748414679-08f57264-10a1-43da-8195-9e0c3ec601e9.png)

## 用户api授权
<font style="color:#117CEE;">系统路径：【开发服务云】→【开放平台】→【其他】→【API服务管理1.0</font>

或<font style="color:#117CEE;">系统路径：【开放服务云】→【OpenAPI】→【其他】→【API服务管理1.0】</font>

找到发票云，选择对应的接口后，点击【用户授权】

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723806558224-8633d092-229d-43fb-b93a-fa1ede88de0a.png)

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723806586045-448ca97f-f1d2-4a90-afae-35bf9ea0bea0.png)

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723806605301-79e2ad87-0264-4bf4-b779-fffa8927a28c.png)

## 创建业务系统编码（businessSystemCode）
注意：业务系统编码是用来记录有那套异构系统对星瀚发起的请求

<font style="color:#117CEE;">路径：【发票云】→【系统管理】→【业务系统编码】</font>

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723807152243-61c09213-ff36-424a-9b58-6c779740f5b3.png)

业务系统和名字一般用英文或数字避免特殊字符

![](https://cdn.nlark.com/yuque/0/2024/png/27248535/1723807189050-f27da092-a66e-4c1a-a70f-14d8f9294d58.png)

业务系统编码可以配置异构系统回调方式，以及接口请求数据加密格式

<font style="color:#DF2A3F;">注意：回调接口地址需要免鉴权</font>

