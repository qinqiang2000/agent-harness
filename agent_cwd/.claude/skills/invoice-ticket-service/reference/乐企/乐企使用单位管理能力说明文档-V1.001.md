乐企使用单位管理能力说明文档

**V1.001**



1

修改说明

| 版本 | 章节编号 | 修订内容简述 | 生效日期 |
| --- | --- | --- | --- |
| V1.000 | 全文 | 初始化 | 2024.7.11 |
| V1.001 | 第二、四章 | 增加能力编码、服务编码 | 2024.7.22 |


2

3

目录

[一、阅读指引	1](#_Toc58341)

[二、能力介绍	1](#_Toc58342)

[（一）能力编码	1](#_Toc58343)

[（二）能力简介	1](#_Toc58344)

[（三）应用案例	1](#_Toc58345)

[（四）主要政策依据	2](#_Toc58346)

[（五）名词解释	2](#_Toc58347)

[（六）扩展阅读	2](#_Toc58348)

[三、开发指引	2](#_Toc58349)

[（一）业务场景	2](#_Toc58350)

[1.使用单位接入场景	2](#_Toc58351)

[1.1全流程图	2](#_Toc58352)

[1.2业务规则	4](#_Toc58353)

[1.2.1校验批量范围	4](#_Toc58354)

[2.查询使用单位接入状态场景	4](#_Toc58355)

[2.1全流程图	4](#_Toc58356)

[2.2业务规则	6](#_Toc58357)

[2.2.1校验页码范围	6](#_Toc58358)

[2.2.2校验页大小范围	7](#_Toc58359)

[3.查询开票人员登记确认状态场景	7](#_Toc58360)

[3.1全流程图	8](#_Toc58361)

[4.查询使用单位乐企白名单开通状态	8](#_Toc58362)

[4.1全流程图	8](#_Toc58363)

[4.2业务规则	10](#_Toc58364)

[4.2.1校验页码范围	10](#_Toc58365)

[4.2.2校验页大小范围	11](#_Toc58366)

[5.查询使用单位授权认证信息	12](#_Toc58367)

[5.1全流程图	12](#_Toc58368)

[5.2业务规则	14](#_Toc58369)

[5.2.1校验页码范围	14](#_Toc58370)

[5.2.2校验页大小范围	15](#_Toc58371)

[四、接口列表	16](#_Toc58372)

[（一）接口清单	16](#_Toc58373)

[1.使用单位接入申请	17](#_Toc58374)

[1.1接口说明	17](#_Toc58375)

[1.2请求方式	17](#_Toc58376)

[1.3请求参数	17](#_Toc58377)

[1.4请求报文示例	18](#_Toc58378)

[1.5返回参数	19](#_Toc58379)

[1.6返回报文示例	20](#_Toc58380)

[2.查询使用单位接入状态	21](#_Toc58381)

[2.1接口说明	21](#_Toc58382)

[2.2请求方式	21](#_Toc58383)

[2.3请求参数	21](#_Toc58384)

[2.4请求报文示例	22](#_Toc58385)

[2.5返回参数	22](#_Toc58386)

[2.6返回报文示例	24](#_Toc58387)

[3.查询开票人员登记确认状态	25](#_Toc58388)

[3.1接口说明	25](#_Toc58389)

[3.2请求方式	25](#_Toc58390)

[3.3请求参数	25](#_Toc58391)

[3.4请求报文示例	26](#_Toc58392)

[3.5返回参数	26](#_Toc58393)

[3.6返回报文示例	27](#_Toc58394)

[4.查询使用单位乐企白名单开通状态	28](#_Toc58395)

[4.1接口说明	28](#_Toc58396)

[4.2请求方式	28](#_Toc58397)

[4.3请求参数	28](#_Toc58398)

[4.4请求报文示例	29](#_Toc58399)

[4.5返回参数	29](#_Toc58400)

[4.6返回报文示例	30](#_Toc58401)

[5.查询使用单位授权认证信息	31](#_Toc58402)

[5.1接口说明	31](#_Toc58403)

[5.2请求方式	31](#_Toc58404)

[5.3请求参数	31](#_Toc58405)

[5.4请求报文示例	31](#_Toc58406)

[5.5返回参数	32](#_Toc58407)

[5.6返回报文示例	32](#_Toc58408)

[附件一（接口数据项说明）	34](#_Toc58409)

[一、 返回码代码表	34](#_Toc58410)

[二、 省市级税务机关代码名称对照表	34](#_Toc58411)

[三、 使用单位接入状态	35](#_Toc58412)



4

5



# 一、阅读指引
为了满足直连单位多场景、规模化、合规化、自动化的使用单位管理需求，

乐企数字开放平台提供使用单位管理能力，并通过本能力说明文档明确使用单位管理相关业务规则和数据接口。

本能力为公用基础能力，无需进行能力订阅与授权即可使用，适用于有使用单位管理需求的的直连单位纳税人。

本能力说明文档分为阅读指引、能力介绍、开发指引、接口列表四个章节，

其中阅读指引及能力介绍章节适合直连单位纳税人管理人员及财务人员阅读；开发指引及接口列表章节适合纳税人技术人员阅读。

# 二、能力介绍
## （一）能力编码
100010

## （二）能力简介
纳税人可将本能力中的接口嵌入本单位信息化系统中，无需登录乐企数字开

放平台纳税人端即可实时管理本直连单位下的使用单位信息与能力授权情况。

## （三）应用案例
1. 使用单位通过直连单位发起接入乐企申请。

使用单位通过直连单位发起接入乐企申请，直连单位可通过接口上传使用单位接入信息，直连单位可通过接口实时获取各使用单位的接入申请状态情况。

1. 某直连单位向多家使用单位发起能力授权邀请。

某直连单位可通过能力授权邀请接口对使用单位发起接入授权邀请，需要各使用单位登录对应电子税务局，访问乐企数字开放平台纳税人端，通过“能力受理管理”或“我的授权”模块对能力授权邀请进行反馈，直连单位可通过查询能力授权情况接口实时获取各使用单位的能力授权情况。

1. 某直连单位查询“不具有控制关系”使用单位开票人员登记情况。
2. 某直连单位查询使用单位乐企白名单开通状态。

## （四）主要政策依据
待研究。

## （五）名词解释
能力：为企业直连完成某项业务所提供的接口服务和业务规则组合。

规则：实现某项业务目标所遵循的逻辑和校验。

接口：一组定义、程序及协议的集合，通过接口实现计算机软件之间的相互通信。

服务：提供某项业务实现，通过接口服务调用达到业务目标。

API：应用程序编程接口，是一些预先定义的函数，或指软件系统不同组成部分衔接的约定。用来提供应用程序与开发人员基于某软件或硬件得以访问的一

组例程，而又无需访问源代码，或理解内部工作机制的细节。

## （六）扩展阅读
无。

# 三、开发指引
## （一）业务场景
### **1.**使用单位接入场景
直连单位乐企接入成功后，使用单位可通过直连平台发起接入乐企申请。

在此场景中直连单位可在任一时点，调用使用单位接入申请接口，上传使用单位接入申请。

#### 1.1全流程图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902699407-30087e2a-ac8f-485d-a511-23251876b267.jpeg)

流程图

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902699748-78851362-a186-4100-bdbf-838f5d3c0a78.jpeg)

时序图

#### 1.2业务规则
##### 1.2.1校验批量范围
一次批量最多可以传入 250 条。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902700046-4971d1fb-12be-4bd6-b647-6db5fb4aa2ed.jpeg)

1.2.1.1判断逻辑

调用《使用单位接入申请》接口时，sydwxx 单位信息列表长度最长 250。

### **2.**查询使用单位接入状态场景
在此场景中直连单位可在任一时点，调用查询使用单位接入状态接口，查询使用接入状态信息。

#### 2.1全流程图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902700342-a62fef11-31dd-40e3-ad43-ca3a3eeb6c3a.jpeg)

业务流程图

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902700561-b61b935d-c276-4d59-95c1-dec2a3f95dbc.jpeg)

时序图

#### 2.2业务规则
##### 2.2.1校验页码范围
校验页码必须大于等于 1 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902700794-eb2fc59a-2f64-4384-baab-21050798a13b.jpeg)

2.2.1.1判断逻辑

调用《查询使用单位接入状态》接口时页码（pageNumber）需传递大于等于 1 的整数。

##### 2.2.2校验页大小范围
校验页码必须大于等于 1 且小于等于 100 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902701041-c786c77a-19e5-4807-9c8b-c66a897f7434.jpeg)

2.2.2.1判断逻辑

调用《查询使用单位接入状态》接口时页大小（pageSize）需传递大于等于

1 且小于等于 100 的整数。

### **3.**查询开票人员登记确认状态场景
与直连单位关系为“不具有控制关系”使用单位接入乐企后，可在乐企分配

登记开票人员，登记的开票人员信息用于直连单位上传发票时使用。在此场景中直连单位可在任一时点，调用查询开票人员登记确认状态接口，查询“不具有控制关系”使用单位在乐企登记的开票人员信息。

#### 3.1全流程图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902701358-530779c6-057d-49dd-8af2-6292b55571e2.jpeg)

业务流程图

### **4.**查询使用单位乐企白名单开通状态
在此场景中直连单位可在任一时点，调用查询使用单位乐企白名单开通状态接口，获取使用单位的乐企白名单开通状态。

#### 4.1全流程图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902701634-44897a6f-1f8b-4b7c-be45-734d007ae2a0.jpeg)

业务流程图

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902701855-0d406ce9-2f56-405e-af9e-ed0eb2cecdf4.jpeg)

时序图

#### 4.2业务规则
##### 4.2.1校验页码范围
校验页码必须大于等于 1 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902702090-51392ebe-76b9-4400-8f18-96cdd6d2a728.jpeg)

4.2.1.1判断逻辑

调用《查询使用单位乐企白名单开通状态》接口时页码（pageNumber）需传递大于等于 1 的整数。

##### 4.2.2校验页大小范围
校验页码必须大于等于 1 且小于等于 100 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902702280-f7299278-d860-4f11-939a-74461b3fb17d.jpeg)

4.2.2.1判断逻辑

调用《查询使用单位乐企白名单开通状态》接口时页大小（pageSize）需传递大于等于 1 且小于等于 100 的整数。

### **5.**查询使用单位授权认证信息
在此场景中直连单位可在任一时点，调用查询使用单位授权认证信息接口，获取使用单位（不具有控制关系）的授权认证信息 。

#### 5.1全流程图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902702484-3dc3d44d-4521-44ba-857d-5afb404395fc.jpeg)

业务流程图

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902702705-3fbab3c4-bed8-402d-a20c-2541bf2d304f.jpeg)

时序图

#### 5.2业务规则
##### 5.2.1校验页码范围
校验页码必须大于等于 1 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902702941-463952ce-325e-4a1a-b88c-ec1edc4febb9.jpeg)

5.2.1.1判断逻辑

调用《查询使用单位授权认证信息》接口时页码（pageNumber）需传递大于等于 1 的整数。

##### 5.2.2校验页大小范围
校验页码必须大于等于 1 且小于等于 100 的整数。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/38481329/1724902703134-fabebb7e-63c3-4785-90e0-5e250863f9f2.jpeg)

5.2.2.1判断逻辑

调用《查询使用单位授权认证信息》接口时页大小（pageSize）需传递大于等于

1 且小于等于 100 的整数。

# 四、接口列表
## （一）接口清单
| 序号 | 接口名称 | 服务编码 |
| --- | --- | --- |
| 1 | 使用单位接入申请 | SYDWSQ |
| 2 | 查询使用单位接入状态 | CXSYDWJRZT |
| 3 | 查询开票人员登记确认状态 | CXKPRYDJQRZT |
| 4 | 查询使用单位乐企白名单开通状态 | CXSYDWLQBMDKTZT |
| 5 | 查询使用单位授权认证信息 | CXSYDWSQRZXX |


## 1.使用单位接入申请
#### 1.1接口说明
向纳税人提供使用单位接入申请和能力授权邀请功能，用于直连单位上传使用单位接入申请。（单次申请不能超过 250 条数据，若超过 250 条数据则本次申请不予受理）

#### 1.2请求方式
请求方式为POST

+ path 指该参数为路径参数
+ query 指该参数需在请求URL传参
+ body 指该参数需在请求JSON传参

#### 1.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sydwxx | 使用单位信息 | List |  | 是 |  |
|  | | 明细数据 | |  |  |  |
| 1 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 | 邀请使用单位对应的纳税人识别号或统一社 会 信 用 代码，二选一。 |
| 2 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 | 邀请使用单位名称 |
| 3 | ssjswjgDm | 省市级税务机关代码 | String | 11 | 是 | 使用单位对应省市级税务机关代码，详见附件一：二、省市级税务机关代码名称对照表。 |
| 4 | ssjswjgmc | 省市级税务机关名称 | String | 20 | 否 | 使用单位对应省市级税务机关名称，详见 |
|  |  |  |  |  |  | 附件一：二、省市级税务机关代码名称对照表。 |
| 5 | dwgxDm | 与直连单位关系 | String | 2 | 是 | 枚举值：<br/>04-不具有控制关系 |
| 6 | dwgxzmcl | 与直连单位关系证明文件 | String |  | 否 | 文件内容<br/>Base64 |
| 7 | nlsqyqList | 能力授权邀请列表 | List |  | 否 |  |
|  | | 能力授权邀请列表 | |  |  |  |
| 1 | nlbm | 能力编码 | String |  | 是 |  |
| 2 | nlmc | 能力名称 | String |  | 否 |  |
| 3 | yxqq | 能力授期有效期起 | String | 10 | 否 | 时间格式<br/>YYYY-MM-DD；默认当前日期 |
| 4 | yxqz | 能力授期有效期止 | String | 10 | 否 | 时间格式<br/>YYYY-MM-DD；<br/>默认<br/>2099-01-01 |


#### 1.4请求报文示例
| {<br/>"sydwxx":[ {<br/>"sydwshxydm":"使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc":"使用单位纳税人名称",<br/>"ssjswjgDm":"省市级税务机关代码",<br/>"ssjswjgmc":"省市级税务机关名称",<br/>"dwgxDm":"与直连单位关系代码",<br/>"dwgxzmcl":"与直连单位关系证明文件 Base64"<br/>},{<br/>"sydwshxydm":"使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc":"使用单位纳税人名称",<br/>"ssjswjgDm":"省市级税务机关代码",<br/>"ssjswjgmc":"省市级税务机关名称",<br/>"dwgxDm":"与直连单位关系代码",<br/>"dwgxzmcl":"与直连单位关系证明文件 Base64",<br/>"nlsqyqList": [ { |
| --- |
| "nlbm":"能力编码",<br/>"nlmc":"能力名称",<br/>"yxqq":"能力授权有效期起",<br/>"yxqz":"能力授权有效期止",<br/>}, {<br/>"nlbm":"能力编码",<br/>"nlmc":"能力名称",<br/>"yxqq":"能力授权有效期起",<br/>"yxqz":"能力授权有效期止",<br/>}<br/>]<br/>}<br/>]<br/>} |


#### 1.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照附件一：一、返回码代码表 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | yqjgmx | 邀请结果明细 | List |  |  |  |
|  | | 明细数据 | |  |  |  |
| 1 | ssjswjgDm | 省市级税务机关代码 | String | 11 | 是 | 使用单位对应省市级税务机关代码，详见附件一：二、省市级税务机关代码名称对照表。 |
| 2 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 |  |
| 3 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 |  |
| 4 | yqjg | 邀请结果 | String | 1 | 是 | Y：成功 N：失败 |
| 5 | yqycyy | 邀请异常原因 | String | 2000 | 否 | 失败时记录失败原因 |
| 6 | dwgxDm | 与直连单位关系 | String | 2 | 是 | 枚举值：<br/>04-不具有控制关系 |


#### 1.6返回报文示例
| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Data": {<br/>"returncode": "结果代码",<br/>"returnmsg": "返回信息",<br/>"yqjgmx": [ {<br/>"ssjswjgDm": "省市级税务机关代码",<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称",<br/>"dwgxDm": "单位关系",<br/>"yqjg": "邀请结果",<br/>"yqycyy": "邀请异常原因"<br/>}, {<br/>"ssjswjgDm": "省市级税务机关代码",<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称",<br/>"dwgxDm": "单位关系",<br/>"yqjg": "邀请结果",<br/>"yqycyy": "邀请异常原因"<br/>}<br/>]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Error": {<br/>"Code": "01",<br/>"Message": "错误说明"<br/>}<br/>}<br/>} |
| --- |


## 2.查询使用单位接入状态
#### 2.1接口说明
向直连单位提供查询使用单位接入状态和能力授权状态的功能。

#### 2.2请求方式
请求方式为POST

+ path 指该参数为路径参数
+ query 指该参数需在请求URL传参
+ body 指该参数需在请求JSON传参

#### 2.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pageNumber | 页码 | int | 10 | 是 | 分页查询-待查询页码大于等于1的整数 |
| 2 | pageSize | 页大小 | int | 10 | 是 | 分页查询-待查询页大小<br/>大于等于1且小于等于 100 的整数 |
| 3 | ztbm | 接入状态 | String | 2 | 否 | 精准查询对应接入状态的使用单位信息，详见附件一：三、使用单位接入状态。 |
| 4 | sydwxx | 使用单位信息 | List<Objec t> | 20 | 否 | 过滤使用单位信息，最大支持查询20条 |
|  | | 使用单位信息 | |  |  |  |
| 5 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 | 精准查询该纳税人识别号或统一社会信用 |
|  |  |  |  |  |  | 代码对应的使用单位接入状态信息 |
| 6 | ssjswjgDm | 省市级税务机关代码 | String | 20 | 是 | 用于与使用单位纳税人识别号/统一社会信用代码确认唯一，详见附件一：二、省市级税务机关代码名称对照表。 |


#### 2.4请求报文示例
| {<br/>"pageNumber": 1,<br/>"pageSize": 10,<br/>"ztbm": "5",<br/>"sydwxx": [ {<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"ssjswjgDm": "省市级税务机关代码"<br/>},<br/>{<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"ssjswjgDm": "省市级税务机关代码"<br/>}<br/>]<br/>} |
| --- |


#### 2.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照附件一：一、返回码代码表 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pageNumber | 页码 | int | 10 | 是 | 分页查询-当前页码 |
| 4 | pageSize | 页大小 | int | 10 | 是 | 分页查询-页大小 |




| 5 | total | 总记录数 | int | 10 | 是 | 分页查询-总记录数 |
| --- | --- | --- | --- | --- | --- | --- |
| 6 | sydwList | 使用单位列表 | List |  | 否 |  |
| 明细数据 | | | | | | |
| 1 | sydwdjxh | 使用单位登记序号 | String | 20 | 是 |  |
| 2 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 |  |
| 3 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 |  |
| 4 | yqsj | 邀请时间 | String | - | 是 | 时间格<br/>式：”yyyy-MM<br/>-dd HH:mm:ss<br/>” |
| 5 | jrsj | 接入时间 | String | - | 是 | 时间格<br/>式：”yyyy-MM<br/>-dd HH:mm:ss<br/>” |
| 6 | ztbm | 接入状态 | String | 2 | 是 | 详见附件一：三、使用单位接入状态。 |
| 7 | lqdwid | 乐企ID | String | 20 | 否 | 接入状态为<br/>“已确认”时，必填。 |
| 8 | ssjswjgDm | 省市级税务机关代码 | String | 20 | 是 | 使用单位对应省市级税务机关代码。 |
| 9 | ssjswjgmc | 省市级税务机关名称 | String | 300 | 是 |  |
| 10 | zgswjgDm | 主管税务机关代码 | String | 20 | 是 |  |
| 11 | zgswjgmc | 主管税务机关名称 | String | 300 | 是 |  |
| 12 | dwgxDm | 与直连单位关系 | String | 2 | 是 | 枚举值：<br/>00-无关系、 01-总分公司关系、<br/>02-母子公司关系、<br/>03-其他控制关系、 |
|  |  |  |  |  |  | 04-不具有控制关系、<br/>05-同一监管部门 |
| 13 | nlsqqk | 能力授权情况 | List |  |  |  |
|  | | 能力授权情况 | |  |  |  |
| 1 | nlsqztDm | 能力授权状态代码 | String | 1 | 是 | 1：已授权<br/>2：未授权<br/>3：待确认（直连单位向使用单位发起能力授权邀请）<br/>4：待确认邀请<br/>（使用单位向直连单位发起能力授权申请） |
| 2 | yxqq | 能力授期有效期起 | String | 10 | 是 | 时间格式：<br/>YYYY-MM-DD |
| 3 | yxqz | 能力授期有效期止 | String | 10 | 是 | 时间格式：<br/>YYYY-MM-DD |


#### 2.6返回报文示例
| {<br/>"returncode": "00",<br/>"returnmsg": "",<br/>"pageNumber": 1,<br/>"pageSize": 10,<br/>"total": "100",<br/>"sydwList": [ {<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称",<br/>"yqsj": "邀请时间",<br/>"jrsj": "接入时间",<br/>"ztbm": "接入状态",<br/>"lqdwid": "乐企 ID",<br/>"ssjswjgDm": "省市级税务机关代码",<br/>"ssjswjgmc": "省市级税务机关名称",<br/>"zgswjgDm": "主管税务机关代码",<br/>"sjzgswjgmc": "主管税务机关名称",<br/>"dwgxDm": "与直连单位关系", |
| --- |
| "nlsqqk": [ {<br/>"nlsqztDm":"能力状态编码",<br/>"nlbm":"能力编码",<br/>"nlmc":"能力名称",<br/>"yxqq":"授权有效期起",<br/>"yxqz":"授权有效期止",<br/>}<br/>],<br/>}<br/>]<br/>} |
|  |


失败返回：

| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Error": {<br/>"Code": "01",<br/>"Message": "错误说明"<br/>}<br/>}<br/>} |
| --- |


## 3.查询开票人员登记确认状态
#### 3.1接口说明
向纳税人提供查询开票人员登记确认状态的功能，用于直连单位获取使用单位对应乐企开票人员的登记确认状态情况。

#### 3.2请求方式
请求方式为POST

+ path 指该参数为路径参数
+ query 指该参数需在请求URL传参
+ body 指该参数需在请求JSON传参

#### 3.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 | 精准查询该税号对应的使用单位开票人员登记确认状态信息 |
| 2 | ssjswjgDm | 省市级税务机关代码 | String | 20 | 是 | 用于与使用单位纳税人识别号/统一社会信用代码确认唯一，详见附件一：二、省市级税务机关代码名称对照表。 |


#### 3.4请求报文示例
| {<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"ssjswjgDm": "省市级税务机关代码"<br/>} |
| --- |


#### 3.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照附件一：一、返回码代码表 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | sydwshxydm | 使用单位纳税人识别号/统一社会信用代码 | String | 20 | 是 |  |
| 4 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 |  |
| 5 | ssjswjgDm | 省市级税务机关代码 | String | 20 | 是 | 使用单位对应省市级税务机关代码信息。 |
| 6 | kpysl | 开票人员信息记录数 | Number |  | 是 |  |
| 7 | kpyxx | 开票人员信息 | List |  | 是 |  |
|  | | 明细数据 | |  |  |  |
| 1 | kpyxm | 开票人员名称 | String | 300 | 是 |  |
| 2 | kpyzjhm | 开票人员证件号码 | String | 20 | 是 |  |
| 3 | kpyzjlx | 开票人员证件类型 | String | 4 | 是 |  |
| 4 | yqsj | 邀请时间 | String | - | 是 | 时间格<br/>式：”yyyy-MM<br/>-dd HH:mm:ss<br/>” |
| 5 | qrsj | 确认时间 | String | - | 否 | 时间格<br/>式：”yyyy-MM<br/>-dd HH:mm:ss<br/>” |
| 6 | jcsj | 解除时间 | String | - | 否 | 时间格<br/>式：”yyyy-MM<br/>-dd HH:mm:ss<br/>” |
| 7 | djzt | 开票人员确认状态 | String | 2 | 是 | 枚举值：<br/>0-未确认，<br/>1-已确认，<br/>2-已拒绝，<br/>3-已解除； |


#### 3.6返回报文示例
| {<br/>"returncode": "00",<br/>"returnmsg": "",<br/>"sydwshxydm": "使用单位纳税人识别号/统一社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称",<br/>"ssjswjgDm": "省市级税务机关代码",<br/>"kpysl": "开票人员信息记录数",<br/>"kpyxx": [ {<br/>"kpyxm": "开票人员名称",<br/>"kpyzjhm": "开票人员证件号码",<br/>"kpyzjlx": "开票人员证件类型",<br/>"yqsj": "邀请时间",<br/>"qrsj": "确认时间",<br/>"jcsj": "基础时间",<br/>"djzt": "开票人员确认状态"<br/>} |
| --- |
| ]<br/>} |


失败返回：

| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Error": {<br/>"Code": "01",<br/>"Message": "错误说明"<br/>}<br/>}<br/>} |
| --- |


## 4.查询使用单位乐企白名单开通状态
#### 4.1接口说明
向纳税人提供查询使用单位乐企白名单开通状态功能，用于直连单位获取其使用单位的乐企白名单开通状态。

#### 4.2请求方式
请求方式为POST

+ path 指该参数为路径参数
+ query 指该参数需在请求URL传参
+ body 指该参数需在请求JSON传参

#### 4.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pageNumber | 页码 | int | 10 | 是 | 分页查询-待查询页码大于等于1的整数 |
| 2 | pageSize | 页大小 | int | 10 | 是 | 分页查询-待查询页大小<br/>大于等于1且小于等于100 |
|  |  |  |  |  |  | 的整数 |
| 3 | sydwshxydm | 使用单位社会信用代码 | String | 20 | 否 | 精准查询该税号对应的使用单位能力授权信息 |
| 4 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 否 | 模糊查询该纳税人名称对应的使用单位能力授权信息 |


#### 4.4请求报文示例
| {<br/>"pageNumber": 1,<br/>"pageSize": 20,<br/>"sydwshxydm": "使用单位社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称"<br/>} |
| --- |


#### 4.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照附件一：一、返回码代码表 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pageNumber | 页码 | int | 10 | 是 | 分页查询-当前页码 |
| 4 | pageSize | 页大小 | int | 10 | 是 | 分页查询-页大小 |
| 5 | total | 总记录数 | int | 10 | 是 | 分页查询-总记录数 |
| 6 | lqbmdmx | 乐企白名单明细 | List |  | 否 |  |
|  | | 明细数据 | |  |  |  |
| 1 | sydwdjxh | 使用单位登记序号 | String | 20 | 是 |  |
| 2 | sydwshxydm | 使用单位社会信用代码 | String | 20 | 是 |  |
| 3 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 |  |
| 4 | zt | 状态 | String | 1 | 是 | 2：未维护<br/>1：启用 |
|  |  |  |  |  |  | 0：停用 |
| 5 | lrrq | 录入日期 | String | 19 | 否 | YYYY-MM-DD<br/>HH:mm:ss |


#### 4.6返回报文示例
| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Data": {<br/>"returncode": "结果代码",<br/>"returnmsg": "返回信息",<br/>"pageNumber": 1,<br/>"pageSize": 20,<br/>"total": 2,<br/>"lqbmdmx": [ {<br/>"sydwdjxh":"使用单位登记序号" ,<br/>"sydwshxydm":"使用单位社会信用代码" ,<br/>"sydwnsrmc":"使用单位纳税人名称" ,<br/>"zt":"状态" ,<br/>"lrrq":"录入日期"<br/>},{<br/>"sydwdjxh":"使用单位登记序号" ,<br/>"sydwshxydm":"使用单位社会信用代码" ,<br/>"sydwnsrmc":"使用单位纳税人名称" ,<br/>"zt":"状态" ,<br/>"lrrq":"录入日期"<br/>}<br/>]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Error": {<br/>"Code": "01",<br/>"Message": "错误说明"<br/>}<br/>}<br/>} |
| --- |


## 5.查询使用单位授权认证信息
#### 5.1接口说明
向纳税人提供查询使用单位授权认证信息功能，用于直连单位获取其使用单位（不具有控制关系）的授权认证信息。

<font style="color:#FF0000;">仅支持查询授权认证优化改造后进行授权认证接入的数据。</font>

#### 5.2请求方式
请求方式为POST

+ path 指该参数为路径参数
+ query 指该参数需在请求URL传参
+ body 指该参数需在请求JSON传参

#### 5.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pageNumber | 页码 | int | 10 | 是 | 分页查询-待查询页码大于等于1的整数 |
| 2 | pageSize | 页大小 | int | 10 | 是 | 分页查询-待查询页大小<br/>大于等于1且小于等于100 的整数 |
| 3 | sydwshxydm | 使用单位社会信用代码 | String | 20 | 否 | 精准查询该税号对应的使用单位能力授权信息 |
| 4 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 否 | 模糊查询该纳税人名称对应的使用单位能力授权信息 |


#### 5.4请求报文示例
| {<br/>"pageNumber": 1,<br/>"pageSize": 20,<br/>"sydwshxydm": "使用单位社会信用代码",<br/>"sydwnsrmc": "使用单位纳税人名称"<br/>} |
| --- |


#### 5.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照附件一：一、返回码代码表 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pageNumber | 页码 | int | 10 | 是 | 分页查询-当前页码 |
| 4 | pageSize | 页大小 | int | 10 | 是 | 分页查询-页大小 |
| 5 | total | 总记录数 | int | 10 | 是 | 分页查询-总记录数 |
| 6 | sqrzmx | 授权认证明细 | List |  | 否 |  |
|  | | 明细数据 | |  |  |  |
| 1 | sydwdjxh | 使用单位登记序号 | String | 20 | 是 |  |
| 2 | sydwshxydm | 使用单位社会信用代码 | String | 20 | 是 |  |
| 3 | sydwnsrmc | 使用单位纳税人名称 | String | 300 | 是 |  |
| 4 | sqrzbz | 授权认证标志 | String | 1 | 是 | Y：已授权认证 N：未授权认证 |
| 5 | sqm | 授权码 | String | 64 | 否 |  |
| 5 | sqrzyxqz | 授权认证有效期止 | String | 19 | 否 | YYYY-MM-DD<br/>HH:mm:ss |


#### 5.6返回报文示例
| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Data": {<br/>"returncode": "结果代码",<br/>"returnmsg": "返回信息", |
| --- |
| "pageNumber": 1,<br/>"pageSize": 20,<br/>"total": 2,<br/>"lqbmdmx": [ {<br/>"sydwdjxh":"使用单位登记序号" ,<br/>"sydwshxydm":"使用单位社会信用代码" ,<br/>"sydwnsrmc":"使用单位纳税人名称" ,<br/>"sqrzbz":"授权认证标志" ,<br/>"sqm":"授权码",<br/>"sqrzyxqz":"授权认证有效期止"<br/>},{<br/>"sydwdjxh":"使用单位登记序号" ,<br/>"sydwshxydm":"使用单位社会信用代码" ,<br/>"sydwnsrmc":"使用单位纳税人名称" ,<br/>"sqrzbz":"授权认证标志" ,<br/>"sqm":"授权码",<br/>"sqrzyxqz":"授权认证有效期止"<br/>}<br/>]<br/>}<br/>}<br/>} |


失败返回：

| {<br/>"Response": {<br/>"RequestId": "16 位随机数字和字母组合",<br/>"Error": {<br/>"Code": "01",<br/>"Message": "错误说明"<br/>}<br/>}<br/>} |
| --- |


# 附件一（接口数据项说明）
### 一、	返回码代码表
| 返回码 | 代码名称 | 备注 |
| --- | --- | --- |
| 00 | 成功 |  |
| 01 | 参数校验异常 | 如数据项为空、数据项格式不正确、列表过大等 |
| 11 | 当前企业无资格办理此业务 |  |
| 99 | 系统级异常 |  |


### 二、	省市级税务机关代码名称对照表
| 省市级税务机关代码 | 省市级税务机关名称 |
| --- | --- |
| 11100000000 | 北京市税务局 |
| 11200000000 | 天津市税务局 |
| 11300000000 | 河北省税务局 |
| 11400000000 | 山西省税务局 |
| 11500000000 | 内蒙古自治区税务局 |
| 12100000000 | 辽宁省税务局 |
| 12102000000 | 大连市税务局 |
| 12200000000 | 吉林省税务局 |
| 12300000000 | 黑龙江省税务局 |
| 13100000000 | 上海市税务局 |
| 13200000000 | 江苏省税务局 |
| 13300000000 | 浙江省税务局 |
| 13302000000 | 宁波市税务局 |
| 13400000000 | 安徽省税务局 |
| 13500000000 | 福建省税务局 |
| 13502000000 | 厦门市税务局 |
| 13600000000 | 江西省税务局 |
| 13700000000 | 山东省税务局 |
| 13702000000 | 青岛市税务局 |
| 14100000000 | 河南省税务局 |
| 14200000000 | 湖北省税务局 |
| 14300000000 | 湖南省税务局 |
| 14400000000 | 广东省税务局 |
| 14403000000 | 深圳市税务局 |
| 14500000000 | 广西壮族自治区税务局 |
| 14600000000 | 海南省税务局 |
| 15000000000 | 重庆市税务局 |
| 15100000000 | 四川省税务局 |
| 15200000000 | 贵州省税务局 |
| 15300000000 | 云南省税务局 |
| 15400000000 | 西藏自治区税务局 |
| 16100000000 | 陕西省税务局 |
| 16200000000 | 甘肃省税务局 |
| 16300000000 | 青海省税务局 |
| 16400000000 | 宁夏回族自治区税务局 |
| 16500000000 | 新疆维吾尔自治区税务局 |


### 三、	使用单位接入状态
|  | 状态编码 |  | 状态名称 |
| --- | --- | --- | --- |
| -1 |  | 申请中 |  |
| -2 |  | 申请失败 |  |
| -3 |  | 已作废 |  |
| 0 |  | 待使用单位响应 |  |
| 1 |  | 待受理 |  |
| 2 |  | 不予受理 |  |
| 3 |  | 待确认 |  |
| 4 |  | 确认通过 |  |
| 5 |  | 确认不通过 |  |
| 6 |  | 已解除 |  |
| 7 |  | 已过期 |  |
| 8 |  | 已拒绝 |  |
| 9 |  | 已撤回 |  |
| 10 |  | 已失效 |  |
| 11 |  | 已暂停 |  |
| 12 |  | 已终止 |  |
| 13 |  | 已恢复 |  |
| 14 |  | 待邀请 |  |
| 15 |  | 恢复关系 |  |
| 16 |  | 待使用单位授权 |  |




