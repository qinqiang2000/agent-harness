<font style="color:#000000;">乐企数字化电子发票（航空运输电子客票行程单）开票能力说明文档V3.017</font>



修改说明

| **版本** | **章节编号** | **修订内容简述** | **生效日期** |
| :--- | :--- | --- | :--- |
| V1.000 | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">删除“授信额度管理”、“调整授信额度有效期”、获取纳税人风险信息。</font> | <font style="color:#000000;">2022-11-17</font> |
| | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">删除“校验授信额度”、“</font>风险纳税人信息校验<font style="color:#000000;">”。</font> | |
| | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">删除“</font>风险纳税人信息校验<font style="color:#000000;">”。</font> | |
| | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">删除“校验授信额度”、“</font>风险纳税人信息校验<font style="color:#000000;">”。</font> | |
| | <font style="color:rgb(0, 0, 0);">第五章</font> | <font style="color:#000000;">删除“查询授信额度”、“下载/退回授信额度”、“调整授信额度有效期”。</font> | |
| | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">“调用接口通信失败或者“返回码”提示“Error”或不为“00””改为“网络通信异常。返回报文存在error节点。“返回码”不为“00”。</font> | <font style="color:#000000;">2022-11-28</font> |
| | <font style="color:rgb(0, 0, 0);">第五章</font> | “差额征税类型代码”字段说明改为“01：全额开票02：差额开票” | |
| | 全部 |  创建日期 | 2022.12.22 |
| V1.001 | 第五章 | 发票上传接口中“服务器地址”和“mac地址”字段说明增加“需自行采集开票申请设备”。 | 2022.12.29 |
| V1.002 | 第四、五章 | 将“全电发票”“新电票”改为“数字化电子发票”。 | 2023.01.10 |
| | 第五章 | 发票上传接口-接口说明中增加“每次上传最大票量为100张数字化电子发票”内容。 | |
| | 第五章 | 发票上传接口中“平台编号”字段说明中增加“接入单位ID”。 | |
| V1.003 | <font style="color:rgb(0, 0, 0);">全部</font> | <font style="color:#000000;">添加目录与页码</font> | 2023.02.04 |
| V1.004 | <font style="color:rgb(0, 0, 0);">全部</font> | <font style="color:#000000;">“接入单位”修改为“直连单位”。</font> | 2023.02.16 |
| V1.005 | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">第四章2.2.3.2增加“平台编号”字段值必须为直连单位ID校验。</font> | 2023.04.19 |
| V2.000 | <font style="color:#000000;">第四、五章</font> | <font style="color:#000000;">第四章“1.2.2获取可用税收分类编码”增加增值税特殊开票税率实现内容；增加4红字确认单撤销场景。第五章8查询电子行程单红字确认单列表信息、9查询电子行程单红字确认单明细信息接口返回参数增加“录入日期”字段；增加10电子行程单红字确认单确认接口。</font> | 2023.05.27 |
| V3.000 | 第四章 | 增加“开票汇总确认”业务场景 | 2023.05.30 |
| | 第五章 | 增加“上传发票汇总确认信息”和“查询发票汇总确认信息”两个接口 | |
| V3.001 | 第四章 | 2.2.3.1 调整“单价”、“数量”的校验逻辑<br/>3.2.3.1调整“单价”、“数量”的校验逻辑<br/>5.2.3.1调整“单价”、“数量”的校验逻辑<br/>6调整发票汇总确认时间。 | 2023.07.07 |
| | 第五章 | 4.电子行程单上传接口，调整“单位”、“单价”、“数量”填写说明<br/>6.电子行程单红字确认单申请接口，调整“单位”、“单价”、“数量”填写说明<br/>9.查询电子行程单红字确认单明细信息接口，调整“单位”、“单价”、“数量”说明<br/>17.上传发票汇总确认信息调整发票汇总确认时间。 | |
| V3.002 | 第四章 | 3.2.3.3业务逻辑校验增加红冲税控蓝票填写规则。 | 2023.07.19 |
| | 第四、五章 | 第四章5.2.4.1合规性校验调整对应蓝字发票号码说明；<br/>第五章4.电子行程单上传接口修改对应蓝字发票号码说明。 | 2023．07.19 |
| V3.003 | 第四、五章 | 第四章2.2.3.2数据校验增加发票明细条数限制；<br/>第五章5.查询电子行程单上传结果增加查询时间限制。 | 2023.08.23 |
| | 第五章 | 2.查询税收分类编码“省级税务机关代码”字段必须调整为否。 | 2023.09.02 |
| V3.004 | 第四章 | 2.2.3.2数据校验增加非汇总项编码校验。 | 2023.09.20 |
| V3.005 | 第四章 | 增加Unicode编码使用限制 | 2023.11.02 |
| V3.006 | 第四章 | 2.2.3.2数据校验校验增加购销方税号校验规则。 | 2023.11.03 |
| V3.007 | 第五章 | 12.查询发票汇总确认信息返回参数增加销售方纳税人识别号 | 2023.11.25 |
| | 第四、五章 | 第四章2.2.3.2增加开票编码名称校验规则。<br/>第五章4.3请求参数调整国内国际标识码值 | 2023.11.30 |
| V3.008 | 第四、五章 | 第四章2.2.3.2数据校验、5.2.3.2数据校验增加差额征税类型代码、优惠政策标识等填写要求。<br/>第五章9.查询电子行程单红字确认单明细信息返回参数增加差额征税类型代码、扣除额、优惠政策标识字段， | 2023.12.21 |
| | 第四章 | 2.2.3.2数据校验校验删除购销方税号校验规则。 | 2023.12.27 |
| | 第四章 | 2.2.3.2数据校验、5.2.4.2数据校验增加发票上传时间规则说明。 | 2023.12.27 |
| | 第四章 | 2.2.3.2数据校验增加编码、项目名称要求说明。 | 2024.01.10 |
| V3.009 | 第四章 | 1.2.2获取可用税收分类编码减按优惠政策标识描述调整。 | 2024.01.26 |
| V3.010 | 第四、五章 | 第四章2.2.3.1/5.2.3.1合规性校验调整旅客身份信息校验规则；第五章6.电子行程单上传调整旅客身份信息为必填。 | 2024.02.02 |
| | 第四章 | 1.2.2获取可用税收分类编码调整优惠政策混开规则。 | 2024.03.14 |
| | 第四章 | 2.2.3.1合规性校验、5.2.3.1合规性校验增加联用他用开票员校验规则。 | 2024.03.14 |
| V3.011 | 第四章 | 1.2.2获取可用税收分类编码调整不征税优惠政策混开规则表述。 | 2024.04.09 |
| V3.012 | 第四章 | 1.2.2获取可用税收分类编码调整不征税混开规则。 | 2024.04.22 |
| V3.013 | 第四、五章 | 调整红字确认单申请及确认接口，支持部分红冲，购方确认。 | 2024.07.22 |
| | 第四、五章 | 第四章2.2.3.1、5.2.3.1增加购买方自然人标志，2.2.3.2增加购买方自然人标志相关规则；<br/>第五章4.电子行程单上传增加购买方自然人标志。 | 2024.07.26 |
| V3.014 | 第四、五章 | 第四章5.2.3.1调整备注长度；<br/>第五章4.电子行程单上传调整备注字段说明。 | 2025.01.24 |
| V3.015 | 第四、五章 | 第四章2.2.3.1、5.2.3.1合规性校验调整发票开具方式代码字段；2.2.3.2、5.2.4.2业务逻辑校验增加发票开具方式代码校验规则。   第五章4.电子行程单上传调整发票开具方式代码字段。 | 2025.03.28 |
| V3.016 | 第五章 | 发票上传、红字确认单申请、汇总确认等接口请求报文增加生产报文示例。 | 2025.08.29 |
| V3.017 | 第五章 | 补充“发票用途状态信息查询”接口说明、参数、报文示例。 | 2025.09.26 |


**<font style="color:#000000;">目 录</font>**

一、阅读指引	6

二、能力介绍	6

（一）能力简介	6

（二）应用案例	6

（三）名词解释	6

（四）扩展阅读	7

三、政策依据	7

四、开发指引	7

（一）业务场景	7

1.电子行程单开具前置	7

2.蓝字电子行程单开具	15

3电子行程单红字确认单申请	26

4红字确认单确认	34

5红字电子行程单开具	35

6开票汇总确认	46

五、 接口技术说明	49

（一）能力编码	49

（二）接口清单	49

（三）接口详情	50

1.查询纳税人基本信息	50

2.查询税收分类编码信息	59

3.查询可用税率信息	65

4.电子行程单上传	68

5.查询电子行程单上传结果	84

6.电子行程单红字确认单申请	87

7.发票用途状态信息查询	92

8.查询电子行程单红字确认单列表信息	96

9.查询电子行程单红字确认单明细信息	103

10.电子行程单红字确认单确认	108

11.上传发票汇总确认信息	110

12. 查询发票汇总确认信息	114

六、附件	118





# **一、阅读指引**
为了满足民航总局多场景、规模化、合规化、自动化的电子发票（航空运输电子客票行程单）开具需求，乐企数字开放平台提供电子客票（航空运输电子客票行程单）（以下简称“电子行程单”）的开具能力，并通过本能力说明文档明确了电子行程单开具相关业务规则和数据接口。

本能力适用于提供航空旅客运输服务的航空公司订阅。

本能力说明文档分为阅读指引、能力介绍、政策依据、开发指引、接口技术说明、附件六个章节，其中阅读指引、能力介绍、政策依据章节适合纳税人管理人员及财务人员阅读；开发指引、接口技术说明、附件章节适合纳税人技术人员阅读。

# 二、能力介绍
## （一）能力简介
航空公司提供航空旅客运输服务（销售国内旅客运输电子客票行程单）时，可以通过本能力开具电子行程单。

各航空公司可将本能力中的各类规则和接口嵌入业务系统中（如：电子行程单系统、销售、结算等），实现电子行程单开具流程和商业行为的融合，有效提升发票开具效率。

## （二）应用案例
某航空公司将电子行程单开具能力嵌入电子行程单系统，当航班已飞行程达到终态后，消费者可对该行程申请开具电子行程单。电子行程单系统通过乐企嵌入的电子行程单开具规则和接口，组合开票能力获取的发票要素等信息自动生成电子行程单，并完成交付。

## （三）名词解释
直连单位:指的是申请直连乐企数字开放平台且税务机关审核通过的纳税人。

使用单位:指的是被直连单位邀请直连乐企数字开放平台且税务机关审核通过的纳税人。

开具前置:指的是纳税人在开具发票前所获取的关于开票相关信息的能力。

授信额度:指的是税务机关对纳税人开票实行开具金额总额度管理。开具金额总额度，是指一个自然月内，纳税人发票开具总金额（不含增值税）的上限额度。

预赋码信息:指的是纳税人在开具发票前所需获取的发票号码信息。

API列表:指的是纳税人在使用开票能力期间所需要的应用程序接口。

## （四）扩展阅读
无。

# 三、政策依据
《财政部 税务总局 海关总署关于深化增值税改革有关政策的公告》（财政部 税务总局 海关总署公告2019年39号）

《国家税务总局 中国民用航空局关于印发＜航空运输电子客票行程单管理办法（暂行）＞的通知》（国税发〔2008〕54号）

《国家税务总局 中国民用航空总局关于试行民航电子客票报销凭证有关问题的通知》（国税发〔2006〕39号）

国家税务总局各省（自治区、直辖市、计划单列市）税务局关于推行全面数字化电子发票的相关公告

# 四、开发指引
企业在调用乐企平台发起的相关请求报文中禁止使用Unicode码，但是可以使用Unicode码对应的中文。例如 ★ 可以出现在开票报文的备注中，但是不能出现\u38996。

## （一）业务场景
### 1.电子行程单开具前置
#### 1.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114782809-8b28a597-dcc5-4c4e-83fb-5653237481e2.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114783519-81b92c59-5384-44d5-a541-f11269de78d4.png)

时序图

#### 1.2.业务规则
##### **1.2.1获取纳税人基本信息**
定时获取纳税人基本信息，用于企业判断是否使用开票能力、可使用哪些开票能力。

建议定时获取纳税人基本信息，或者在纳税人基本信息发生变更时手动触发更新。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114783757-e8731d55-b7ff-499d-ab95-57ed3ccd8222.png)

###### **1.2.1.1判断逻辑**
调用《查询纳税人基本信息》接口规范获取纳税人基本信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **1.2.2获取可用税收分类编码**
定时获取可用税收分类编码，在开具电子行程单发票时可依据获取到的税收分类编码判断发票信息是否合规。

建议定时获取税收分类编码。

针对不同的税收分类编码维护了可使用增值税特殊管理内容，即可使用的优惠政策，纳税人在开具数字化电子发票时可以根据选择的税收分类编码选择适用的优惠政策，享受税收减免政策。

增值税特殊管理共分为18类，分别是“简易征收”“稀土产品”“免税”“不征税”“先征后退”“100%先征后退”“50%先征后退”“按3%简易征收”“按5%简易征收”“按5%简易征收减按1.5%计征”“即征即退30%”“即征即退50%”“即征即退70%”“即征即退100%”“超税负3%即征即退”“超税负8%即征即退”“超税负12%即征即退”“超税负6%即征即退”。

在开具数字化电子发票条件时，根据需求选择符合的优惠政策代码和税率，包括：

优惠政策选择“简易征收”，发票明细“优惠政策标识”项填写“01”，税率限制为3%或5%；

优惠政策选择“稀土产品”，发票明细“优惠政策标识”项填写“02”，“税率”栏次正常填写适用税率；

优惠政策选择“免税”，发票明细“优惠政策标识”项填写“03”，选择免税后，税率为0；

优惠政策选择“不征税”，发票明细“优惠政策标识”项填写“04”，选择不征税后，税率为0，该优惠政策不能混开，但是选择不征税的编码为“6130000000000000000 代收民航发展基金”时，支持与选择任何优惠政策标识（包含优惠政策表示为空）的“3010301010100000000 国内航空旅客运输服务”、“3010301010200000000 国际航空旅客运输服务”、“3010301010300000000 港澳台航空旅客运输服务”编码混开；

优惠政策选择“先征后退”，发票明细“优惠政策标识”项填写“05”，在发票明细的“税率”栏次填写适用税率；

优惠政策选择“100%先征后退”，发票明细“优惠政策标识”项填写“06”，在发票明细的“税率”栏次填写适用税率；

优惠政策选择“50%先征后退”，发票明细“优惠政策标识”项填写“07”，在发票明细的“税率”栏次填写适用税率；

优惠政策选择“按3%简易征收”，发票明细“优惠政策标识”项填写“08”，“税率”栏次限制为3%；

优惠政策选择“按5%简易征收”，发票明细“优惠政策标识”项填写“09”，“税率”栏次限制为5%；

优惠政策选择“按5%简易征收减按1.5%计征”，发票明细“优惠政策标识”项填写“10”，“税率”栏次限制为1.5%，该优惠政策不能与其他优惠政策混开，仅限不动产经营租赁能力可用；

优惠政策选择“即征即退30%”，发票明细“优惠政策标识”项填写“11”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退50%”，发票明细“优惠政策标识”项填写“12”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退70%”，发票明细“优惠政策标识”项填写“13”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退100%”，发票明细“优惠政策标识”项填写“14”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负3%即征即退”，发票明细“优惠政策标识”项填写“15”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负8%即征即退”，发票明细“优惠政策标识”项填写“16”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负12%即征即退”，发票明细“优惠政策标识”项填写“17”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负6%即征即退”，发票明细“优惠政策标识”项填写“18”，“税率”栏次正常填写适用税率。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114784122-808b1f91-6b4d-4f3b-a916-c7ad8b34a41e.png)

###### **1.2.2.1判断逻辑**
调用《查询税收分类编码信息》接口规范获取税收分类编码信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **1.2.3获取可用税率**
定时获取可用税率，使用在开具电子行程单发票时可依据获取到的可用税率判断发票信息是否合规。

建议定时获取可用税率。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114784357-f2646792-7085-46f3-9f08-48468dc7f287.png)

###### **1.2.3.1判断逻辑**
调用《查询可用税率信息》接口规范获取可用税率信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **1.2.4获取电子行程单勾选信息**
企业可依据电子行程单勾选信息判断电子客票行程单是否可红冲。

企业在开具红字发票前应当下载/更数字化电子子行程单（蓝票）勾选信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114784585-67f37927-8169-4fda-bacc-b3a1ebac3d4a.png)

###### **1.2.4.1判断逻辑**
调用《发票状态信息查询》接口规范获取电子行程单勾选信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **1.2.5获取电子行程单红字确认单列表**
从税务局端获取电子行程单红字确认单列表信息，以便于后期开具红字电子行程单。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114784777-6f0433e6-7dea-45dc-bbbc-3a0509b44de8.png)

###### **1.2.5.1判断逻辑**
调用《查询电子行程单红字确认单列表信息》接口规范获取电子行程单红字确认单列表信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **1.2.6获取电子行程单红字确认单明细**
从税务局端获取电子行程单红字确认单明细信息，以便于后期开具电子行程单发票。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114785020-3e03a26f-0967-46f8-a93b-a33dc542b4e8.png)

###### **1.2.6.1判断逻辑**
调用《查询电子行程单红字确认单明细信息》接口规范获取电子行程单红字确认单明细信息，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

### 2.蓝字电子行程单开具
#### 2.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114785292-8e6b8fca-1bd9-4586-b854-aeece488a118.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114785559-2415314e-07ad-42b3-9765-4d369eb75bc2.png)

时序图

#### 2.2.业务规则
##### **2.2.1判断纳税人开票资格**
校验纳税人是否具备电子行程单开票资格，进行纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114786657-d4a6ba36-2513-4151-90cb-a8fdfd4e3d7d.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具电子行程单的资格。

###### **2.2.1.1判断逻辑**
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具电子行程单蓝字发票。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### **2.2.2获取开票基础信息**
查询本地保存的税收分类编码信息和可用税率信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114786880-1da619d1-f1ea-4593-b92a-52a6974d61e9.png)

##### **2.2.3录入、校验发票信息**
依据开票能力发票开具的要求，录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114787085-2819cff8-3ce0-4c10-bd06-c9abdf41d4aa.png)

###### **2.2.3.1合规性校验**
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 发票号码，必填，长度20位，由数字组成，前2位为年份后2位。

● 蓝字发票标志，必填，长度1位。

● 平台编号，必填，最大长度20位。

● 服务器地址，必填，长度20位。

● mac地址，必填，长度20位。

● CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 发票票种，必填，取值范围为“06”。

● 特定要素，必填，取值范围为“22”。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 差额征税类型代码，必填，取值范围为“空”、“01”、“02”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，必填，最大长度300位。

● 销售方地址，选填，最大长度300位。

● 销售方电话，选填，最大长度60位。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 购买方纳税人识别号，选填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方自然人标志，选填，取值范围为“Y”、“N”。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行，选填，最大长度120位。

● 购买方账号，选填，最大长度50位。

● 购买方经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 价税合计（大写），必填，最大长度300位。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度100位。

● 结算方式代码，选填，最大长度2位。

● 开票人，必填，最大长度300位。当使用联用、他用能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，选填，最大长度30位。当使用联用、他用能力时，必填，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，选填，最大长度4位。当使用他用、联用能力时，必填，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 开具红字发票对应的蓝字发票号码，选填，最大长度20位。

● 红字确认信息单编号，选填，最大长度20位。

● 红字确认单uuid，选填，最大长度32位。

● 备注，选填，最大长度	450位。

● 开票日期，必填，格式：yyyy-MM-dd HH:mm:ss

● 国内国际标识，选填，长度1位。

● GP单号，选填，最大长度20位。

● 旅客姓名，必填，最大长度150位。

● 身份证件类型，必填，最大长度3位。

● 有效身份证件号码，必填，最大长度30位。

● 签注，选填，最大长度200位。

● 电子客票号码，必填，最大长度30位

● 验证码，选填，最大长度20位。

● 行程单提示信息，选填，最大长度100位。

● 保险费，选填，最大长度20位。

● 销售网点代号，选填，最大长度20位。

● 填开单位，选填，最大长度300位。

● 行程序号，必填，最大长度5位。

● 始发站，必填，最大长度50位。

● 目的站，必填，最大长度50位。

● 航段，必填，长度2位。

● 承运人，选填，最大长度20位。

● 航班号，选填，最大长度20位。

● 座位等级，选填，最大长度20位。

● 承运日期，选填，格式必须是“yyyy-MM-dd”。

● 起飞时间，选填，格式必须是“hh:mm”。

● 客票级别/客票类别，选填，最大长度20位。

● 客票生效日期，选填，格式必须是“yyyy-MM-dd”。

● 有效截止日期，选填，格式必须是“yyyy-MM-dd”。

● 免费行李额，选填，最大长度20位。

● 明细序号，必填，长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 规格型号，选填，最大长度150位。

● 单位，选填，最大长度300位。

● 数量，选填（单价非空时，必填），最大长度25位。

● 单价，选填（数量非空时，必填），最大长度25位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

● 优惠政策标识，选填，不为空时取值范围为“01”、“02”、“03”、“04”、“05”、“06”、“07”、“08”、“09”、“10”、“11”、“12”、“13”、“14”、“15”、“16”、“17”、“18”。

###### **2.2.3.2数据校验**
● 汇总金额校验：|所有商品行不含税金额之和-合计金额|<=0.01。

● 单行税额校验：| 不含税金额 * 税率（不含税税率） - 税额 |<=0.06。

● 汇总税额校验：| 不含税金额 * 税率（不含税税率）（第1行）+......+不含税金额 * 税率（第N行）-税额合计|<=1.27。

● 发票上传接口中“平台编号”字段值必须为直连单位ID。

● 单张发票明细行最多不能超过5000条，超过5000条则阻断发票上传；建议企业开具发票明细行控制在2000条以下。

● 开具发票只能使用税收分类编码中“是否汇总项”字段为“N”的编码进行开票。

● 差额征税类型代码必须为空。

● 发票上传时间与开票时间间隔应当小于48小时。

● 开具蓝字发票时，“项目名称”及“商品和服务税收分类合并编码”传值字段只能使用下表中对应的编码与名称且民航发展基金的优惠政策标识必须选择“不征税”。

| 特定要素 | 项目名称 | 可用的商品和服务编码 |
| --- | --- | --- |
| 航空运输电子客票行程单 | 票价 | 3010301010100000000  |
| | 燃油附加费 | 3010301010100000000  |
| | 民航发展基金 | 6130000000000000000  |




● 如购买方为自然人并要求能将发票归集在个人票夹中展示，“购买方自然人标志”需填写“Y”，并提供姓名（购买方名称）及身份证号（购买方纳税人识别号），且购买方名称需追加“（个人）”结尾。例如：开票时【购买方名称】填写内容为“张先生”，则开具出的发票【购买方名称】内容为“张先生（个人）”。

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### **2.2.4发票赋码**
根据电子行程单号码规则，给要开具的电子行程单发票依次分配不重复的电子行程单发票号码。

赋码规则：发票号码设计采用20位电子发票编码规则，编码规则说明如下：

第1-2位，共2位，取开票年份的末2位，如2021年开的发票为21，2022年为22，以此类推。

第3-4位，共2位，为省份代码。

第5位是8。

6到20位调用民航规则。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114787325-1d83b512-51c5-4d67-9815-54f68f95f999.png)

##### **2.2.5发票上传**
发票赋码成功后，首先在本地保存电子行程单预开具信息（发票状态为“预开具成功”），调用税务局端《电子行程单上传》接口预上传电子行程单，并依据返回的结果，更新本地电子行程单预上传结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114787532-aff9cef9-5e61-4fcb-a602-0df021c78c7f.png)

###### **2.2.5.1判断逻辑**
调用《电子行程单上传》接口，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **2.2.6查询发票上传结果**
发票上传成功后，间隔10秒-10分钟依据发票上传返回的“受理流水号”调用税务局端《查询电子行程单上传结果》接口查询电子行程单是否接收成功，并依据返回的开具结果，更新本地电子行程单开具结果，返回结果中包含每张发票的处理结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114787807-69041311-2bc6-46ca-bf80-7473bbd05984.png)

###### **2.2.6.1判断逻辑**
调用《查询电子行程单开具状态》接口，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

### 3电子行程单红字确认单申请
#### 3.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114788128-34499f66-fb72-4644-8359-5ad9cf7074d2.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114788348-01db9cd7-351b-4b1b-bb62-a9a92afe2998.png)

时序图

#### 3.2业务规则
##### **3.2.1判断纳税人开具资格**
校验纳税人是否具备电子行程单红字确认单开具资格，包括纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114788584-4ed15f45-0cf1-4f20-8b66-9113a70a61df.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具电子行程单红字确认单资格。

###### **3.2.1.1判断逻辑**
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具电子行程单红字确认单。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### **3.2.2本地判断蓝字电子行程单是否可红冲**
查询本地保存蓝字电子行程单勾选信息，校验蓝字电子行程单勾选是否具备红冲条件。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114788845-8c5380e8-a668-4217-9659-7d9c33fca359.png)

###### **3.2.2.1判断逻辑**
对从本地查询的蓝字电子行程单勾选信息、电子行程单红字确认单信息进行判断，满足以下任意条件时禁止开具电子行程单红字确认单。

● 查询蓝字电子行程单“发票用途状态信息”失败时。

● 对应蓝字电子行程单的“异常凭证状态”非“01（正常）”时。

● 对应蓝字电子行程单的“发票状态”非“01（正常）”时。

● 对应蓝字电子行程单的“红字锁定标识”为“Y（锁定）”时。

● 红字确认单申请方非蓝字电子行程单销售方时。

##### **3.2.3录入、校验电子行程单红字确认单信息**
依据开票能力电子行程单确认单要求，录入电子行程单确认单信息，并依据电子行程单确认单开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114789103-18357bc8-f563-4659-84c5-3dac1c5fafaf.png)

###### **3.2.3.1合规性校验**
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 录入方身份，必填，取值范围为“0”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，选填，最大长度300位。

● 购买方纳税人识别号，选填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 蓝字发票开票日期，必填，格式为yyyy-MM-dd HH:mm:ss。

● 蓝字发票合计金额，必填，最大长度18位，最多2位小数。

● 蓝字发票合计税额，必填，最大长度18位，最多2位小数。

● 蓝字发票发票票种代码，必填，取值范围为“06”。

● 蓝字发票特定要素类型代码，必填，取值范围为“22”。

● 红字冲销金额，必填，最大长度18位，最多2位小数。

● 红字冲销税额，必填，最大长度18位，最多2位小数。

● 红字发票冲红原因代码，必填，取值范围为“01”、“03”、“04”。

● 明细序号，必填，长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 规格型号，选填，最大长度150位。

● 单位，选填，最大长度300位。

● 数量，选填（单价非空时，必填），最大长度25位。

● 单价，选填（数量非空时，必填），最大长度25位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

###### 3.2.3.2**数据校验**
● 含税金额 = 税额 + 金额，不能有误差。

● 对于税控发票，申请红字确认单时，如果税控蓝票项目名称为*A*B，红字确认单项目名称字段填写税控蓝字发票项目名称第二个*号之后的内容，即B。

● “红冲原因”为“开票有误”时，必须全额红冲，并且明细单价、金额、数量必须和蓝字发票保持一致。

● “红冲原因”为“服务中止”时，允许修改总金额和数量，不允许修改单价。

● “红冲原因”为“销售折让”时，单价、数量必须为空。

● 当受票方为自然人时，只允许开票方填开《红字发票信息确认单》后，开具红字数电票，无需受票方确认。若自然人在个人票夹未操作“拒收”，此时支持部分红冲或全额红冲；若已操作“拒收”，此时仅支持全额红冲。对于已部分红冲后的蓝字发票，自然人对于原蓝票剩余部分操作“拒收”，仅允许对于剩余部分一次性全部冲完，不再允许对于剩余部分多次红冲。

● 当受票方为企业时，按照以下规则红冲：

1.受票方未做用途确认及入账确认的，开票方填开《红字发票信息确认单》后，开具红字数电票，无需受票方确认。

2.受票方已进行用途确认或入账确认的，由开票方填开《红字发票信息确认单》，经受票方确认后，开票方依据《红字发票信息确认单》开具红字发票。发起红冲流程后，受票方需在72小时内进行确认，未在规定时间内确认的，该流程自动作废。受票方无论是否进行勾选用途确认或入账确认，均支持部分红冲或全额红冲。

##### **3.2.4电子行程单红字确认单开具**
电子行程单红字确认单录入校验通过后，首先在本地保存电子行程单红字确认单申请信息，调用税务局端《电子行程单红字确认单申请》接口将预申请数字化电子电子行程单确认单上传至税务局端，如果返回成功则表明预申请电子行程单红字确认单上传成功。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114789412-0023d277-62c9-4331-b845-49ac2862ecf1.png)

###### **3.2.4.1判断逻辑**
调用《电子行程单红字确认单开具》接口，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

### 4红字确认单确认
#### **4.1全流程图**
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114789694-ca5d6c08-093a-4c3f-85cc-402b213b99fa.png)

业务流程图

#### **4.2业务规则 **
##### **4.2.1查询数电红字确认单信息**
从本地查询数电红字确认单信息，判断红字确认单是否可以确认。

###### **4.2.1.1判断逻辑**
根据查询的数电红字确认单信息进行校验，当满足以下任意条件时禁止确认数电红字确认单。

● 查询数电红字确认单信息失败，本地无数电红字确认单信息。

● 红字确认单状态非待确认状态。

##### **4.2.2选择、确认数电红字确认单**
从查询出的数电红字确认单中选择需要确认的数电红字确认单，并选择确认结果。

##### **4.2.3上传数电红字确认单确认信息**
调用《数电红字确认单确认》接口向税务局端上传数电红字确认单确认结果，包括：同意、不同意和撤销，并更新数电红字确认单确认信息上传结果。

红字确认单撤销时要求红字确认单状态为有效且未开具红票，红字确认单撤销只能由最后操作方申请，具体包含以下规则：

1）购买方未对蓝字发票做勾选/入账操作，销售方申请红字确认单，这时红字确认单状态为“01”，此时只允许销售方撤销。

2）购买方对蓝字发票做勾选/入账操作，销售方申请红字确认单，购买方未确认，这时红字确认单状态为“02”，此时只允许销售方撤销。

3）购买方对蓝字发票做勾选/入账操作，销售方申请红字确认单，购买方已确认，这时红字确认单状态为“04”，此时只允许购买方撤销。

4）购买方对蓝字发票做勾选/入账操作，购买方申请红字确认单，销售方未确认，这时红字确认单状态为“03”，此时只允许购买方撤销。

5）购买方对蓝字发票做勾选/入账操作，购买方申请红字确认单，销售方已确认，这时红字确认单状态为“04”，此时只允许销售方撤销。

### 5红字电子行程单开具
#### 5.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114789933-523f59fd-fbca-46f1-a4e4-2220aab23a7a.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114790304-ec5c6917-f87e-4914-904e-b8b4f7d8d128.png)

时序图

#### 5.2.业务规则
##### **5.2.1校验红字确认单状态**
查询本地保存的红字确认单信息，判断是否存在红字确认单信息以及红字确认单状态是否正常。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114790573-6c9d4f12-1057-45b8-be44-424149f7f680.png)

###### **5.2.1.1判断逻辑**
根据查询的红字确认单信息进行校验，当满足以下任意条件时禁止开具红字发票。

● 未查询到红字确认单信息，本地无红字确认单信息。

● 红字确认单审核通过，但红字确认单信息状态非“01（无需确认）”。

##### **5.2.2判断纳税人开票资格**
校验纳税人是否具备红字电子行程单开票资格，包括纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114791140-aef036e1-1e18-485b-80b3-c9996228bada.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具红字电子行程单的资格。

###### **5.2.2.1判断逻辑**
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具红字电子行程单。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### **5.2.3录入、校验发票信息**
依据开票能力红字发票开具的要求，依据红字确认单录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114791397-e760e9f6-dc95-410e-bfc2-e288de7d22b5.png)

###### **5.2.3.1合规性校验**
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 发票号码，必填，长度20位，由数字组成，前2位为年份后2位。

● 蓝字发票标志，必填，长度1位。

● 平台编号，必填，最大长度	20位。

● 服务器地址，必填，长度20位。

● mac地址，必填，长度20位。

● CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 发票票种，必填，取值范围为“06”。

● 特定要素，必填，取值范围为“22”。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 差额征税类型代码，必填，取值范围为“空”、“01”、“02”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，必填，最大长度300位。

● 销售方地址，选填，最大长度300位。

● 销售方电话，选填，最大长度60位。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 购买方纳税人识别号，选填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方自然人标志，选填，取值范围为“Y”、“N”。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行，选填，最大长度120位。

● 购买方账号，选填，最大长度50位。

● 购买方经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 价税合计（大写），必填，最大长度300位。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度100位。

● 结算方式代码，选填，最大长度2位。

● 开票人，必填，最大长度300位。当使用联用、他用能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，选填，最大长度30位。当使用联用、他用能力时，必填，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，选填，最大长度4位。当使用他用、联用能力时，必填，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 开具红字发票对应的蓝字发票号码，必填，最大长度20位。

● 红字确认信息单编号，必填，最大长度20位。

● 红字确认单uuid，必填，最大长度32位。

● 备注，选填，最大长度	382位。

● 开票日期，必填，格式：yyyy-MM-dd HH:mm:ss

● 国内国际标识，选填，长度1位。

● GP单号，选填，最大长度20位。

● 旅客姓名，必填，最大长度150位。红冲之前开具的蓝票若未填写可不填写该字段。

● 身份证件类型，必填，最大长度3位。红冲之前开具的蓝票若未填写可不填写该字段。

● 有效身份证件号码，必填，最大长度30位。红冲之前开具的蓝票若未填写可不填写该字段。

● 签注，选填，最大长度200位。

● 电子客票号码，必填，最大长度30位

● 验证码，选填，最大长度20位。

● 行程单提示信息，选填，最大长度100位。

● 保险费，选填，最大长度20位。

● 销售网点代号，选填，最大长度20位。

● 填开单位，选填，最大长度300位。

● 行程序号，必填，最大长度5位。

● 始发站，必填，最大长度50位。

● 目的站，必填，最大长度50位。

● 航段，必填，长度2位。

● 承运人，选填，最大长度20位。

● 航班号，选填，最大长度20位。

● 座位等级，选填，最大长度20位。

● 承运日期，选填，格式必须是“yyyy-MM-dd”。

● 起飞时间，选填，格式必须是“hh:mm”。

● 客票级别/客票类别，选填，最大长度20位。

● 客票生效日期，选填，格式必须是“yyyy-MM-dd”。

● 有效截止日期，选填，格式必须是“yyyy-MM-dd”。

● 免费行李额，选填，最大长度20位。

● 明细序号，必填，长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 规格型号，选填，最大长度150位。

● 单位，选填，最大长度300位。

● 数量，选填（单价非空时，必填），最大长度25位。

● 单价，选填（数量非空时，必填），最大长度25位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

● 优惠政策标识，选填，不为空时取值范围为“01”、“02”、“03”、“04”、“05”、“06”、“07”、“08”、“09”、“10”、“11”、“12”、“13”、“14”、“15”、“16”、“17”、“18”。

###### **5.2.3.2数据校验**
● 含税金额=税额+金额，不能有误差。

● 红票开具金额=对应蓝字发票开具金额。

● 差额征税类型代码必须为空，优惠政策标识必须与蓝字发票一致。

● 发票上传时间与开票时间间隔应当小于48小时。

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连平台自身、直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### **5.2.4发票赋码**
根据电子行程单号码规则，给要开具的电子行程单发票依次分配不重复的电子行程单发票号码。

赋码规则：发票号码设计采用20位电子发票编码规则，编码规则说明如下：

第1-2位，共2位，取开票年份的末2位，如2021年开的发票为21，2022年为22，以此类推。

第3-4位，共2位，为省份代码。

第5位是8。

6到20位调用民航规则。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114791603-9a950347-1b8b-441e-9620-7823dd279154.png)

##### **5.2.5发票上传**
发票赋码成功后，首先在本地保存电子行程单预开具信息（发票状态为“预开具成功”），调用税务局端《电子行程单上传》接口预上传电子行程单，并依据返回的结果，更新本地电子行程单预上传结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114791820-4e904e64-fe7b-4349-a682-708c83d93fe7.png)

###### **5.2.5.1判断逻辑**
调用《电子行程单上传》接口，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **5.2.6查询发票上传结果**
发票上传成功后，间隔10秒-10分钟依据发票上传返回的“受理流水号”调用税务局端《查询电子行程单上传结果》接口查询电子行程单是否接收成功，并依据返回的开具结果，更新本地电子行程单开具结果，返回结果是包含每张发票的处理结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114792054-30517b43-d7de-47d2-ae24-0ed40b8ebbcd.png)

###### **5.2.6.1判断逻辑**
调用《查询电子行程单开具状态》接口，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

### 6开票汇总确认
#### 6.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114792265-d20a5577-a816-4a58-b48d-248ab1db2baf.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114792514-45a1b64c-4685-475b-b9c6-8a55856eb4aa.png)

时序图

#### 6.2.业务规则
##### **6.2.1数字化电子发票汇总信息上传**
给企业提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和税额上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。开票汇总确认后不允许上传已确认的月份的数字化电子发票说明。

若企业在每月13日零点前未上传上个月的发票汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票。每月13日零点之后，上个月未上传的发票，请重新开具。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114792711-876850f2-7b76-4e56-abdc-e162ad566ec6.png)

每月13日零点之前，当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114792901-ca455e86-620c-4693-aaa1-13b299b0f2f7.png)

###### **6.2.1.1判断逻辑**
调用《上传发票汇总确认信息》接口当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### **6.2.2查询发票汇总确认信息**
给企业提供发票汇总确认信息查询功能，企业可以通过此接口查询历史发票汇总确认信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114793144-f93ace62-b24c-4440-850f-fbbaad2065e6.png)

###### **6.2.2.1判断逻辑**
调用《查询发票会汇总确认信息》接口当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

# **五、**接口技术说明
## （一）能力编码
| 能力名称 | 乐企航空运输电子客票开票能力 |
| --- | --- |
| 能力编码 | 202003 |




## （二）接口清单
| **序号** | **接口名称** | **服务编码** |
| :---: | --- | --- |
| 1 | 查询纳税人基本信息 | <font style="color:rgb(0, 0, 0);">CXNSRJBXX</font> |
| 2 | 查询税收分类编码信息 | <font style="color:rgb(0, 0, 0);">CXSSFLBM</font> |
| 3 | 查询可用税率信息 | <font style="color:rgb(0, 0, 0);">CXKYSL</font> |
| 4 | 电子行程单上传 | <font style="color:rgb(0, 0, 0);">CAAC_QDFPSC</font> |
| 5 | 查询电子行程单上传结果 | <font style="color:rgb(0, 0, 0);">CXQDFPSCJG</font> |
| 6 | 电子行程单红字确认单申请 | <font style="color:rgb(0, 0, 0);">QDHZQRDSQ_CAAC</font> |
| 7 | 发票用途状态信息查询 | FPYTXXCX |
| 8 | 查询电子行程单红字确认单列表信息 | <font style="color:rgb(0, 0, 0);">CXQDHZQRDLB_CAAC</font> |
| 9 | 查询电子行程单红字确认单明细信息 | <font style="color:rgb(0, 0, 0);">CXQDHZQRDMX_CAAC</font> |
| 10 | 电子行程单红字确认单确认 | <font style="color:rgb(0, 0, 0);">QDHZQRDQR_CAAC</font> |
| 11 | 上传发票汇总确认信息 | <font style="color:rgb(0, 0, 0);">SCFPHZQRXX</font> |
| 12 | 查询发票汇总确认信息 | <font style="color:rgb(0, 0, 0);">CXFPHZQRXX</font> |


### 1.查询纳税人基本信息
#### 1.1接口说明
向企业提供查询纳税人基本信息的功能，企业可将查询的基本信息，包括生产经营信息、税务机关信息、企业性质、消费税性质等保存在本地。在开票时自校验该接口获取的纳税人基本信息是否满足开具发票的条件。

#### 1.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 1.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |


#### 1.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 1.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| :---: | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | djxh | 登记序号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | ssdabh | 税收档案编号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | nsrmc | 纳税人名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | nsrlx | 纳税人类型标签 | varchar | 300 | 是 | 1：一般纳税人<br/>2：小规模纳税人<br/>3：转登记小规模纳税人<br/>4：辅导期一般纳税人<br/>5：自然人 |
| <font style="color:rgb(0, 0, 0);">8</font> | scjydz | 生产经营地址 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | zcdyzbm | 注册地邮政编码 | varchar | 6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | zcdlxdh | 注册地联系电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | fddbrxm | 法人名称(法定代表人姓名 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | djzclxdm | 登记注册类型（国标） | varchar | 3 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | hydm | 行业代码 | varchar | 4 | 是 | 主行业代码特定征收部门可空 |
| <font style="color:rgb(0, 0, 0);">14</font> | qxjswjgdm | 区县级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | zgswskfjdm | 税务机关代码 | varchar | 11 | 是 | 主管税务所科分局 |
| <font style="color:rgb(0, 0, 0);">16</font> | zgswskfjmc | 税务机关名称 | varchar | 300 | 是 | 主管税务所科分局 |
| <font style="color:rgb(0, 0, 0);">17</font> | cwfzrxm | 财务负责人姓名 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | khhmc | 账户名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | yhzh | 账号 | varchar | 50 | 否 | 首选账户账号 |
| <font style="color:rgb(0, 0, 0);">20</font> | bsrxm | 企业办税人员姓名 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">21</font> | xdpsdqybz | 数字化电子票试点企业标识 | varchar | 20 | 是 | Y：数字化电子票试点企业<br/>N：不是数字化电子票试点企业 |
| <font style="color:rgb(0, 0, 0);">22</font> | ckqyfldm | 出口企业分类 | varchar | 20 | 是 | 空：非出口企业<br/>01：一类出口企业<br/>02：二类出口企业<br/>03：三类出口企业<br/>04：四类出口企业 |
| <font style="color:rgb(0, 0, 0);">23</font> | zfjglxdm | 总分机构类型 | varchar | 20 | 是 | 0：非总分机构 <br/>1：总机构<br/>2：分支机构 3：分总机构 |
| <font style="color:rgb(0, 0, 0);">24</font> | yhyywddm | 银行营业网点 | varchar | 13 | 否 | |
| <font style="color:rgb(0, 0, 0);">25</font> | nsrztdm | 开票方纳税人状态 | varchar | 2 | 是 | 01：受理<br/>02：筹建期<br/>03：正常<br/>04：停业<br/>05：非正常<br/>06：清算<br/>07：注销<br/>08：非正常户注销<br/>09：报验<br/>10：核销报验<br/>11：中断缴费<br/>12：恢复缴费<br/>13：简易注销无异议<br/>99：其他 |
| <font style="color:rgb(0, 0, 0);">26</font> | yxqq | 纳税人类型标签有效期起 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">27</font> | yxqz | 纳税人类型标签有效期止 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">28</font> | qyhyxzdm | 企业行业性质 | varchar | 300 | 否 | 01：成品油生产企业 <br/>02：成品油经销企业 <br/>03：国内机动车生产企业 <br/>04：进口机动车生产企业驻我国办事机构或总授权代理机构 <br/>05：机动车授权经销企业 <br/>06：其他机动车贸易商 <br/>07：二手车市场 <br/>08：二手车经销企业<br/>09：二手车拍卖企业 <br/>10：稀土矿产企业 <br/>11：稀土冶炼分离企业 <br/>12：稀土其他企业<br/>13：稀土矿产企业、稀土冶炼分离企业、稀土其他企业<br/>14：稀土矿产企业、稀土冶炼分离企业 15：稀土矿产企业、稀土其他企业 <br/>16：稀土冶炼分离企业、稀土其他企业 <br/>17：卷烟生产企业<br/>18：卷烟批发企业<br/>19：卷烟出口企业 <br/>20：生产型出口企业 <br/>21：外贸型出口企业<br/>22：外贸综合服务企业<br/>23：自贸区试点企业<br/>24：特殊监管区内企业 <br/>25：增值税一般纳税人资格试点<br/>26：市场采购试点<br/>27：退税商店<br/>28：电子商务出口企业<br/>29：享受出口退税政策的融资租赁企业 <br/>30：增值税零税率应税服务提供者<br/>31：房地产开发企业 <br/>32：农产品深加工企业<br/>33：外购石脑油、燃料油用于消费税退税企业 <br/>34：从事机动车进口的其他贸易商<br/>35：自产农产品者 <br/>36：农产品收购企业 <br/>37：光伏收购企业 <br/>38：住房租赁企业 <br/>39：冬奥会退税企业 |
| | xfsnsrlxdm | 消费税纳税人类型 | varchar | 20 | 否 | 01：卷烟生产消费税纳税人 <br/>02：卷烟批发消费税纳税人 <br/>03：白酒生产消费税纳税人 <br/>04：黄酒生产消费税纳税人 <br/>05：啤酒生产消费税纳税人 <br/>06：其他酒生产消费税纳税人 <br/>07：小汽车生产消费税纳税人 <br/>08：超豪华小汽车消费税纳税人 <br/>09：汽油生产消费税纳税人 <br/>10：石脑油生产消费税纳税人 <br/>11：溶剂油生产消费税纳税人 <br/>12：润滑油生产消费税纳税人 <br/>13：柴油生产消费税纳税人 <br/>14：航空煤油生产消费税纳税人 <br/>15：燃料油生产消费税纳税人<br/>16：电池生产消费税纳税人 <br/>17：涂料生产消费税纳税人 <br/>18：高档化妆品生产消费税纳税人<br/>19：金银首饰铂金首饰和钻石及钻石饰品零售消费税纳税人<br/>20：其他贵重首饰和珠宝玉石生产消费税纳税人<br/>21：鞭炮焰火生产消费税纳税人 <br/>22：摩托车生产消费税纳税人 <br/>23：高尔夫球及球具生产消费税纳税人 <br/>24：高档手表生产消费税纳税人 <br/>25：游艇生产消费税纳税人 <br/>26：木制一次性筷子生产消费税纳税人 <br/>27：实木地板生产消费税纳税人 <br/>28：雪茄烟生产消费税纳税人 <br/>29：烟丝生产消费税纳税人 |


#### 1.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		“Data”:{<br/>          "returncode": "00",<br/>          "returnmsg": "成功",<br/>			“jcxx”: {<br/>				"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>				"djxh": "登记序号",<br/>				"ssdabh": "税收档案编号",<br/>				"nsrmc": "纳税人名称",<br/>				"nsrlx": "纳税人类型",<br/>				"scjydz": "生产经营地址",<br/>				"zcdyzbm": "注册地邮政编码",<br/>				"zcdlxdh": "注册地联系电话",<br/>				"fddbrxm": "法人名称(法定代表人姓名",<br/>				"djzclxdm": "登记注册类型（国标）",<br/>				"hydm": "行业代码",<br/>				"qxjswjgdm": "区县级税务机关代码",<br/>				"zgswskfjdm": "税务机关代码",<br/>				"zgswskfjmc": "税务机关名称",<br/>				"cwfzrxm": "财务负责人姓名",<br/>				"khhmc": "账户名称",<br/>				"yhzh": "账号",<br/>				"bsrxm": "企业办税人员姓名",<br/>				"xdpsdqybz": "数字化电子票试点企业标识",<br/>				"ckqyfldm": "出口企业分类",<br/>				"zfjglxdm": "总分机构类型",<br/>				"yhyywddm": "银行营业网点",<br/>				"nsrztdm": "开票方纳税人状态",<br/>				"yxqq": "有效期起",<br/>				"yxqz": "有效期止"<br/>			},<br/>			“qyhyxzGrid”: [<br/>				{<br/>						"qyhyxzdm": "企业行业性质",<br/>						"yxqq": "有效期起",<br/>						"yxqz": "有效期止"<br/>				}<br/>			],<br/>			“xfsnsrlxGrid”: [<br/>				{<br/>						"xfsnsrlxdm": "消费税纳税人类型",<br/>						"yxqq": "有效期起",<br/>						"yxqz": "有效期止"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 2.查询税收分类编码信息
#### 2.1接口说明
向企业提供查询商品税收分类编码信息的功能，企业可将查询的基本信息保存在本地。在开票时选择保存在本地的税收分类编码。

#### 2.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 2.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |
| <font style="color:rgb(0, 0, 0);">2</font> | sjc | 时间戳 | date | | 否 | 格式：yyyyMMddHHmmss<br/>首次下载时为空；<br/>非首次下载时，传入上次下载返回的时间戳.格式：yyyyMMddHHmmss |
| <font style="color:rgb(0, 0, 0);">3</font> | sjswjgdm | 省级税务机关代码 | varchar | 11 | 否 |  |


#### 2.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>	"sjc": "时间戳",<br/>	"sjswjgdm": "省级税务机关代码"<br/>} |
| --- |


#### 2.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | sjc | 时间戳 | date | | 是 | 格式：<br/>yyyyMMddHHmmss<br/>用于增量下载 |
| <font style="color:rgb(0, 0, 0);">4</font> | count | 总数量 | number | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | fjbm | 父级编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | tdyslxdm | 特定要素标签归类 | varchar | 2 | 否 | 01：成品油<br/>02：稀土<br/>03：建筑服务<br/>04：货物运输<br/>05：不动产销售<br/>06：不动产租赁<br/>07：代收车船使用税<br/>08：通行费<br/>09：旅客运输<br/>10：医疗服务<br/>11：农产品<br/>12：拖拉机和联合收割机<br/>13：机动车<br/>14：光伏收购<br/>15：卷烟 |
| <font style="color:rgb(0, 0, 0);">8</font> | cezs | 差额征税 | varchar | 1 | 否 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">9</font> | bzs | 不征税 | varchar | 1 | 否 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">10</font> | jzjtdm | 即征即退代码集合 | varchar | 150 | 否 | 01：增值税即征即退-软件产品<br/>02：增值税即征即退-资源综合利用产品<br/>03：增值税即征即退-管道运输服务<br/>04：增值税即征即退-有形动产融资租赁服务<br/>05：增值税即征即退-有形动产融资性售后回租服务<br/>06：增值税即征即退-新型墙体材料<br/>07：增值税即征即退-风力发电产品<br/>08：增值税即征即退-光伏发电产品<br/>09：增值税即征即退-动漫软件产品<br/>10：增值税即征即退-飞机维修劳务<br/>11：增值税即征即退-黄金<br/>12：增值税即征即退-铂金 |
| <font style="color:rgb(0, 0, 0);">11</font> | sphfwmc | 商品和服务名称 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | sphfwfljc | 商品和服务分类简称 | varchar | 120 | 是 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | sm | 说明 | varchar | | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | zzssl | 增值税税率 | varchar | 50 | 否 | <br/>取值返回是中文顿号连接的百分数。例如3%、5% |
| <font style="color:rgb(0, 0, 0);">15</font> | zsl | 征收率 | varchar | 50 | 否 | <br/>取值返回是中文顿号连接的百分数。例如3%、5% |
| <font style="color:rgb(0, 0, 0);">16</font> | zzstsgl | 增值税特殊管理 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | zzszcyj | 增值税政策依据 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | zzstsnrdm(zzsjmszcdmb) | 增值税特殊内容代码（增值税减免税政策代码表） | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | xfsgl | 消费税管理 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | xfszcyj | 消费税政策依据 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">21</font> | xfstsnrdm | 消费税特殊内容代码 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | gjz | 关键字 | mediumtext | | 否 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | sfhzx | 是否汇总项 | varchar | 1 | 是 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">24</font> | dytjjbm | 对应统计局编码（2011年版）或国民行业代码 | mediumtext | | 否 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | hgjcksppm | 海关进出口商品品目 | mediumtext | | 否 |  |
| 26 | qyrq | 启用日期 | date | | 是 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">27</font> | tyrq | 停用日期 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">28</font> | hydm | 行业代码 | varchar | 4 | 否 | 主行业代码特定征收部门可空 |
| <font style="color:rgb(0, 0, 0);">29</font> | dydhy | 对应的行业 | varchar | 68 | 否 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | hydydzspm1 | 行业对应的征收品目一 | varchar | 9 | 否 |  |
| <font style="color:rgb(0, 0, 0);">31</font> | hydydzsmc1 | 行业对应的征收名称一 | varchar | 210 | 否 |  |
| <font style="color:rgb(0, 0, 0);">32</font> | hydydzspm2 | 行业对应的征收品目二 | varchar | 9 | 否 |  |
| <font style="color:rgb(0, 0, 0);">33</font> | hydydzsmc2 | 行业对应的征收名称二 | varchar | 210 | 否 |  |


#### 2.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>	    "returncode": "00",<br/>	    "returnmsg": "成功",<br/>		 "sjc": "时间戳",<br/>	    "count": "总数量",<br/>	    "ssbmList": [<br/>		{<br/>			    "fjbm": "父级编码",<br/> 			    "sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>			    "tdyslxdm": "特定要素标签归类",<br/>			    "cezs": "差额征税",<br/>			    "bzs": "不征税",<br/>			    "jzjtdm": "即征即退代码集合",<br/>			    "sphfwmc": "商品和服务名称",<br/>			    "sphfwfljc": "商品和服务分类简称",<br/>			    "sm": "说明",<br/>			    "zzssl": "增值税税率",<br/>			    "zsl": "征收率",<br/>			    "zzstsgl": "增值税特殊管理",<br/>			    "zzszcyj": "增值税政策依据",<br/>			   "zzstsnrdm": "增值税特殊内容代码（增值税减免税政策代码表）",<br/>			   "xfsgl": "消费税管理",<br/>			   "xfszcyj": "消费税政策依据",<br/>			   "xfstsnrdm": "消费税特殊内容代码",<br/>			   "gjz": "关键字",<br/>			   "sfhzx": "是否汇总项",<br/>			   "dytjjbm": "对应统计局编码（2011年版）或国民行业代码",<br/>			   "hgjcksppm": "海关进出口商品品目",<br/>			   "qyrq": "启用日期",<br/>			   "tyrq": "停用日期",<br/>			   "zspmList": [<br/>				{<br/>					"hydm": "行业代码",<br/>					"dydhy": "对应的行业",<br/>					"hydydzspm1": "行业对应的征收品目一",<br/>					"hydydzsmc1": "行业对应的征收名称一",<br/>					"hydydzspm2": "行业对应的征收品目二",<br/>					"hydydzsmc2": "行业对应的征收名称二"<br/>				 }<br/>			  ]<br/>		  }<br/>	   ]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 3.查询可用税率信息
#### 3.1接口说明
向企业提供查询可用税率信息的功能，企业可将查询的基本信息保存在本地。在开票时选择保存在本地的可用税率。

#### 3.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 3.3请求参数
无

#### 3.4请求报文示例
| {} |
| --- |


#### 3.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| :---: | --- | --- | --- | :---: | :---: | --- |
| 1.  | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 1.  | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 1.  | count | 总数量 | number | 10 | 是 |  |
| 1.  | csxz | 参数性质 | varchar | 2 | 是 | 1：税率<br/>2：征收率 |
| 1.  | slzsl | 税率征收率 | number | 16,6 | 是 |  |
| 1.  | yslbz | 原税率标志 | varchar | 1 | 是 | Y：是原税率<br/>N：非原税率 |
| 1.  | dyysl | 对应原税率 | varchar | 150 | 否 | 百分比形式、逗号连接 |
| 1.  | cszt | 参数状态 | varchar | 1 | 是 | 0：启用<br/>1：停用 |
| 1.  | yxqq | 有效期起 | date | | 是 | 时间格式：<br/>yyyy-MM-dd |
| 1.  | yxqz | 有效期止 | date | | 否 | 时间格式：<br/>yyyy-MM-dd |
| 1.  | tyrq | 停用日期 | date | | 否 | 时间格式：<br/>yyyy-MM-dd |


#### 3.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>	      "returncode": "00",<br/>	      "returnmsg": "成功",<br/>	      "count": "总数量",<br/>	    "slzslList": [<br/>		 {<br/>			"     csxz": "参数性质",<br/>			     "slzsl": "税率征收率",<br/>			     "yslbz": "原税率标志",<br/>			     "dyysl": "对应原税率",<br/>			     "cszt": "参数状态",<br/>			     "yxqq": "有效期起",<br/>			     "yxqz": "有效期止",<br/>			     "tyrq": "停用日期"<br/>		  }<br/>	   ]<br/>}<br/>	  }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 4.电子行程单上传
#### 4.1接口说明
给企业提供上传开具的电子行程单预发票功能，上传成功后给企业返回信息。

税务局端接收到企业上传的电子行程单后，依次校验企业是具备开票条件、发票信息是否合规、电子行程单发票号码是否合法，当校验不通过时，不接收企业上传的电子行程单，返回具体错误信息。每次上传最大票量为100张数字化电子发票。

#### 4.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 4.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | --- | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | fphm | 发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | lzfpbz | 蓝字发票标志 | varchar | 1 | 是 | 0：蓝字发票<br/>1：红字发票 |
| <font style="color:rgb(0, 0, 0);">3</font> | ptbh | 平台编号 | varchar | 20 | 是 | 直连单位ID |
| <font style="color:rgb(0, 0, 0);">4</font> | ip | 服务器地址 | varchar | 20 | 是 | 需自行采集开票申请设备 |
| <font style="color:rgb(0, 0, 0);">5</font> | macdz | mac地址 | char | 20 | 是 | 需自行采集开票申请设备 |
| <font style="color:rgb(0, 0, 0);">6</font> | cpuid | CPU序列号 | char | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | zbxlh | 主板序列号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | fppz | 发票票种 | varchar | 2 | 是 | 06：电子行程单 |
| <font style="color:rgb(0, 0, 0);">9</font> | tdys | 特定要素 | varchar | 2 | 是 | 22：电子行程单 |
| <font style="color:rgb(0, 0, 0);">10</font> | fpkjfsDm | 发票开具方式代码 | varchar | 1 | 是 | 4：第三方平台开票（乐企联用、他用开票）<br/>5：自建平台开票（乐企自用开票） |
| <font style="color:rgb(0, 0, 0);">11</font> | cezslxDm | 差额征税类型代码 | varchar | 2 | 否 | 空：非差额发票<br/>01：全额开票<br/>02：差额开票 |
| <font style="color:rgb(0, 0, 0);">12</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | xsfmc | (销售方)名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | xsfdz | 销售方地址 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | xsfdh | 销售方电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">16</font> | xsfkhh | 销售方开户行 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | xsfzh | 销售方账号 | varchar | 50 | 否 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | gmfmc | (购买方)名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | gmfzrrbz | 购买方自然人标志 | varchar | 1 | 否 | Y：购买方是自然人<br/>N：购买方非自然人 |
| <font style="color:rgb(0, 0, 0);">21</font> | gmfdz | 购买方地址 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | gmfdh | 购买方电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | gmfkhh | 购买方开户行 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | gmfzh | 购买方账号 | varchar | 50 | 否 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | gmfjbr | 购买方经办人 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">26</font> | jbrsfzjhm | 购买方经办人证件号码 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">27</font> | gmfjbrlxdh | 购买方经办人联系电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">28</font> | hjje | 合计金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">29</font> | hjse | 合计税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | jshj | 价税合计 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">31</font> | jshjdx | 价税合计（大写） | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">32</font> | skyhmc | 收款银行名称 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">33</font> | skyhzh | 收款银行账号 | varchar | 100 | 否 |  |
| <font style="color:rgb(0, 0, 0);">34</font> | jsfs | 结算方式 | varchar | 2 | 否 | 01：现金<br/>02：银行转账<br/>03：票据<br/>04：第三方支付<br/>05：预付卡<br/>99：其他 |
| <font style="color:rgb(0, 0, 0);">35</font> | kpr | 开票人 | varchar | 16 | 是 |  |
| <font style="color:rgb(0, 0, 0);">36</font> | kprzjhm | 开票人证件号码 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">37</font> | kprzjlx | 开票人证件类型 | varchar | 4 | 否 | 100：单位<br/>101：组织机构代码证<br/>102：营业执照<br/>103：税务登记证<br/>199：其他单位证件<br/>200：个人<br/>201：居民身份证<br/>202：军官证<br/>203：武警警官证<br/>204：士兵证<br/>205：军队离退休干部证<br/>206：残疾人证<br/>207：残疾军人证（1-8级）<br/>208：外国护照<br/>209：港澳同胞回乡证<br/>210：港澳居民来往内地通行证<br/>211：台胞证<br/>212：中华人民共和国往来港澳通行证<br/>213：台湾居民来往大陆通行证<br/>214：大陆居民往来台湾通行证<br/>215：外国人居留证<br/>216：外交官证<br/>217：使（领事）馆证<br/>218：海员证<br/>219：香港永久性居民身份证<br/>220：台湾身份证<br/>221：澳门特别行政区永久性居民身份证<br/>222：外国人身份证件<br/>223：高校毕业生自主创业证<br/>224：就业失业登记证<br/>225：退休证<br/>226：离休证<br/>227：中国护照<br/>228：城镇退役士兵自谋职业证<br/>229：随军家属身份证明<br/>230：中国人民解放军军官转业证书<br/>231：中国人民解放军义务兵退出现役证<br/>232：中国人民解放军士官退出现役证<br/>233：外国人永久居留身份证（外国人永久居留证）<br/>234：就业创业证<br/>235：香港特别行政区护照<br/>236：澳门特别行政区护照<br/>237：中华人民共和国港澳居民居住证<br/>238：中华人民共和国台湾居民居住证<br/>239：《中华人民共和国外国人工作许可证》（A类）<br/>240：《中华人民共和国外国人工作许可证》（B类）<br/>241：《中华人民共和国外国人工作许可证》（C类）<br/>291：出生医学证明<br/>299：其他个人证件 |
| <font style="color:rgb(0, 0, 0);">38</font> | dylzfphm | 开具红字发票对应的蓝字发票号码 | varchar | 20 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传；<br/>如果红冲的是税控发票，对应蓝字发票号码的填写规则为税控发票的发票代码+发票号码。 |
| <font style="color:rgb(0, 0, 0);">39</font> | hzqrxxdbh | 红字确认信息单编号 | varchar | 	20 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传 |
| <font style="color:rgb(0, 0, 0);">40</font> | hzqrduuid | 红字确认单uuid | varchar | 32 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传 |
| <font style="color:rgb(0, 0, 0);">41</font> | bz | 备注 | varchar | 450 | 否 | 蓝票最长450位，红票最长382位。 |
| <font style="color:rgb(0, 0, 0);">42</font> | kprq | 开票日期 | datetime | | 是 | 格式：<br/>yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">43</font> | mxsl | 明细数量 | number | 5 | 否 |  |
| <font style="color:rgb(0, 0, 0);">44</font> | tdyssl | 特定要素数量 | number | 5 | 否 |  |
| <font style="color:rgb(0, 0, 0);">45</font> | gngjbs | 国内国际标识 | varchar | 1 | 否 | D：国内客票 |
| <font style="color:rgb(0, 0, 0);">46</font> | gpdh | GP单号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">47</font> | lkxm | 旅客姓名 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">48</font> | sfzjlx | 身份证件类型 | varchar | 3 | 是 | 201：居民身份证<br/>202：军官证   208：外国护照<br/>227：中国护照<br/>235：香港特别行政区护照<br/>236：澳门特别行政区护照<br/>299：其他个人证件 |
| <font style="color:rgb(0, 0, 0);">49</font> | sfzjhm | 有效身份证件号码 | varchar | 30 | 是 |  |
| <font style="color:rgb(0, 0, 0);">50</font> | qz | 签注 | varchar | 200 | 否 |  |
| <font style="color:rgb(0, 0, 0);">51</font> | dzkphm | 电子客票号码 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">52</font> | yzm | 验证码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">53</font> | xcdtsxx | 行程单提示信息 | varchar | 100 | 否 |  |
| <font style="color:rgb(0, 0, 0);">54</font> | bxf | 保险费 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">55</font> | xswddh | 销售网点代号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">56</font> | tkdw | 填开单位 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">57</font> | hdxh | 航段序号 | number | 5 | 是 | |
| <font style="color:rgb(0, 0, 0);">58</font> | sfz | 始发站 | varchar | 50 | 是 | ”广州  CAN”或者”广州”，南航传入 |
| <font style="color:rgb(0, 0, 0);">59</font> | mdd | 目的站 | varchar | 50 | 是 | ”广州  CAN”或者”广州”，南航传入 |
| <font style="color:rgb(0, 0, 0);">60</font> | hd | 航段 | varchar | 2 | 是 | 标记航段飞行顺序 |
| <font style="color:rgb(0, 0, 0);">61</font> | cyr | 承运人 | varchar | 20 | 否 | 行程信息（循环） |
| <font style="color:rgb(0, 0, 0);">62</font> | hbh | 航班号 | varchar | 20 | 否 | 行程信息（循环） |
| <font style="color:rgb(0, 0, 0);">63</font> | zwdj | 座位等级 | varchar | 20 | 否 | 行程信息（循环） |
| <font style="color:rgb(0, 0, 0);">64</font> | cyrq | 承运日期 | date | | 否 | 行程信息（循环）<br/>格式：yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">65</font> | qfsj | 起飞时间 | datetime | | 否 | 行程信息（循环）<br/>格式：hh:mm |
| <font style="color:rgb(0, 0, 0);">66</font> | kpjblb | 客票级别/客票类别 | varchar | 20 | 否 | 行程信息（循环） |
| <font style="color:rgb(0, 0, 0);">67</font> | kpsxrq | 客票生效日期 | date | | 否 | 行程信息（循环）<br/>格式：yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">68</font> | yxjzrq | 有效截止日期 | date | | 否 | 行程信息（循环）<br/>格式：yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">69</font> | mfxle | 免费行李额 | varchar | 20 | 否 | 例如：20KG，字段需扩容 |
| <font style="color:rgb(0, 0, 0);">70</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">71</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 否 | 红票必传 |
| <font style="color:rgb(0, 0, 0);">72</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">73</font> | ggxh | 规格型号 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">74</font> | dw | 单位 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">75</font> | sl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">76</font> | dj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">77</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">78</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">79</font> | se | 税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">80</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">81</font> | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">82</font> | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |
| <font style="color:rgb(0, 0, 0);">83</font> | yhzcbs | 优惠政策标识 | varchar | 2 | 否 | 01：简易征收<br/>02：稀土产品<br/>03：免税<br/>04：不征税<br/>05：先征后退<br/>06：100%先征后退<br/>07：50%先征后退<br/>08：按3%简易征收<br/>09：按5%简易征收<br/>10：按5%简易征收减按1.5%计征<br/>11：即征即退30%<br/>12：即征即退50%<br/>13：即征即退70%<br/>14：即征即退100%<br/>15：超税负3%即征即退<br/>16：超税负8%即征即退<br/>17：超税负12%即征即退<br/>18：超税负6%即征即退 |


#### 4.4请求报文示例
| [<br/>	{<br/>		"fphm": "发票号码",<br/>		"lzfpbz": "蓝字发票标志",<br/>		"ptbh": "平台编号",<br/>		"ip": "服务器地址",<br/>		"macdz": "mac地址",<br/>		"cpuid": "CPU序列号",<br/>		"zbxlh": "主板序列号",<br/>		"fppz": "发票票种",<br/>		"tdys": "特定要素",<br/>		"fpkjfsDm": "发票开具方式代码",<br/>		"cezslxDm": "差额征税类型代码",<br/>		"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>		"xsfmc": "（销售方）名称",<br/>		"xsfdz": "销售方地址",<br/>		"xsfdh": "销售方电话",<br/>		"xsfkhh": "销售方开户行",<br/>		"xsfzh": "销售方账号",<br/>		"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>		"gmfmc": "（购买方）名称",<br/>		"gmfzrrbz": "购买方自然人标志",<br/>"gmfdz": "购买方地址",<br/>		"gmfdh": "购买方电话",<br/>		"gmfkhh": "购买方开户行",<br/>		"gmfzh": "购买方账号",<br/>		"gmfjbr": "购买方经办人",<br/>		"jbrsfzjhm": "经办人身份证件号码",<br/>		"gmfjbrlxdh": "购买方经办人联系电话",<br/>		"hjje": "合计金额",<br/>		"hjse": "合计税额",<br/>		"jshj": "价税合计",<br/>		"jshjdx": "价税合计（大写）",<br/>		"skyhmc": "收款银行名称",<br/>		"skyhzh": "收款银行账号",<br/>		"jsfs": "结算方式",<br/>		"kpr": "开票人",<br/>		"kprzjhm": "开票人证件号码",<br/>		"kprzjlx": "开票人证件类型",<br/>		"dylzfphm": "开具红字发票对应的蓝字发票号码",<br/>		"hzqrxxdbh": "红字确认信息单编号",<br/>		"hzqrduuid": "红字确认单uuid",<br/>		"bz": "备注",<br/>		"kprq": "开票日期",<br/>		"mxsl": "明细数量",<br/>		"tdyssl": "特定要素数量",<br/>		"gngjbs": "国内国际标识",<br/>		"gpdh": "GP单号",<br/>		"lkxm": "旅客姓名",<br/>		"sfzjlx": "有效身份证件类型",<br/>		"sfzjhm": "有效身份证件号码",<br/>		"qz": "签注",<br/>		"dzkphm": "电子客票号码",<br/>		"yzm": "验证码",<br/>		"xcdtsxx": "行程单提示信息",<br/>		"bxf": "保险费",<br/>		"xswddh": "销售网点代号",<br/>		"tkdw": "填开单位",<br/>		"hdxxList": [<br/>			{<br/>				"hdxh": "航段序号",<br/>				"sfz": "始发站",<br/>				"mdd": "目的站",<br/>				"hd": "航段",<br/>				"cyr": "承运人",<br/>				"hbh": "航班号",<br/>				"zwdj": "座位等级",<br/>				"cyrq": "承运日期",<br/>				"qfsj": "起飞时间",<br/>				"kpjblb": "客票级别/客票类别",<br/>				"kpsxrq": "客票生效日期",<br/>				"yxjzrq": "有效截止日期",<br/>				"mfxle": "免费行李额"<br/>			}<br/>		],<br/>		"fpmxList": [<br/>			{<br/>				"mxxh": "明细序号",<br/>				"dylzfpmxxh": "对应蓝字发票明细序号",<br/>				"xmmc": "项目名称",<br/>				"ggxh": "规格型号",<br/>				"sl": "数量",<br/>				"dj": "单价",<br/>				"dw": "单位",<br/>				"je": "金额（不含税）",<br/>				"slv": "增值税税率/征收率",<br/>				"se": "税额",<br/>				"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>				"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>				"spfwjc": "商品服务简称",<br/>				"yhzcbs": "优惠政策标识"<br/>			}<br/>		]<br/>	}<br/>] |
| --- |


生产报文示例

| [<br/>	{   <br/>		"fphm": "24448*********068900",<br/>		"lzfpbz": "0",<br/>		"ptbh": "5d2cff**********b7a3",<br/>       "ip": "***.***.***.**",<br/>       "macdz": "SDFSDF2WQ3424SWER",<br/>       "cpuid": "WERWER234234234",<br/>       "zbxlh": "WEREWR3243242",<br/>		"fppz": "06",<br/>		"tdys": "22",<br/>		"fpkjfsDm": "1",<br/>		"cezslxDm": "",<br/>		"xsfnsrsbh": "9144**********093N",<br/>		"xsfmc": "广州********设计室",<br/>       "xsfdz": "高新技******厂房",<br/>       "xsfdh": "11039332888",<br/>       "xsfkhh": "建设银行*****支行",<br/>       "xsfzh": "811070********00501",<br/>		"gmfnsrsbh": "914404******R9AM46",<br/>		"gmfmc": "珠海市******有限公司",<br/>       "gmfzrrbz":"",<br/>		"gmfdz": "自治区xxx号小区",<br/>       "gmfdh": "1239******321",<br/>       "gmfkhh": "中信银行",<br/>       "gmfzh": "811070**********502",<br/>	 	"gmfjbr": "陈**",<br/>		"jbrsfzjhm": "340822********6225",<br/>		"gmfjbrlxdh": "155****0791",	<br/>		"hjje": "7889.91",<br/>		"hjse": "710.09",<br/>		"jshj": "8600.00",<br/>		"jshjdx": "贰佰零陆元",<br/>		"skyhmc": "中信银行*******支行",<br/>		"skyhzh": "811070**********502",<br/>		"jsfs": "99",<br/>		"kpr": "牛**",<br/>		"kprzjhm": "4105**********8510",<br/>		"kprzjlx": "201",<br/>		"dylzfphm": "",<br/>		"hzqrxxdbh": "",<br/>		"hzqrduuid": "",<br/>		"bz": "开具航空运输电子客票行程单",	<br/>		"kprq": "2024-11-28 12:00:00",<br/>		"mxsl": "1",<br/>		"tdyssl": "1",<br/>		"gngjbs": "D",<br/>		"gpdh": "GP20240700********0001",<br/>		"lkxm": "陈**",<br/>		"sfzjlx": "201",<br/>		"sfzjhm": "340822********6225",<br/>		"qz": "按川航客规和产品规定执行",<br/>		"dzkphm": "87********241",<br/>		"yzm": "2946",<br/>		"xcdtsxx": "3U8886T2乘机",<br/>		"bxf": "",<br/>		"xswddh": "四川航空股份有限公司（机场自助售票处）",<br/>		"tkdw": "DW",<br/>       "fpmxList": [<br/>            {<br/>                "mxxh": "1",<br/>                "dylzfpmxxh": "",<br/>                "xmmc": "票价",<br/>                "hwhyslwfwmc": "*运输服务*票价",<br/>                "spfwjc": "运输服务",<br/>                "ggxh": "ATE-3",<br/>                "dw": "位",<br/>                "sl": "1.00",<br/>                "dj": "5000.00",<br/>                "je": "5000.00",<br/>                "slv": "0.09",<br/>                "se": "450.00",<br/>                "sphfwssflhbbm": "3010301010100000000",<br/>                "yhzcbs": ""<br/>            },<br/> {<br/>                "mxxh": "2",<br/>                "dylzfpmxxh": "",<br/>                "xmmc": "燃油附加费",<br/>                "hwhyslwfwmc": "*运输服务*燃油附加费",<br/>                "spfwjc": "运输服务",<br/>                "ggxh": "ATE-3",<br/>                "dw": "位",<br/>                "sl": "1.00",<br/>                "dj": "2889.91",<br/>                "je": "2889.91",<br/>                "slv": "0.09",<br/>                "se": "260.09",<br/>                "sphfwssflhbbm": "3010301010100000000",<br/>                "yhzcbs": ""<br/>            },<br/><br/>            {<br/>                "mxxh": "3",<br/>                "dylzfpmxxh": "",<br/>                "xmmc": "民航发展基金",<br/>                "hwhyslwfwmc": "*运输服务*民航发展基金",<br/>                "spfwjc": "运输服务",<br/>                "ggxh": "ATE-3",<br/>                "dw": "位",<br/>                "sl": "1.00",<br/>                "dj": "0.00",<br/>                "je": "0.00",<br/>                "slv": "0.00",<br/>                "se": "0.00",<br/>                "sphfwssflhbbm": "6130000000000000000",<br/>                "yhzcbs": "04"<br/>            }<br/>        ],<br/>        "hdxxList": [<br/>            {<br/>                "hdxh": "1",<br/>                "sfz": "北京-首都T1",<br/>                "mdd": "成都-双流",<br/>                "hd": "1",<br/>                "cyr": "陈**",<br/>                "hbh": "3U8886",<br/>                "zwdj": "Q",<br/>                "cyrq": "2024-11-08",<br/>                "qfsj": "12:00",<br/>                "kpjblb": "YTD4N",<br/>                "kpsxrq": "2024-11-08",<br/>                "yxjzrq": "2024-11-08",<br/>                "mfxle": "20KG"<br/>            }	<br/>        ]<br/>    }<br/>] |
| --- |


#### 4.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | sllsh | 受理流水号 | String | 40 | 是 |  |


#### 4.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"sllsh": "受理流水号"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 5.查询电子行程单上传结果
#### 5.1接口说明
给企业提供查询电子行程单发票开具状态的功能，预发票上传后由税务局端对发票再次进行校验，如果校验通过则表明发票开具成功。此时企业根据上传返回的信息查询发票开具的状态。

发票上传结果只能在发票上传后12小时内查询，如果超过12小时只能重新上传发票再获取上传结果。

#### 5.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 5.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1.  | sllsh | 受理流水号 | String | 40 | 是 |  |


#### 5.4请求报文示例
| {<br/> "sllsh": "受理流水号"<br/>} |
| --- |


#### 5.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | fphm | 发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | status | 上传状态 | varchar | 2 | 是 | 00 上传成功<br/>01：发票上传处理中<br/>02：上传失败<br/>03：重复上传 |
| <font style="color:rgb(0, 0, 0);">5</font> | message | 详细信息 | varchar | 30 | 否 |   详细信息 |
| <font style="color:rgb(0, 0, 0);">6</font> | Code | 错误码 | varchar | 20 | 否 | 未查询到上传结果会返回固定的Code值 |


#### 5.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>          "resultList": [<br/>                {<br/>                    "fphm": "发票号码1",<br/>                    "status": "上传状态",<br/>                    "message": "详细信息"<br/>                },<br/>           		 {<br/>                    "fphm": "发票号码2",<br/>                    "status": "上传状态",<br/>                    "message": "详细信息"<br/>               		 }<br/>]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 6.电子行程单红字确认单申请
#### 6.1接口说明
给企业提供电子行程单红字确认单开具功能。

#### 6.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 6.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | lrfsf | 录入方身份 | varchar | 2 | 是 | 0：销方 |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfmc | 销售方名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | gmfnsrsbh | 购买方纳税人识别号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | gmfmc | 购买方名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfphm | 蓝字发票号码 | String | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | lzkprq | 蓝字发票开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">8</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 是 | 06：电子行程单 |
| <font style="color:rgb(0, 0, 0);">11</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 22：电子行程单 |
| <font style="color:rgb(0, 0, 0);">12</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>03：服务中止<br/>04：销售折让 |
| <font style="color:rgb(0, 0, 0);">15</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">16</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | ggxh | 规格型号 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | dw | 单位 | varchar | 300 | 否 | 必须与蓝票“单位”保持一致。 |
| <font style="color:rgb(0, 0, 0);">20</font> | sl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">21</font> | dj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">22</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | se | 税额 | number | 18，2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">26</font> | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">27</font> | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |




#### 6.4请求报文示例
| {<br/>	"lrfsf": "录入方身份",<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfmc": "销售方名称",<br/>	"gmfnsrsbh": "购买方纳税人识别号",<br/>	"gmfmc": "购买方名称",<br/>	"lzfphm": "蓝字发票号码",<br/>	"lzkprq": "蓝字发票开票日期",<br/>	"lzhjje": "蓝字发票合计金额",<br/>	"lzhjse": "蓝字发票合计税额",<br/>	"lzfppzDm": "蓝字发票票种代码",<br/>	"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>	"hzcxje": "红字冲销金额",<br/>	"hzcxse": "红字冲销税额",<br/>	"chyyDm": "红字发票冲红原因代码",<br/>	"hzqrdmxList": [<br/>		{<br/>			"mxxh": "明细序号",<br/>			"dylzfpmxxh": "对应蓝字发票明细序号",<br/>			"xmmc": "项目名称",<br/>			"ggxh": "规格型号",<br/>          "dw": "单位",<br/>			"sl": "数量",<br/>			"dj": "单价",<br/>			"je": "金额（不含税）",<br/>			"slv": "增值税税率/征收率",<br/>			"se": "税额",<br/>			"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>			"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>			"spfwjc": "商品服务简称"<br/>		}<br/>	]<br/>} |
| --- |


生产报文示例

| {<br/>    "lrfsf": "1",<br/>    "xsfnsrsbh": "911502********NK5H",<br/>    "xsfmc": "包头市********有限责任公司",<br/>    "gmfnsrsbh": "914401********093N",<br/>    "gmfmc": "广州市********设计室",<br/>    "lzfpdm": "",<br/>    "lzfphm": "25447000********6677",<br/>    "sfzzfpbz": "N",<br/>    "lzkprq": "2025-06-23 12:00:00",<br/>    "lzhjje": "100.00",<br/>    "lzhjse": "0.00",<br/>    "lzfppzDm": "01",<br/>    "lzfpTdyslxDm": "17",<br/>    "hzcxje": "-100.00",<br/>    "hzcxse": "-0.00",<br/>    "chyyDm": "01",<br/>    "hzqrdmxList": [<br/>        {<br/>            "lzmxxh": "1",<br/>            "xh": "1",<br/>            "sphfwssflhbbm": "1100101010600000000",<br/>            "hwhyslwfwmc": "*太阳能发电*太阳能发电",<br/>            "spfwjc": "太阳能发电",<br/>            "xmmc": "太阳能发电",<br/>            "ggxh": "",<br/>            "dw": "架",<br/>            "fpspdj": "10.00",<br/>            "fpspsl": "-10",<br/>            "je": "-100.00",<br/>            "sl1": "0.00",<br/>            "se": "-0.00"<br/>        }<br/>    ]<br/>} |
| --- |


#### 6.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | hzfpxxqrdbh | 红字确认单编号 | String | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | uuid | 红字确认单UUID | String | 32 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | hzqrxxztDm | 红字确认单状态 | String | 2 | 否 | 01：无需确认<br/>02：销方录入待购方确认 |


#### 6.6返回报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzfpxxqrdbh": "红字确认单编号",<br/>			"uuid": "红字确认单UUID",<br/>			"hzqrxxztDm": "红字确认单状态"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 7.发票用途状态信息查询
#### 7.1接口说明
企业业务系统通过此接口查询单张发票状态、红字开具确认状态、发票用途等信息。此接口用途为辅助乐企开票企业发起红字确认单申请时的业务校验，实际以生成红字确认单时的业务校验结果为准。

发票用途状态信息查询结果仅供企业参考，在综服平台进行发票勾选的企业，其查询到的发票状态可能存在延时问题。

#### 7.2请求方式
请求方式为POST

path 指该参数为路径参数

query 指该参数需在请求URL传参

body 指该参数需在请求JSON传参

#### 7.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | fplx | 发票类型 | String | 2 | 是 | 01：增值税专用发票<br/>02：货物运输业增值税专用发票<br/>03：机动车销售统一发票<br/>04：增值税普通发票<br/>08：增值税电子专用发票<br/>10：增值税电子普通发票<br/>11：卷式发票<br/>14：通行费发票<br/>15：二手车销售统一发票<br/>81：电子发票（增值税专用发票）<br/>82：电子发票（普通发票）<br/>85：纸质发票（增值税专用发票）<br/>86：纸质发票（普通发票）<br/>51：电子发票（铁路电子客票）<br/>61：电子发票（航空运输客票电子行程单）<br/>83：机动车销售电子统一发票<br/>84：二手车销售电子统一发票<br/>87：纸质发票（机动车销售统一发票）<br/>88：纸质发票（二手车销售统一发票） |
| 2 | fpdm | 发票代码 | String | 12 | 否 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票代码，其他发票类型无需传入 |
| 3 | fphm | 发票号码 | String | 20 | 是 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票号码<br/>发票类型为：51、61、81、82、83、84、85、86、87、88传20位数字化电子发票号码 |
| 4 | kprq | 开票日期 | String | 8 | 是 | YYYYMMDD |


#### 7.4请求报文示例
| {<br/>	"fplx": "发票类型",<br/>	"fpdm": "发票代码",<br/>	"fphm": "发票号码",<br/>	"kprq": "开票日期"<br/>} |
| --- |


#### 7.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照“六、附件：1.返回码代码表” |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | fpdm | 发票代码 | String | 12 | 是 | <font style="color:#000000;">数字化电子发票发票代码可为空</font> |
| 4 | fphm | 发票号码 | String | 20 | 是 | <font style="color:#000000;">数字化电子发票，发票号码20位</font> |
| 5 | kprq | 开票日期 | String | 19 | 是 | YYYY-MM-DD HH:mm:ss |
| 6 | fpzt | 发票状态 | String | 1 | 否 | 0：正常<br/>2：作废<br/>3：已红冲<br/>7：部分红冲<br/>8：全额冲红 |
| 7 | ycpzzt | 异常凭证状态 | String | 1 | 否 | 01：正常<br/>02：异常凭证<br/>03：疑似异常凭证 |
| 8 | hzsdbs | 红字锁定标识 | String | 1 | 否 | Y：锁定<br/>N：未锁定 |
| 9 | fpyt | 发票用途 | String | 2 | 否 | 0：未使用<br/>1：已申请抵扣<br/>2：已申请退税<br/>3：已申请代办退税<br/>4：已勾选不抵扣（历史数据）<br/>5：已申请代办退税（历史数据）<br/>6：已申请不抵扣<br/>7：内销转出口<br/>8：出口转内销<br/>9：准予退税<br/>10：不予退税<br/>11：冬奥退税 |
| 10 | rzzt | 入账状态 | String | 2 | 否 | 01：未入账<br/>02：已入账<br/>03：已入账撤销 |
| 11 | cpyycbs | 成品油异常标识 | String | 1 | 否 | 9：正常<br/>1：成品油单价异常<br/>2：成品油超库存异常<br/>8：正常，需全额红冲 |
| 12 | cktsldm | 出口退税类代码 | String | 2 | 否 | 01：增值税专用发票可用于代办退税标签（仅用于代办退税） |
| 13 | zzsyhyt | 增值税优惠用途（农产品加计扣除） | String | 2 | 否 | 0：未使用 <br/>1：全部项目加计 <br/>2：全部项目不加计 <br/>3：部分项目加计 |
| 14 | xfsyt | 消费税用途 | String | 2 | 否 | 00：未勾选库存<br/>01：已勾选库存 |
| 15 | jdcycbs | 机动车异常标识 | String | 1 | 否 | 0：无风险<br/>1：低风险<br/>2：中风险<br/>3：高风险 |
| 16 | skssq | 税款所属期 | String | 6 | 否 | 返回格式：yyyymm |


#### 7.6返回报文示例
| {<br/>	"Response": {<br/>		"RequestId": "系统自动生成ID",<br/>		"Data": {<br/>			"returncode": "返回码",<br/>			"returnmsg": "返回信息",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"kprq": "开票日期",<br/>			"fpzt": "发票状态",<br/>			"ycpzzt": "异常凭证状态",<br/>			"hzsdbs": "红字锁定标识",<br/>			"fpyt": "发票用途",<br/>			"rzzt": "入账状态",<br/>			"cpyycbs": "成品油异常标识",<br/>			"cktsldm": "出口退税类代码",<br/>			"zzsyhyt": "增值税优惠用途（农产品加计扣除）",<br/>			"xfsyt": "消费税用途",<br/>			"jdcycbs": "机动车异常标识",<br/>			"skssq": "税款所属期"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error": {<br/>			"Code": "01",<br/>			"Message": "错误说明"<br/>		}<br/>	}<br/>} |
| --- |


### 8.查询电子行程单红字确认单列表信息
#### 8.1接口说明
向企业提供查询电子行程单红字确认单列表信息的功能，企业可通过购买方纳税人识别号、销售方纳税人识别号、蓝字发票号码、录入日期起、录入日期止等条件查询电子行程单红字确认单列表信息，并将查询的结果保存在本地。使用此信息可以在申请电子行程单红字确认单时校验蓝字电子行程单是否可以红冲；在开具红字电子行程单时校验是否有电子行程单红字确认单。

#### 8.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 8.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | yhjslx | 用户角色类型 | varchar | 2 | 是 | 0：销方 |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为销方，必录 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfmc | （销售方）名称 | varchar | 300 | 否 | 条件必录，作为销方，必录 |
| <font style="color:rgb(0, 0, 0);">4</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为购方，必录 |
| <font style="color:rgb(0, 0, 0);">5</font> | gmfmc | （购买方）名称 | varchar | 300 | 否 | 条件必录，作为购方，必录 |
| <font style="color:rgb(0, 0, 0);">6</font> | lrfsf | 录入方身份 | varchar | 2 | 否 | 0：销方 |
| <font style="color:rgb(0, 0, 0);">7</font> | lrrqq | 录入日期起 | date | 20 | 否 | yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">8</font> | lrrqz | 录入日期止 | date | 20 | 否 | yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">9</font> | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 否 | 01：无需确认<br/>02：销方录入待购方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| <font style="color:rgb(0, 0, 0);">11</font> | fppzDm | 发票票种代码 | varchar | 2 | 否 | 01: 增值税专用发票<br/>02: 普通发票<br/>03: 机动车统一销售发票<br/>04: 二手车统一销售发票<br/>05：铁路客票电子发票<br/>06：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">12</font> | pageNumber | 页码 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | pageSize | 每页数量 | number | 10 | 否 |  |


#### 8.4请求报文示例
| {<br/>	"yhjslx": "用户角色类型",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"xsfmc": "（销售方）名称",<br/>	"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"gmfmc": "（购买方）名称",<br/>	"lrfsf": "录入方身份",<br/>	"lrrqq": "录入日期起",<br/>	"lrrqz": "录入日期止",<br/>	"lzfphm": "蓝字发票号码",<br/>	"hzqrxxztDm": "红字确认信息状态代码",<br/>	"fppzDm": "发票票种代码",<br/>	"pageNumber": "页码",<br/>	"pageSize": "每页数量"<br/>} |
| --- |


生产报文示例

| {<br/>    "yhjslx": "0",<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfmc": "广州********设计室",<br/>    "gmfnsrsbh": "9115**********NK5H",<br/>    "gmfmc": "包头市******有限责任公司",<br/>    "lrfsf": "0",<br/>    "lrrqq": "2025-05-01",<br/>    "lrrqz": "2025-05-30",<br/>    "lzfpdm": "",<br/>    "lzfphm": "254470********220447",<br/>    "hzfpxxqrdbh": "4401052********01218",<br/>    "hzqrxxztDm": "01",<br/>    "fppzDm": "06",<br/>    "pageNumber": "1",<br/>    "pageSize": "10"<br/>} |
| --- |


#### 8.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | --- | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | total | 总数量 | varchar | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | lrfsf | 录入方身份 | varchar | 2 | 是 | 0：销方1：购方 |
| <font style="color:rgb(0, 0, 0);">7</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | lzkprq | 蓝字发票开票日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">13</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 否 | 06：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">16</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 22：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">17</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | hzcxse | 红字冲销税额 | number | 18,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | hzqrdmxsl | 红字确认单明细数量 | number | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：无需确认<br/>02：销方录入待购方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| <font style="color:rgb(0, 0, 0);">21</font> | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 是 | 01：无需确认 |
| <font style="color:rgb(0, 0, 0);">22</font> | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| <font style="color:rgb(0, 0, 0);">23</font> | hzfphm | 红字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">25</font> | yxbz | 有效标志 | varchar | 1 | 是 | Y：有效<br/>N：无效 |
| <font style="color:rgb(0, 0, 0);">26</font> | lrrq | 录入日期 | datetime |  | 是 | yyyy-MM-dd HH:mm:ss |


#### 8.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzqrxxList": {<br/>				"pageNumber": 1,<br/>				"pageSize": 20,<br/>				"total": 1,<br/>				"list": [<br/>					{<br/>						"uuid": "红字确认单UUID",<br/>						"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>						"lrfsf": "录入方身份",<br/>						"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"xsfmc": "（销售方）名称",<br/>						"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"gmfmc": "（购买方）名称",<br/>						"lzfphm": "蓝字发票发票号码",<br/>						"lzkprq": "蓝字发票开票日期",<br/>						"lzhjje": "蓝字发票合计金额",<br/>						"lzhjse": "蓝字发票合计税额",<br/>						"lzfppzDm": "蓝字发票发票票种代码",<br/>						"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>						"hzcxje": "红字冲销金额",<br/>						"hzcxse": "红字冲销税额",<br/>"hzqrdmxsl": "红字确认单明细数量",<br/>						"chyyDm": "红字发票冲红原因代码",<br/>						"hzqrxxztDm": "红字确认信息状态代码",<br/>						"ykjhzfpbz": "已开具红字发票标志",<br/>						"hzfphm": "红字发票号码",<br/>						"hzkprq": "红字开票日期",<br/>						"yxbz": "有效标志",<br/>						"lrrq": "录入日期"<br/>					}<br/>				]<br/>			}<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 9.查询电子行程单红字确认单明细信息
#### 9.1接口说明
向企业提供电子行程单红字确认单明细查询的功能，企业可通过红字确认单UUID、销售方纳税人识别号查询电子行程单红字确认单明细信息，并将查询的结果保存在本地。使用此信息可以在申请电子行程单红字确认单时校验蓝票是否可以红冲；在开具红字电子行程单时校验是否和电子行程单红字确认单明细一致。

#### 9.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 9.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | --- | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |


#### 9.4请求报文示例
| 	{<br/>	"uuid": "红字确认单UUID ",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码"<br/>} |
| --- |


#### 9.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | lrfsf | 录入方身份 | varchar | 1 | 是 | 0：销方<br/>1：购方 |
| <font style="color:rgb(0, 0, 0);">6</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | lzfphm | 蓝字发票发票号码 | number | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | lzkprq | 蓝字发票开票日期 | datetime | 10 | 否 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">12</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | lzfppzDm | 蓝字发票发票票种代码 | varchar | 2 | 否 | 06：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">15</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 22：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">16</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>03：服务中止<br/>04：销售折让 |
| <font style="color:rgb(0, 0, 0);">19</font> | hzqrxxztDm | 红字确认单状态 | varchar | 2 | 是 | 01：无需确认<br/>02：销方录入待购方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| <font style="color:rgb(0, 0, 0);">20</font> | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| <font style="color:rgb(0, 0, 0);">21</font> | hzfphm | 红字发票号码 | String | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">23</font> | yxbz | 有效标志 | varchar | 1 | 是 | Y：有效<br/>N：无效 |
| <font style="color:rgb(0, 0, 0);">24</font> | cezslxDm | 差额征税类型代码 | varchar | 2 | 否 | 空：非差额发票<br/>01：全额开票<br/>02：差额开票 |
| <font style="color:rgb(0, 0, 0);">25</font> | lrrq | 录入日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">26</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">27</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">28</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">29</font> | ggxh | 规格型号 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | dw | 单位 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">31</font> | sl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">32</font> | dj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">33</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">34</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">35</font> | se | 税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">36</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">37</font> | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">38</font> | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |
| <font style="color:rgb(0, 0, 0);">39</font> | kce | 扣除额 | number | 18,2 | 否 | 蓝票扣除额的负数 |
| <font style="color:rgb(0, 0, 0);">40</font> | yhzcbs | 优惠政策标识 | varchar | 2 | 否<br/> |  |


#### 9.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"uuid": "红字确认单UUID",<br/>			"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>			"lrfsf": "录入方身份",<br/>			"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"xsfmc": "销售方名称",<br/>			"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"gmfmc": "购买方名称",<br/>			"lzfphm": "蓝字发票发票号码",<br/>			"lzkprq": "蓝字发票开票日期",<br/>			"lzhjje": "蓝字发票合计金额",<br/>			"lzhjse": "蓝字发票合计税额",<br/>			"lzfppzDm": "蓝字发票发票票种代码",<br/>			"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>			"hzcxje": "红字冲销金额",<br/>			"hzcxse": "红字冲销税额",<br/>			"chyyDm": "红字发票冲红原因代码",<br/>			"hzqrxxztDm": "红字确认信息状态代码",<br/>			"ykjhzfpbz": "已开具红字发票标志",<br/>			"hzfphm": "红字发票号码",<br/>			"hzkprq": "红字开票日期",<br/>			"yxbz": "有效标志",<br/>			"cezslxDm": "差额征税类型代码",<br/>			"lrrq": "录入日期",<br/>			"hzqrxxmxList": [<br/>				{<br/>					"mxxh": "明细序号",<br/>					"dylzfpmxxh": "对应蓝字发票明细序号",<br/>					"xmmc": "项目名称",<br/>                 "ggxh": "规格型号",<br/>                 "dw": "单位",<br/>					"sl": "数量",<br/>					"dj": "单价",<br/>					"je": "金额（不含税）",<br/>					"slv": "增值税税率/征收率",<br/>					"se": "税额",<br/>					"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>					"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>					"spfwjc": "商品服务简称",<br/>					"kce": "扣除额",<br/>					"yhzcbs": "优惠政策标识"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 10.电子行程单红字确认单确认
#### 10.1接口说明
给企业提供红字确认单确认接口，进行红字确认单撤销操作。

#### 10.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 10.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | hzqrdbh | 红字确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | qrlx | 确认类型 | varchar | 1 | 是 | Y：同意<br/>N：不同意<br/>C：撤销 |


#### 10.4请求报文示例
| {<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"uuid": "红字确认单UUID ",<br/>	"hzqrdbh": "红字确认单编号 ",<br/>	"qrlx": "确认类型"<br/>} |
| --- |


#### 10.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | qrrq | 确认日期 | datetime | | 否 | 格式：<br/>yyyy-MM-dd HH:mm:ss |


#### 10.6返回报文示例 
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>		  "returncode": "00",<br/>		  "returnmsg": "成功",<br/>		  "qrrq ": "确认日期"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 11.上传发票汇总确认信息
#### 11.1接口说明
给企业提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和税额进行上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。

若企业在每月13日零点前未上传上个月的发票汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票。

当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

#### 11.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 11.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | ywlx | 业务类型 | varchar | 1 | 是 | 0：确认<br/>1：取消 |
| <font style="color:rgb(0, 0, 0);">4</font> | ptbh | 平台编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | yf | 月份 | varchar | 7 | 是 | 格式：yyyy-MM |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfpsl | 蓝字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">7</font> | lzfpje | 蓝字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">8</font> | lzfpse | 蓝字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">9</font> | hzfpsl | 红字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">10</font> | hzfpje | 红字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">11</font> | hzfpse | 红字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |




#### 11.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ywlx": "业务类型",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份",<br/>	"lzfpsl": "蓝字发票数量",<br/>	"lzfpje": "蓝字发票金额",<br/>	"lzfpse": "蓝字发票税额",<br/>	"hzfpsl": "红字发票数量",<br/>	"hzfpje": "红字发票金额",<br/>	"hzfpse": "红字发票税额"<br/>} |
| --- |


生产报文示例

| {<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfsjswjgdm": "14400020000",<br/>    "ywlx": "0",<br/>    "ptbh": "5d2cff**********b7a3",<br/>    "yf": "2025-05",<br/>    "lzfpsl": "1300",<br/>    "lzfpje": 15518088765.27,<br/>    "lzfpse": 1687911.48,<br/>    "hzfpsl": 257,<br/>    "hzfpje": -9770623.50,<br/>    "hzfpse": -1043355.60<br/>} |
| --- |


#### 11.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |


#### 11.6返回报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 12. 查询发票汇总确认信息
#### 12.1接口说明
给企业提供发票汇总确认信息查询功能，企业可以通过此接口查询历史发票汇总确认信息。

#### 12.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 12.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | ptbh | 平台编号 | varchar | 20 | 否 | 若为空，则查询纳税人在所有平台的开票汇总信息 |
| <font style="color:rgb(0, 0, 0);">4</font> | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM若为空，则查询所有历史月份数据 |




#### 12.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份"<br/>} |
| --- |


#### 12.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| :---: | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是<br/> |  |
| 发票汇总确认信息（多条记录时，循环以下节点） | | | | | | |
| <font style="color:rgb(0, 0, 0);">4</font> | ptbh | 平台编号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfpsl | 蓝字发票数量 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | lzfpje | 蓝字发票金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | lzfpse | 蓝字发票税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | hzfpsl | 红字发票数量 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | hzfpje | 红字发票金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | hzfpse | 红字发票税额 | number | 18,2 | 否 |  |


#### 12.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"xsfnsrsbh": "销售方纳税人识别号",<br/>			"fphzqrxxList": [<br/>				{	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额"<br/>				}, {	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |




# 六、附件
无



