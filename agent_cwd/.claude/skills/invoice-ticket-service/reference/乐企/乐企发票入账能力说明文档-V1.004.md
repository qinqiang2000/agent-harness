乐企发票入账

能力说明文档V1.004



































修改说明

| 版本 | 章节编号 | 修订内容简述 | 生效日期 |
| --- | --- | --- | --- |
| V1.000 | 第五章 | 新增“4查询增值税代扣代缴完税凭证入账处理结果”接口增加“被扣缴纳税人识别号”字段。 | 2022.11.4 |
| | 全部 | 创建时间 | 2023.1.5 |
| V1.001 | 第四、五章 | 将“全电发票”“新电票”改为“数字化电子发票”。 | 2023.01.10 |
| V1.002 | 第四、五章 | 第四章1.2.1.1判断逻辑发票类型和第五章1.批量上传入账发票接口“发票类型”字段增加“51：电子发票（铁路电子客票）”。 | 2023.03.03 |
| V1.003 | 第四、五章 | 第四章1.2.2、2.2.1、3.2.1校验发票入账属期增加发票入账属期描述及修改判断逻辑描述。<br/>第五章1.3、3.3、5.3“入账属期”字段必须调整为“否”，说明调整为“格式为：YYYYMM。当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。” | 2023.04.17 |
| V1.004 | 第四、五章 | 第四章1.2.4.1调整发票状态判断逻辑。<br/>第四章1.2增加1.2.6校验成品油发票异常标识。<br/>第五章2.5返回参数增加成品油异常标识字段。 | 2023.09.25 |














目  录

一、阅读指引	4

二、能力介绍	4

（一）能力简介	4

（二）应用案例	4

（三）名词解释	4

（四）扩展阅读	5

三、政策指引	5

四、开发指引	5

（一）接口规则	5

（二）开发准备	5

（三）能力流程及规则	5

1.发票入账场景	5

2.代扣代缴完税凭证入账场景	14

3.海关缴款书入账场景	20

五、接口技术说明	26

（一）能力编码	26

（二）接口清单	26

1.批量上传入账发票	27

2.查询发票入账处理结果	30

3.批量上传增值税入账代扣代缴完税凭证	33

4.查询增值税代扣代缴完税凭证入账处理结果	36

5.批量上传入账海关缴款书	38

6.查询海关缴款书入账处理结果	41

六、附件	43

（一）返回码代码表	43

<font style="color:#000000;"> </font>



# 一、阅读指引
为满足纳税人多场景、规模化、合规化、自动化的发票入账需求，乐企提供发票入账能力，并通过本能力说明文档明确了发票入账的相关业务规则和数据接口。

本能力适用于有发票入账需求的纳税人订阅。

本能力说明文档分为阅读指引、能力介绍、政策依据、开发指引、接口技术说明、附件六个章节，其中阅读指引、能力介绍、政策依据章节适合纳税人管理人员及财务人员阅读；开发指引、接口技术说明、附件章节适合纳税人技术人员阅读。

# 二、能力介绍
## （一）能力简介
纳税人购进货物、接受服务取得的增值税发票（含海关缴款书），可以通过本能力进行自动化入账。纳税人可将本能力中的各类规则和接口嵌入本单位信息化系统中（如：采购、报销、结算等），实现发票入账流程和商业行为的融合，有效提升发票入账效率。

## （二）应用案例
某公司报销系统将发票入账能力嵌入网上报销系统，公司网上报销系统通过乐企嵌入的增值税发票入账能力规则和接口，完成自动化发票入账。

## （三）名词解释
能力：为企业直连完成某项业务所提供的接口服务和业务规则组合。

规则：实现某项业务目标所遵循的逻辑和校验。

接口：一组定义、程序及协议的集合，通过接口实现计算机软件之间的相互通信。

服务：提供某项业务实现，通过接口服务调用达到业务目标。

API：应用程序编程接口，是一些预先定义的函数，或指软件系统不同组成部分衔接的约定。用来提供应用程序与开发人员基于某软件或硬件得以访问的一组例程，而又无需访问源代码，或理解内部工作机制的细节。

## （四）扩展阅读
无。

# 三、政策指引
《财政部国家档案局关于规范电子会计凭证报销入账归档的通知》（财会〔2020〕6号）

《国家档案局办公室财政部办公厅商务部办公厅国家税务总局办公厅关于带格式的:字体颜色:自动设置进一步扩大增值税电子发票电子化报销、入账、归档试点工作的通知》(档办发〔2021〕1号)

# 四、开发指引
## （一）接口规则
乐企1.5采用HTTP服务调用方式，交换报文格式为JSON格式，利用证书进行加密传输。

## （二）开发准备
企业端需要固定某个IP段，以便进行安全访问控制。

## （三）能力流程及规则
### 1.发票入账场景
#### 1.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114485716-cad273dd-f078-4216-8264-5d0737a3675e.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114486036-cd6b7ee9-879b-4986-8e4a-397afcc818a6.png)

时序图

#### 1.2业务规则
##### 1.2.1校验发票类型
根据入账发票的发票类型，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114486412-b5059bfe-db8f-450c-bf43-fa113358ac89.png)

###### 1.2.1.1判断逻辑
校验入账发票的发票类型，发票类型必须在以下发票类型范围内才允许入账：

01：增值税专用发票

02：货物运输业增值税专用发票

03：机动车销售统一发票

04：增值税普通发票

08：增值税电子专用发票

10：增值税电子普通发票

11：卷式发票

14：通行费发票

15：二手车销售统一发票

81：电子发票（增值税专用发票）

82：电子发票（普通发票）

83：机动车销售电子统一发票

84：二手车销售电子统一发票

85：纸质发票（增值税专用发票）

86：纸质发票（普通发票）

87：纸质发票（机动车销售统一发票）

88：纸质发票（二手车销售统一发票）

61：电子发票（航空运输客票电子行程单）

51：电子发票（铁路电子客票）

##### 1.2.2校验发票入账属期
根据入账发票的入账属期，校验发票是否可以入账。

当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114486703-25f29d42-1213-43c5-adc8-2faaba7ecf70.png)

**1.2.2.1判断逻辑**

校验入账发票的入账属期，如果入账属期晚于当前自然月或早于开票日期所在月，则不允许入账。

##### 1.2.3校验发票开票日期
根据入账发票的开票日期，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114486937-b5cb6fb0-df2a-4361-91fa-5806292c9050.png)

**1.2.3.1判断逻辑**

校验入账发票的开票日期，如果发票的开票日期晚于入账属期，则不允许入账。

##### 1.2.4校验发票状态
根据入账发票的发票状态，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114487240-fcc57522-fcc2-4ba3-bf89-3c13b1d644b4.png)

**1.2.4.1判断逻辑**

校验入账发票的发票状态，如果发票信息中“发票状态”不是“0：正常”或“7：部分红冲”，则不允许入账。

##### 1.2.5校验发票异常凭证状态
根据入账发票的异常凭证状态，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114487868-6eb3fe10-12f7-4438-99bb-2d9eb6a6d228.png)

**1.2.5.1判断逻辑**

校验入账发票的异常凭证状态，如果发票信息中“异常凭证状态”不是“01：正常”，则不允许入账。

##### 1.2.6校验成品油发票异常标识
根据入账发票的成品油异常标识，校验发票是否可用于入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114488452-8ec9571d-4568-4b3d-abf5-916bc1659e40.png)

**1.2.6.1判断逻辑**

校验成品油发票异常标识，如果发票信息中“成品油异常标识”不是“9：正常”，则不允许入账。

##### 1.2.6批量上传入账发票
调用《批量上传入账发票》接口，进行发票入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114488707-5822ce4c-6c30-449e-aa25-dc5e8bb4b66d.png)

**1.2.6.1判断逻辑**

参照《批量上传入账发票》接口规范录入，满足以下任意条件时阻断入账。

● 返回失败，调用《批量上传入账发票》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

● 返回成功，“上传状态”不是“00（成功）”。

##### 1.2.7查询批量上传入账发票处理结果
调用《查询发票入账处理结果》接口，查询入账反馈结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114488944-d393df5a-eeba-415e-aabf-32013448f907.png)

**1.2.7.1判断逻辑**

参照《查询发票入账处理结果》接口规范录入批次流水号查询对应发票入账处理结果，满足以下任意条件时阻断查询发票入账处理结果。

● 返回失败，调用《查询发票入账处理结果》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

### 2.代扣代缴完税凭证入账场景
#### 2.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114489403-44ccc56c-972c-4643-91dc-b2fedf807bed.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114489661-0a888ff4-aa5d-4781-bbc0-5edf4f292319.png)

时序图

#### 2.2业务规则
##### 2.2.1校验入账属期
根据入账代扣代缴完税凭证的入账属期，校验是否可以入账。

当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。



![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114489922-4a4c277b-6558-4287-9afc-7e898f75a0dc.png)

**2.2.1.1判断逻辑**

校验入账代扣代缴完税凭证的入账属期，如果入账属期晚于当前自然月或早于开票日期所在月，则不允许入账。

##### 2.2.2校验代扣代缴完税凭证填发日期
根据入账代扣代缴完税凭证的填发日期，校验是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114490174-491ecdb8-3770-4892-9849-75a56fe4b6ca.png)

**2.2.2.1判断逻辑**

校验入账代扣代缴完税凭证的填发日期，如果代扣代缴完税凭证的填发日期晚于入账属期，则不允许入账。

##### 2.2.3校验代扣代缴完税凭证异常凭证状态
根据入账发票的异常凭证状态，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114490568-dbf187a3-35d5-4ca3-b648-89eb7935a8c9.png)

**2.2.3.1判断逻辑**

校验入账代扣代缴完税凭证的异常凭证状态，如果代扣代缴完税凭证信息中“异常凭证状态”不是“01：正常”，则不允许入账。

##### 2.2.4批量上传入账代扣代缴完税凭证
调用《批量上传入增值税账代扣代缴完税凭证》接口，进行代扣代缴完税凭证入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114490877-1018323a-daef-4c53-adb5-acbac7610d79.png)

**2.2.4.1判断逻辑**

参照《批量上传入账增值税代扣代缴完税凭证》接口规范录入，满足以下任意条件时阻断入账。

● 返回失败，调用《批量上传入账增值税代扣代缴完税凭证》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

● 返回成功，“上传状态”不是“00（成功）”。

##### 2.2.5查询批量上传入账代扣代缴完税凭证处理结果
调用《查询增值税代扣代缴完税凭证入账处理结果》接口，查询入账反馈结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114491120-d975b460-ef09-47de-a982-ba5edce59564.png)

**2.2.5.1判断逻辑**

参照《查询增值税代扣代缴完税凭证入账处理结果》接口规范录入批次流水号查询对应代扣代缴完税凭证入账处理结果，满足以下任意条件时阻断查询代扣代缴完税凭证入账处理结果。

● 返回失败，调用《查询增值税代扣代缴完税凭证入账勾选处理结果》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

### 3.海关缴款书入账场景
#### 3.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114491417-9b0ad864-d1cd-4d61-85f1-aaec38ea99cb.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114491714-01cd3e6f-1493-41d2-8f31-37455272f972.png)

时序图

#### 3.2业务规则
##### 3.2.1校验入账属期
根据入账海关缴款书的入账属期，校验是否可以入账。

当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。



![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114491967-c2342eb3-2303-4347-8f7a-c13803405124.png)

**3.2.1.1判断逻辑**

校验入账海关缴款书的入账属期，如果入账属期晚于当前自然月或早于开票日期所在月，则不允许入账。

##### 3.2.2校验海关缴款书填发日期
根据入账海关缴款书的填发日期，校验是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114492170-3f44c389-7b5c-41df-83ad-393d18387a18.png)

**3.2.2.1判断逻辑**

校验入账海关缴款书的填发日期，如果海关缴款书的填发日期晚于入账属期，则不允许入账。

##### 3.2.3校验海关缴款书异常凭证状态
根据入账发票的异常凭证状态，校验发票是否可以入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114492394-6a356ed0-456b-4453-a055-13a99f50b8bb.png)

**3.2.3.1判断逻辑**

校验入账海关缴款书的异常凭证状态，如果海关缴款书信息中“异常凭证状态”不是“01：正常”，则不允许入账。

##### 3.2.4批量上传入账海关缴款书
调用《批量上传入账海关缴款书》接口，进行海关缴款书入账。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114492641-b2328743-1c81-4f4d-b578-518fd6d76022.png)

**3.2.4.1判断逻辑**

参照《批量上传入账海关缴款书》接口规范录入，满足以下任意条件时阻断入账。

● 返回失败，调用《批量上传入账海关缴款书》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

● 返回成功，“上传状态”不是“00（成功）”。

##### 3.2.5查询批量上传入账海关缴款书处理结果
调用《查询海关缴款书入账处理结果》接口，查询入账反馈结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114492895-5fa2537e-4c13-4d15-8f95-91fd333112ea.png)

**3.2.5.1判断逻辑**

参照《查询海关缴款书入账处理结果》接口规范录入批次流水号查询对应海关缴款书入账处理结果，满足以下任意条件时阻断查询海关缴款书入账处理结果。

● 返回失败，调用《查询海关缴款书入账勾选处理结果》接口通信失败或者返回报文中“返回码”不是“00（成功）”。

# 五、接口技术说明
## （一）能力编码
| 能力名称 | 乐企发票入账能力 |
| --- | --- |
| 能力编码 | 203057 |




## （二）接口清单
| 序号 | 接口名称 | 服务编码 |
| :---: | :---: | :---: |
| 1 | 批量上传入账发票 | PLSCRZFP |
| 2 | 查询发票入账处理结果 | CXFPRZCLJG |
| 3 | 批量上传增值税入账代扣代缴完税凭证 | PLSCRZDKDJWSPZ |
| 4 | 查询增值税代扣代缴完税凭证入账处理结果 | CXDKDJWSPZRZCLJG |
| 5 | 批量上传入账海关缴款书 | PLSCRZHGJKS |
| 6 | 查询海关缴款书入账处理结果 | CXHGJKSRZCLJG |


### 1.批量上传入账发票
#### 1.1接口说明
企业业务系统通过此接口对批量发票下载的入账发票进行批量上传。

#### 1.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 1.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| 1 | gfsbh | 购买方统一社会信用代码/纳税人识别号 | String | 30 | 是 | |
| 明细数据（fpmx） | | | | | | |
| 2 | kprq | 开票日期 | String | 8 | 是 | YYYYMMDD |
| 3 | fpdm | 发票代码 | String | 12 | 否 | 数字化电子发票代码可为空 |
| 4 | fphm | 发票号码 | String | 20 | 是 | 数字化电子发票，发票号码20位 |
| 5 | skssq | 入账属期 | String | 6 | 否 | 格式为：YYYYMM。当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。 |
| 6 | fplx | 发票类型 | String | 2 | 是 | 01-增值税专用发票<br/>02-货物运输业增值税专用发票<br/>03-机动车销售统一发票<br/>04-增值税普通发票<br/>08-增值税电子专用发票<br/>10-增值税电子普通发票<br/>11-卷式发票<br/>14-通行费发票<br/>15-二手车销售统一发票<br/>81-电子发票（增值税专用发票）<br/>82-电子发票（普通发票）<br/>83-机动车销售电子统一发票<br/>84-二手车销售电子统一发票<br/>85-纸质发票（增值税专用发票）<br/>86-纸质发票（普通发票）<br/>87-纸质发票（机动车销售统一发票）<br/>88-纸质发票（二手车销售统一发票）<br/>61-电子发票（航空运输客票电子行程单）<br/>51-电子发票（铁路电子客票） |
| 7 | sqgxlx | 申请勾选类型 | String | 1 | 是 | 02：入账（企业所得税税前扣除）<br/>03：入账（企业所得税不扣除）<br/>04：入账（个人所得税经营所得税前扣除）<br/>05：入账（个人所得税经营所得不扣除）<br/>06：入账撤销 |


#### 1.4请求报文示例
| {<br/>	"gfsbh": "购买方统一社会信用代码/纳税人识别号",<br/>	"fpmx": [<br/>		{<br/>			"kprq": "开票日期",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"skssq": "入账属期",<br/>			"fplx": "发票类型",<br/>			"sqgxlx": "申请勾选类型"<br/>		}, {<br/>			"kprq": "开票日期",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"skssq": "入账属期",<br/>			"fplx": "发票类型",<br/>			"sqgxlx": "申请勾选类型"<br/>		}<br/>	]<br/>} |
| --- |


#### 1.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>01：失败<br/>批量数据中有一条成功即视为成功 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 1.6返回报文示例
成功返回：

| {<br/>"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>	"returncode": "00",<br/>	"returnmsg": "成功",<br/>	"pclsh": "批次流水号",<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	} |
| --- |


### 2.查询发票入账处理结果
#### 2.1接口说明
企业业务系统完成对入账发票的批量上传后，通过此接口查询入账处理结果。

#### 2.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 2.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 2.4请求报文示例
| {<br/>	"pclsh": "批次流水号",<br/>} |
| --- |


#### 2.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |
| 4 | gfsbh | 购买方统一社会信用代码/纳税人识别号 | String | 30 | 是 | |
| 明细数据(fpmx) | | | | | | |
| 1.  | fplx | 发票类型 | String | 2 | 是 | |
| 1.  | kprq | 开票日期 | String | 8 | 是 | YYYYMMDD |
| 1.  | fpdm | 发票代码 | String | 12 | 否 | |
| 1.  | fphm | 发票号码 | String | 20 | 是 | |
| 1.  | cljg | 处理结果 | String | 1 | 是 | 1入账（撤销）成功<br/>2查无此票<br/>3该票异常无法入账<br/>4重复入账<br/>5其他 |
| 1.  | rzsj | 入账时间 | String | 8 | 否 | 撤销入账时，此字段为空<br/>YYYYMMDD |
| 1.  | fpzt | 发票状态 | String | 2 | 否 | 处理结果为3-该票异常无法入账时，根据实际情况反馈此码值。<br/>0正常<br/>2作废<br/>3已红冲<br/>7已部分冲红<br/>8已全额红冲 |
| 1.  | yrzskssq | 已入账属期 | String | 6 | 否 | 处理结果为4-重复入账时，根据实际情况反馈此码值。<br/>格式YYYYMM |
| 1.  | cpyycbs | 成品油异常标识 | String | 1 | 否 | 处理结果为<br/>3：该票异常无法入账时，根据实际情况反馈此码值<br/>9：正常<br/>1：成品油单价异常<br/>2：成品油超库存异常<br/>8：正常，需全额红冲 |


#### 2.6返回报文示例 
成功返回：

| {<br/> "Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>	"returncode": "00",<br/>	"returnmsg": "成功",<br/>	"pclsh": "批次流水号",<br/>	"gfsbh": "购买方统一社会信用代码/纳税人识别号",<br/>	"fpmx": [<br/>		{<br/>			"fplx": "发票类型",<br/>			"kprq": "开票日期",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"fpzt": "发票状态",<br/>			"yrzskssq": "已入账属期",<br/>			"cpyycbs": "成品油异常标识"<br/>		}, {<br/>			"kprq": "开票日期",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"fpzt": "发票状态",<br/>			"yrzskssq": "已入账属期",<br/>			"cpyycbs": "成品油异常标识"<br/>		}<br/>	]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 3.批量上传增值税入账代扣代缴完税凭证
#### 3.1接口说明
企业业务系统通过此接口对批量代扣代缴完税凭证下载的入账代扣代缴完税凭证进行批量上传。

#### 3.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 3.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | bkjnsrsbh | 被扣缴纳税人识别号 | String | 30 | 是 | |
| 2 | dkdjwspzh | 代扣代缴完税凭证号 | String | 22 | 是 | |
| 3 | kjywrsbh | 扣缴义务人识别号 | String | 30 | 是 | |
| 4 | tfrq | 填发日期 | String | 8 | 是 | YYYYMMDD |
| 5 | skssq | 入账属期 | String | 6 | 否 | 格式为：YYYYMM。当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。 |
| 6 | sqgxlx | 申请勾选类型 | String | 1 | 是 | 02：入账（企业所得税税前扣除）<br/>03：入账（企业所得税不扣除）<br/>04：入账（个人所得税经营所得税前扣除）<br/>05：入账（个人所得税经营所得不扣除）<br/>06：入账撤销 |


#### 3.4请求报文示例
| {<br/>"kjywrsbh": "扣缴义务人识别号",<br/>	"dkdjmx": [<br/>		{<br/>			"dkdjwspzh": "代扣代缴完税凭证号",<br/>			" bkjnsrsbh ": "被扣缴纳税人识别号",<br/>			"tfrq": "填发日期",<br/>			"skssq": "入账属期",<br/>			"sqgxlx": "申请勾选类型"<br/>		}，<br/>{<br/>			"dkdjwspzh": "代扣代缴完税凭证号",<br/>			" bkjnsrsbh ": "被扣缴纳税人识别号",<br/>			"tfrq": "填发日期",<br/>			"skssq": "入账属期",<br/>			"sqgxlx": "申请勾选类型"<br/>		}<br/>	]<br/>} |
| --- |


#### 3.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>01：失败<br/>批量数据中有一条成功即视为成功 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 3.6返回报文示例 
成功返回：

| {<br/>"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"pclsh": "批次流水号",<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 4.查询增值税代扣代缴完税凭证入账处理结果
#### 4.1接口说明
企业业务系统完成对入账代扣代缴完税凭证的批量上传后，通过此接口查询入账处理结果。

#### 4.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 4.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 4.4请求报文示例
| {<br/>	"pclsh": "批次流水号",<br/>} |
| --- |


#### 4.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |
| 4 | kjywrsbh | 扣缴义务人识别号 | String | 30 | 是 | |
| 明细数据(dkdjmx) | | | | | | |
| 5 | tfrq | 填发日期 | String | 8 | 是 | YYYYMMDD |
| 6 | dkdjwspzh | 代扣代缴完税凭证号 | String | 22 | 是 | |
| 7 | bkjnsrsbh | 被扣缴纳税人识别号 | String | 30 | 是 | |
| 8 | cljg | 处理结果 | String | 1 | 是 | 1入账（撤销）成功<br/>2查无此票<br/>3该票异常无法入账<br/>4重复入账<br/>5其他 |
| 9 | rzsj | 入账时间 | String | 8 | 否 | 撤销入账时，此字段为空<br/>YYYYMMDD |
| 10 | yrzskssq | 已入账属期 | String | 6 | 否 | 处理结果为4-重复入账时，根据实际情况反馈此码值。<br/>格式YYYYMM |


#### 4.6返回报文示例 
成功返回：

| {<br/> "Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>	"returncode": "00",<br/>	"returnmsg": "成功",<br/>	"pclsh": "批次流水号",<br/>	"kjywrsbh": "扣缴义务人识别号",<br/>	"dkdjmx": [<br/>		{<br/>			"tfrq": "填发日期",<br/>			"dkdjwspzh": "代扣代缴完税凭证号",<br/>			"bkjnsrsbh": "被扣缴纳税人识别号",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"yrzskssq": "已入账属期"<br/>		}, {<br/>			"tfrq": "填发日期",<br/>			"dkdjwspzh": "代扣代缴完税凭证号",<br/>			"bkjnsrsbh": "被扣缴纳税人识别号",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"yrzskssq": "已入账属期"<br/>		}<br/>	]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 5.批量上传入账海关缴款书
#### 5.1接口说明
企业业务系统通过此接口对批量海关缴款书下载的入账海关缴款书进行批量上传。

#### 5.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 5.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | jkdwrnsrsbh | 缴款单位人纳税人识别号 | String | 20 | 是 | |
| 2 | hgjkshm | 海关缴款书号码 | String | 75 | 是 | |
| 3 | tfrq | 填发日期 | String | 8 | 是 | YYYYMMDD |
| 4 | skssq | 入账属期 | String | 6 | 否 | 格式为：YYYYMM。当“申请勾选类型”为“02”,“03”,“04”,“05”时入账属期必填，“06”无需填写。 |
| 5 | sqgxlx | 申请勾选类型 | String | 1 | 是 | 02：入账（企业所得税税前扣除）<br/>03：入账（企业所得税不扣除）<br/>04：入账（个人所得税经营所得税前扣除）<br/>05：入账（个人所得税经营所得不扣除）<br/>06：入账撤销 |


#### 5.4请求报文示例
| {<br/>	  "jkdwrnsrsbh": "缴款单位人纳税人识别号",<br/>	  "hgjksmx": [<br/>		{<br/>			"hgjkshm": "海关缴款书号码",<br/>			"tfrq": "填发日期",<br/>			"skssq": "入账属期",<br/>			"sqgxlx": "申请勾选类型"<br/>		}，{<br/>			"hgjkshm": "海关缴款书号码",<br/>			"tfrq": "填发日期",<br/>			"skssq": "入账属期",<br/>			"sqgxlx": "申请勾选类型"<br/>		}<br/>	]<br/>} |
| --- |


#### 5.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>01：失败<br/>批量数据中有一条成功即视为成功 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 5.6返回报文示例 
成功返回：

| {<br/>"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"pclsh": "批次流水号",<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 6.查询海关缴款书入账处理结果
#### 6.1接口说明
企业业务系统完成对入账海关缴款书的批量上传后，通过此接口查询入账处理结果。

#### 6.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 6.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | pclsh | 批次流水号 | String | 32 | 是 | |


#### 6.4请求报文示例
| {<br/>	"pclsh": "批次流水号",<br/>} |
| --- |


#### 6.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | pclsh | 批次流水号 | String | 32 | 是 | |
| 4 | jkdwrnsrsbh | 缴款单位人纳税人识别号 | String | 30 | 是 | |
| 明细数据(hgjksmx) | | | | | | |
| 5 | tfrq | 填发日期 | String | 8 | 是 | YYYYMMDD |
| 6 | hgjkshm | 海关缴款书号码 | String | 75 | 是 | |
| 7 | cljg | 处理结果 | String | 1 | 是 | 1入账（撤销）成功<br/>2查无此票<br/>3该票异常无法入账<br/>4重复入账<br/>5其他 |
| 8 | rzsj | 入账时间 | String | 8 | 否 | 撤销入账时，此字段为空<br/>YYYYMMDD |
| 9 | yrzskssq | 已入账属期 | String | 6 | 否 | 处理结果为4-重复入账时，根据实际情况反馈此码值。<br/>格式YYYYMM |


#### 6.6返回报文示例
成功返回：

| {<br/> "Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>	"returncode": "00",<br/>	"returnmsg": "成功",<br/>	"pclsh": "批次流水号",<br/>	"jkdwrnsrsbh": "缴款单位人纳税人识别号",<br/>	"hgjksmx": [<br/>		{<br/>			"tfrq": "填发日期",<br/>			"hgjkshm": "海关缴款书号码",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"yrzskssq": "已入账属期"<br/>		}, {<br/>			"tfrq": "填发日期",<br/>			"hgjkshm": "海关缴款书号码",<br/>			"cljg": "处理结果",<br/>			"rzsj": "入账时间",<br/>			"yrzskssq": "已入账属期"<br/>		}<br/>	]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


# 六、附件
## （一）返回码代码表
| 序号 | 数据项标识 | 数据项名称 | 代码 | 代码名称 | 备注 |
| --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | 00 | 成功 |  |
| 2 | returncode | 返回码 | 01 | 参数校验异常 | 如发票号码数据项为空、开票日期数据项格式不正确等 |
| 3 | returncode | 返回码 | 03 | 拒绝处理 | 如当前企业未授权、当前属期已锁定无法进行抵扣勾选等 |
| 4 | returncode | 返回码 | 04 | 查无数据 | 如当前传入的pclsh不存在 |
| 5 | returncode | 返回码 | 09 | 系统处理异常 | 如获取税款所属期失败 |
| 6 | returncode | 返回码 | 10 | 数据处理中 | 建议间隔3-5分钟再来查询 |
| 7 | returncode | 返回码 | 11 | 当前企业无资格办理此业务 |  |
| 8 | returncode | 返回码 | 99 | 系统级异常 |  |




