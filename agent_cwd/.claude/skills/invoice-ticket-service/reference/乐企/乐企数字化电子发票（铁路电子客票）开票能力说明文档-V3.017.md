乐企数字化电子发票（铁路电子客票）开票能力说明文档V3.017



修改说明

| **版本** | **章节编号** | **修订内容简述** | **生效日期** |
| :--- | :--- | --- | :--- |
|  V1.000 | 全部 |  创建日期 | 2022.12.22 |
| V1.001 | 第五章 | 按照新版文档格式调整接口框架名称 | 2022.12.29 |
| V1.002 | 第五章 | <font style="color:#000000;">铁路电子客票上传接口增加“身份证件类型”字段。</font> | 2023.1.6 |
| | 第五章 | 发票上传接口中“服务器地址”和“mac地址”字段说明增加“需自行需采集开票申请设备”。 | |
| V1.003 | 第四、五章 | 将“全电发票”“新电票”改为“数字化电子发票”。 | 2023.01.10 |
| | 第五章 | 发票上传接口-接口说明中增加“每次上传最大票量为100张数字化电子发票”内容。 | |
| | 第五章 | 发票上传接口中“平台编号”字段说明中增加“接入单位ID”。 | |
| | 第四章和第五章 | 从标题到正文“铁路客票电子发票”改为“铁路电子客票”。 | |
| V1.004 | <font style="color:rgb(0, 0, 0);">全部</font> | <font style="color:#000000;">添加目录与页码</font> | 2023.02.04 |
| V1.005 | <font style="color:rgb(0, 0, 0);">全部</font> | <font style="color:#000000;">“接入单位”修改为“直连单位”。</font> | 2023.02.16 |
| V1.006 | <font style="color:rgb(0, 0, 0);">第四章</font> | <font style="color:#000000;">第四章2.2.4.2增加“平台编号”字段值必须为直连单位ID校验。</font> | 2023.04.19 |
| V2.000 | <font style="color:#000000;">第四章</font> | <font style="color:#000000;">第四章“1.2.2获取可用税收分类编码”增加增值税特殊开票税率实现内容；增加4红字确认单撤销场景。第五章8查询铁路电子客票红字确认单列表信息、9查询铁路电子客票红字确认单明细信息接口返回参数增加“录入日期”字段；增加14铁路电子客票红字确认单确认接口。</font> | 2023.05.27 |
| V3.000 | 第四章 | 增加“开票汇总确认”业务场景 | 2023.05.30 |
| | 第五章 | 增加“上传发票汇总确认信息”和“查询发票汇总确认信息”两个接口 | |
| V3.001 | 第四章 | 3.2.3.1调整“单价”、“数量”的校验逻辑<br/>6调整发票汇总确认时间。 | 2023.07.07 |
| | 第五章 | 6.铁路电子客票红字确认单申请接口，调整“单位”、“单价”、“数量”填写说明<br/>9.查询铁路电子客票红字确认单明细信息接口，调整“单位”、“单价”、“数量”说明<br/>17.上传发票汇总确认信息调整发票汇总确认时间。 | |
| V3.002 | 第四章 | 3.2.3.2数据校验增加红冲税控蓝票填写规则。 | 2023.07.19 |
| | 第四、五章 | 第四章5.2.4.1合规性校验调整对应蓝字发票号码说明；<br/>第五章4.铁路电子客票上传接口修改对应蓝字发票号码说明。 | 2023．07.19 |
| V3.003 | 第四、五章 | 第四章2.2.4.2数据校验增加发票明细条数限制；<br/>第五章5.查询铁路电子客票上传结果增加查询时间限制。 | 2023.08.23 |
| | 第五章 | 2.查询税收分类编码“省级税务机关代码”字段必须调整为否。 | 2023.09.02 |
| V3.004 | 第五章 | 4.铁路电子客票上传的4.4节增加“标识信息区1”“标识信息区2”“提示信息区”三个特定要素字段上传内容 | 2023.09.15 |
| | 第四章 | 2.2.4.2数据校验增加非汇总项编码校验。 | 2023.09.20 |
| V3.005 | 第四章 | 增加Unicode编码使用限制 | 2023.11.02 |
| V3.006 | 第四章 | 2.2.4.2数据校验增加购销方税号校验规则。 | 2023.11.03 |
| V3.007 | 第五章 | 16.查询发票汇总确认信息返回参数增加销售方纳税人识别号 | 2023.11.25 |
| | 第四章 | 第四章2.2.4.2增加开票编码名称校验规则。 | 2023.11.30 |
| V3.008 | 第四、五章 | 第四章2.2.4.2数据校验、5.2.3.2数据校验增加差额征税类型代码填写要求。<br/>第五章9.查询铁路电子客票红字确认单明细信息返回参数增加差额征税类型代码、扣除额、优惠政策标识字段。 | 2023.12.21 |
| | 第四章 | 2.2.4.2数据校验校验删除购销方税号校验规则。 | 2023.12.27 |
| | 第四章 | 2.2.4.2数据校验、5.2.3.2数据校验增加发票上传时间规则说明。 | 2023.12.27 |
| V3.009 | 第四章 | 1.2.2获取可用税收分类编码减按优惠政策标识描述调整。 | 2023.01.26 |
| V3.010 | 第四章 | 1.2.2获取可用税收分类编码调整优惠政策混开规则。 | 2024.03.14 |
| | 第四章 | 2.2.4.1合规性校验、5.2.3.1合规性校验增加联用他用开票员校验规则。 | 2024.03.14 |
| V3.011 | 第四章 | 1.2.2获取可用税收分类编码调整不征税优惠政策混开规则表述。 | 2024.04.09 |
| V3.012 | 第四、五章 | 第四章2.2.4.2增加铁路编码名称校验规则；<br/>第五章4.铁路电子客票上传“业务类型名称”增加“2：改签费”码值。 | 2024.04.15 |
| V3.013 | 第四、五章 | 调整红字确认单申请及确认接口，支持部分红冲，购方确认。 | 2024.07.22 |
| | 第四、五章 | 第四章2.2.4.1、5.2.3.1增加购买方自然人标志，2.2.4.2增加购买方自然人标志相关规则；<br/>第五章4.铁路电子客票上传增加购买方自然人标志。 | 2024.07.26 |
| V3.014 | 第四、五章 | 第四章5.2.3.1调整备注长度；<br/>第五章4.铁路电子客票上传调整备注字段说明。 | 2025.01.24 |
| V3.015 | 第四、五章 | 第四章2.2.3.1、5.2.3.1合规性校验调整发票开具方式代码字段；2.2.3.2、5.2.4.2业务逻辑校验增加发票开具方式代码校验规则。   第五章4.铁路电子客票上传调整发票开具方式代码字段。 | 2025.03.28 |
| V3.016 | 第五章 | 发票上传、红字确认单申请、汇总确认等接口请求报文增加生产报文示例。 | 2025.08.29 |
| V3.017 | 第五章 | 补充“发票用途状态信息查询”接口说明、参数、报文示例。 | 2025.09.26 |


目  录

一、阅读指引	6

二、能力介绍	6

（一）能力简介	6

（二）应用案例	6

（三）名词解释	6

（四）扩展阅读	7

三、政策依据	7

四、开发指引	7

（一）业务场景	7

1.铁路电子客票开具前置	7

2.蓝字铁路电子客票开具	15

3铁路电子客票红字确认单申请	26

4红字确认单确认	34

5红字铁路电子客票开具	36

6开票汇总确认	48

五、 接口技术说明	51

（一）能力编码	51

（二）接口清单	51

（三）接口详情	52

1.查询纳税人基本信息	52

2.查询税收分类编码信息	61

3.查询可用税率信息	67

4.铁路电子客票上传	70

5.查询铁路电子客票上传结果	88

6.铁路电子客票红字确认单申请	92

7.发票用途状态信息查询	100

8.查询铁路电子客票红字确认单列表信息	104

9.查询铁路电子客票红字确认单明细信息	111

10.查询购方纳税人信息	117

11.查询发票汇总信息	119

12.获取发票汇总信息结果	121

13.查询发票概要信息	124

14.铁路电子客票红字确认单确认	127

15.上传发票汇总确认信息	129

16. 查询发票汇总确认信息	132

六、附件	135



# **一、**阅读**指引**
为满足国铁集团多场景、规模化、合规化、自动化的铁路电子客票开具需求，乐企数字开放平台提供铁路电子客票的开具能力，并通过本能力说明文档明确了铁路电子客票开具相关业务规则和数据接口。

本能力适用于提供铁路旅客运输服务的纳税人订阅。

本能力说明文档分为阅读指引、能力介绍、政策依据、开发指引、接口技术说明、附件六个章节，其中阅读指引、能力介绍、政策依据章节适合纳税人管理人员及财务人员阅读；开发指引、接口技术说明、附件章节适合纳税人技术人员阅读。

# 二、能力介绍
## （一）能力简介
国铁集团提供铁路旅客运输服务（销售铁路客票）时，可以通过本能力开具铁路电子客票。

国铁集团可将本能力中的各类规则和接口嵌入业务系统中（如：铁路电子客票系统、销售、结算等），实现铁路电子客票开具流程和商业行为的融合，有效提升发票开具效率。

## （二）应用案例
某铁路公司将铁路电子客票开具能力嵌入铁路电子客票系统，消费者可对行程申请开具铁路电子客票。铁路电子客票系统通过乐企嵌入的铁路电子客票开具规则和接口，组合开票能力获取的发票要素等信息自动生成铁路电子客票，并完成交付。

## （三）名词解释
直连单位:指的是申请直连乐企数字开放平台且税务机关审核通过的纳税人。

使用单位:指的是被直连单位邀请直连乐企数字开放平台且税务机关审核通过的纳税人。

开具前置:指的是纳税人在开具发票前所获取的关于开票相关信息的能力。

授信额度:指的是税务机关对纳税人开票实行开具金额总额度管理。开具金额总额度，是指一个自然月内，纳税人发票开具总金额（不含增值税）的上限额度。

预赋码信息:指的是纳税人在开具发票前所需获取的铁路电子客票号码信息。

API列表:指的是纳税人在使用开票能力期间所需要的应用程序接口。

## （四）扩展阅读
无。

# 三、政策依据
《财政部 税务总局 海关总署关于深化增值税改革有关政策的公告》（财政部 税务总局 海关总署公告2019年第39号）

《国家税务总局关于国内旅客运输服务进项税抵扣等增值税征管问题的公告》（国家税务总局公告2019年第31号）

国家税务总局各省（自治区、直辖市、计划单列市）税务局关于推行全面数字化电子发票的相关公告

# <font style="color:#1A1A1A;">四</font>、开发指引
企业在调用乐企平台发起的相关请求报文中禁止使用Unicode码，但是可以使用Unicode码对应的中文。例如 ★ 可以出现在开票报文的备注中，但是不能出现\u38996。

## <font style="color:#1A1A1A;">（一）业务场景</font>
### 1.铁路电子客票开具前置
#### 1.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114831674-c44c5bc9-1b07-4711-afb0-e572ea39d4c6.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114831980-fc566f91-5105-4b53-af92-e2659f43d724.png)

时序图

#### 1.2.业务规则
##### **1.2.1获取纳税人基本信息**
定时获取纳税人基本信息，用于企业判断是否使用开票能力、可使用哪些开票能力。

建议定时获取纳税人基本信息，或者在纳税人基本信息发生变更时手动触发更新。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114832362-169b0b09-f2c3-4caf-bc0a-db688a6585b2.png)

###### 1.2.1.1判断逻辑
调用《查询纳税人基本信息》接口规范获取纳税人基本信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取纳税人基本信息失败，调用《查询纳税人基本信息》接口通信失败或者“返回码”提示“Error”或不为“00”。

##### 1.2.2获取可用税收分类编码
定时获取可用税收分类编码，在开具铁路电子客票时可依据获取到的税收分类编码判断发票信息是否合规。

建议定时获取税收分类编码。

针对不同的税收分类编码维护了可使用增值税特殊管理内容，即可使用的优惠政策，纳税人在开具数字化电子发票时可以根据选择的税收分类编码选择适用的优惠政策，享受税收减免政策。

增值税特殊管理共分为18类，分别是“简易征收”“稀土产品”“免税”“不征税”“先征后退”“100%先征后退”“50%先征后退”“按3%简易征收”“按5%简易征收”“按5%简易征收减按1.5%计征”“即征即退30%”“即征即退50%”“即征即退70%”“即征即退100%”“超税负3%即征即退”“超税负8%即征即退”“超税负12%即征即退”“超税负6%即征即退”。

在开具数字化电子发票条件时，根据需求选择符合的优惠政策代码和税率，包括：

优惠政策选择“简易征收”，发票明细“优惠政策标识”项填写“01”，税率限制为3%或5%；

优惠政策选择“稀土产品”，发票明细“优惠政策标识”项填写“02”，“税率”栏次正常填写适用税率；

优惠政策选择“免税”，发票明细“优惠政策标识”项填写“03”，选择免税后，税率为0，该优惠政策不能与其他优惠政策混开；

优惠政策选择“不征税”，发票明细“优惠政策标识”项填写“04”，选择不征税后，税率为0，该优惠政策不能混开；

优惠政策选择“100%先征后退”，发票明细“优惠政策标识”项填写“06”，在发票明细的“税率”栏次填写适用税率；

优惠政策选择“50%先征后退”，发票明细“优惠政策标识”项填写“07”，在发票明细的“税率”栏次填写适用税率；

优惠政策选择“按3%简易征收”，发票明细“优惠政策标识”项填写“08”，“税率”栏次限制为3%；

优惠政策选择“按5%简易征收”，发票明细“优惠政策标识”项填写“09”，“税率”栏次限制为5%；

优惠政策选择“按5%简易征收减按1.5%计征”，发票明细“优惠政策标识”项填写“10”，“税率”栏次限制为1.5%，该优惠政策不能与其他优惠政策混开，仅限不动产经营租赁能力可用；

优惠政策选择“即征即退30%”，发票明细“优惠政策标识”项填写“11”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退50%”，发票明细“优惠政策标识”项填写“12”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退70%”，发票明细“优惠政策标识”项填写“13”，“税率”栏次正常填写适用税率；

优惠政策选择“即征即退100%”，发票明细“优惠政策标识”项填写“14”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负3%即征即退”，发票明细“优惠政策标识”项填写“15”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负8%即征即退”，发票明细“优惠政策标识”项填写“16”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负12%即征即退”，发票明细“优惠政策标识”项填写“17”，“税率”栏次正常填写适用税率；

优惠政策选择“超税负6%即征即退”，发票明细“优惠政策标识”项填写“18”，“税率”栏次正常填写适用税率。



![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114832687-4b75f389-5351-47ca-b206-5c0e1a5eb927.png)

###### 1.2.2.1判断逻辑
调用《查询税收分类编码信息》接口规范获取税收分类编码信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取税收分类编码信息失败，调用《查询税收分类编码信息》接口通信失败或者返回报文中提示“Error”。

##### 1.2.3获取可用税率
定时获取可用税率，使用在开具铁路电子客票时可依据获取到的可用税率判断发票信息是否合规。

建议定时获取可用税率。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114832885-5382fcb8-343f-4149-b492-ab3990b853b9.png)

###### 1.2.3.1判断逻辑
调用《查询可用税率信息》接口规范获取可用税率信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取可用税率信息失败，调用《查询可用税率信息》接口通信失败或者“返回码”提示“Error”或不为“00”。

##### 1.2.4获取铁路电子客票勾选信息
企业可依据铁路电子客票勾选信息判断是否可红冲。

企业在开具红字发票前应当下载/更新铁路电子客票（蓝票）勾选信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114833155-4c7d434d-db88-4494-8e8d-583b6110586f.png)

###### 1.2.4.1判断逻辑
调用**<u>用票接口清册</u>**《发票状态信息查询》接口规范获取铁路电子客票勾选信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取铁路电子客票勾选信息失败，调用《发票状态信息查询》接口通信失败或者“返回码”提示“Error”或不为“00”。

##### 1.2.5获取铁路电子客票红字确认单列表
从税务局端获取铁路电子客票红字确认单列表信息，以便于后期开具红字铁路电子客票。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114833404-152b65b5-99bf-4bfe-a43b-cd36aa6deaa8.png)

###### 1.2.5.1判断逻辑
调用《查询铁路电子客票红字确认单列表信息》接口规范获取铁路电子客票红字确认单列表信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取铁路电子客票红字确认单列表信息失败，调用《查询铁路电子客票红字确认单列表信息》接口通信失败或者“返回码”提示“Error”或不为“00”。

##### 1.2.6获取铁路电子客票红字确认单明细
从税务局端获取铁路电子客票红字确认单明细信息，以便于后期开具红字铁路电子客票。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114834048-df425804-8095-4fa6-901e-b32a60b1277c.png)

###### 1.2.6.1判断逻辑
调用《查询铁路电子客票红字确认单明细信息》接口规范获取铁路电子客票红字确认单明细信息，当接口调用时发生以下任意情形，提示错误信息。

● 获取铁路电子客票红字确认单明细信息失败，调用《查询铁路电子客票红字确认单明细信息》接口通信失败或者返回报文中提示“Error”。

### 2.蓝字铁路电子客票开具
#### 2.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114834327-2584d9d1-db0b-43c7-afac-81a444bc532d.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114834597-59f03838-16fd-4694-b3c1-8d1367b2b422.png)

时序图

#### 2.2.业务规则
##### 2.2.1判断纳税人开票资格
校验纳税人是否具备铁路电子客票开票资格，纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114834853-4f2e3362-0063-4c09-8345-f6a403099e63.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具铁路电子客票的资格。

###### 2.2.1.1判断逻辑
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具铁路电子客票蓝字发票。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### 2.2.2获取开票基础信息
查询本地保存的税收分类编码信息和可用税率信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114835053-0f3f5edb-5019-4134-ae5a-f72885f1b04f.png)

##### 2.2.3获取购方纳税人信息
向企业端开票系统提供购票方纳税人信息查询功能，企业端在开具发票时，使用此功能自动带出购票方纳税人信息，方便纳税人开票。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114835253-82270673-8cc9-48bc-a3a0-50c6b80631a3.png)

##### 2.2.4录入、校验发票信息
依据开票能力发票开具的要求，录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114835519-d204f93f-5d4a-4b62-a39f-7960ef3077bb.png)

###### 2.2.4.1合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 发票号码，必填，长度20位，由数字组成，前2位为年份后2位。

● 蓝字发票标志，必填，长度1位。

● 平台编号，必填，最大长度	20位。

● 服务器地址，必填，长度20位。

● mac地址，必填，长度20位。

● CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 发票票种，必填，长度2位。

● 特定要素，必填，长度2位。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 差额征税类型代码，选填，取值范围为“空”、“01”、“02”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，必填，最大长度300位。

● 销售方地址，选填，最大长度300位。

● 销售方电话，选填，最大长度60位。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 购买方纳税人识别号，选填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方自然人标志，选填，取值范围为“Y”、“N”。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行，选填，最大长度120位。

● 购买方账号，选填，最大长度50位。

● 购买方经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 价税合计（大写），必填，最大长度300位。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度100位。

● 结算方式代码，选填，最大长度2位。

● 开票人，必填，最大长度300位。当使用联用、他用能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，选填，最大长度30位。当使用联用、他用能力时，必填，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，选填，最大长度4位。当使用他用、联用能力时，必填，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 开具红字发票对应的蓝字发票号码，选填，最大长度20位。

● 红字确认信息单编号，选填，最大长度20位。

● 红字确认单uuid，选填，最大长度32位。

● 备注，选填，最大长度450位。

● 开票日期，必填，格式：yyyy-MM-dd HH:mm:ss。

● 开票单位名称，选填，长度300位。

● 开票单位代码，选填，长度20位。

● 业务类型名称，必填，长度300位。

● 出发站，选填，最大长度60位。

● 出发站拼音，选填，最大长度60位。

● 到达站，选填，最大长度60位

● 到达站拼音，选填，最大长度60位。

● 乘车车次，选填，最大长度20位。

● 日期，选填，格式：yyyy-MM-dd。

● 出发时间，选填，格式：HH:mm。。

● 铁路电子客票票种名称，选填，最大长度60位。

● 空调特征，选填，最大长度20位。

● 席别，选填，最大长度20位。

● 车厢，选填，最大长度20位。

● 席位，选填，最大长度60位。

● 支付金额，必填，最大长度18位，最多2位小数。

● 已退金额，选填，最大长度18位，最多2位小数。

● 原票票价，选填，最大长度18位，最多2位小数。

● 原票出发站，选填，最大长度60位。

● 原票到达站，选填，最大长度60位。

● 电子客票号，选填，最大长度30位。

● 证件号码，选填，最大长度30位。

● 身份证件类型，选填，最大长度3位。

● 姓名，选填，最大长度150位。

● 标识信息区1，选填，最大长度100位。

● 标识信息区2，选填，最大长度100位。

● 提示信息区，选填，最大长度400位。

● 明细序号，必填，长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

###### 2.2.4.2数据校验
● 汇总金额校验：|所有商品行不含税金额之和-合计金额|<=0.01。（若发票是单行，则汇总单行数据）

● 单行税额校验：| 不含税金额 * 税率（不含税税率） - 税额 |<=0.06。

● 汇总税额校验：| 不含税金额 * 税率（不含税税率）（第1行）+......+不含税金额 * 税率（第N行）-税额合计|<=1.27。（若发票是单行，则汇总单行数据）

● 发票上传接口中“平台编号”字段值必须为直连单位ID。

● 开具蓝字铁路电子客票时，“业务类型名称”、“项目名称”及“商品和服务税收分类合并编码”传值字段只能使用下表中对应的编码与名称：

| 特定要素 | 业务类型名称 | 项目名称 | 可用的商品和服务编码 |
| --- | --- | --- | --- |
| 铁路电子<br/>客票 | 0：售票 | 票价 | 3010101010100000000或   3010101010200000000或   3010101010300000000 |
| | 1：退票（手续费） | 退票费 | 3049900000000000000  |
| | 2：改签（手续费） | 改签费 | 3010101010100000000或   3010101010200000000或   3010101010300000000  |




单张发票明细行最多不能超过5000条，超过5000条则阻断发票上传；建议企业开具发票明细行控制在2000条以下。

● 开具发票只能使用税收分类编码中“是否汇总项”字段为“N”的编码进行开票。

● 差额征税类型代码必须为空。

● 发票上传时间与开票时间间隔应当小于48小时。

● 如购买方为自然人并要求能将发票归集在个人票夹中展示，“购买方自然人标志”需填写“Y”，并提供姓名（购买方名称）及身份证号（购买方纳税人识别号），且购买方名称需以追加“（个人）”结尾。例如：开票时【购买方名称】填写内容为“张先生”，则开具出的发票【购买方名称】内容为“张先生（个人）”。

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### 2.2.5发票赋码
根据铁路电子客票号码规则，给要开具的铁路电子客票依次分配不重复的铁路电子客票号码。

赋码规则：发票号码设计采用20位电子发票编码规则，编码规则说明如下：

第1-2位，共2位，取开票年份的末2位，如2021年开的发票为21，2022年为22，以此类推。

第3-4位，共2位，为省份代码。

第5位是9，6到20位调用铁路规则。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114836428-69e0770d-3b4b-499b-aad1-c919de7f81b4.png)

##### 2.2.6发票上传
发票赋码成功后，首先在本地保存铁路电子客票预开具信息（发票状态为“预开具成功”），调用税务局端《铁路电子客票上传》接口预上传铁路电子客票，并依据返回的结果，更新本地铁路电子客票预上传结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114836667-a79e2306-0563-47da-8504-8b3de0bfe4f8.png)

###### 2.2.6.1判断逻辑
调用《铁路电子客票上传》进行判断，满足以下任意条件时阻断开具铁路电子客票蓝字铁路电子客票。

● 调用《铁路电子客票上传》接口通信失败或者“返回码”提示“Error”或不为“00”。

##### 2.2.7查询发票上传结果
发票上传成功后，间隔10秒-10分钟依据发票上传返回的“受理流水号”调用税务局端《查询铁路电子客票上传结果》接口查询铁路电子客票是否接收成功，并依据返回的开具结果，更新本地铁路电子客票开具结果，返回结果中包含每张发票的处理结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114836902-5a7c3c7f-f39c-4d25-b03c-bb906c6b0d3a.png)

###### 2.2.7.1判断逻辑
调用《查询铁路电子客票上传结果》接口查询铁路电子客票是否开具成功。 

● 调用《查询铁路电子客票开具状态》接口通信失败或者“返回码”提示“Error”或不为“00”。

### 3铁路电子客票红字确认单申请
#### 3.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114837107-349663eb-b898-4b2a-a758-a7c5d1bf6d3f.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114837321-ea5980f0-1f9c-4df8-9eb7-85eb485ca0aa.png)

时序图

#### 3.2业务规则
#### 3.2.1判断纳税人开具资格
校验纳税人是否具备铁路电子客票红字确认单开具资格，纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114837515-2080492d-4550-4ea8-b9bf-b51e4246c7a4.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具铁路电子客票红字确认单资格。

##### 3.2.1.1判断逻辑
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具铁路电子客票红字确认单。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

#### 3.2.2本地判断蓝字铁路电子客票是否可红冲
查询本地保存蓝字铁路电子客票勾选信息，校验蓝字铁路电子客票勾选是否具备红冲条件。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114837758-3b56657a-b7f5-45bc-a5b4-008045e7df01.png)

##### 3.2.2.1判断逻辑
对从本地查询的蓝字铁路电子客票勾选信息、铁路电子客票红字确认单信息进行判断，满足以下任意条件时禁止开具铁路电子客票红字确认单。

● 查询蓝字铁路电子客票“发票用途状态信息”失败时。

● 对应蓝字铁路电子客票的“异常凭证状态”非“01（正常）”时。

● 对应蓝字铁路电子客票的“发票状态”非“01（正常）”时。

● 对应蓝字铁路电子客票的“红字锁定标识”为“Y（锁定）”时。

● 红字确认单申请方非蓝字铁路电子客票销售方时。

#### 3.2.3录入、校验铁路电子客票红字确认单信息
依据开票能力铁路电子客票确认单要求，录入铁路电子客票确认单信息，并依据铁路电子客票确认单开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114837968-614d9202-d603-4e4d-a26f-d6cda0d9eb06.png)

##### 3.2.3.1合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 录入方身份，必填，取值范围为“0”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，选填，最大长度300位。

● 购买方纳税人识别号，可空，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 蓝字发票发票号码，必填，最大长度30位。

● 蓝字发票开票日期，必填，格式为yyyy-MM-dd HH:mm:ssd。

● 蓝字发票合计金额，必填，最大长度18位，最多2位小数。

● 蓝字发票合计税额，必填，最大长度18位，最多2位小数。

● 蓝字发票发票票种代码，必填，取值范围为“05”。

● 蓝字发票特定要素类型代码，必填，取值范围为“21”。

● 红字冲销金额，必填，最大长度18位，最多2位小数。

● 红字冲销税额，必填，最大长度18位，最多2位小数。

● 红字发票冲红原因代码，必填，取值范围为“01”、“03”、“04”。

● <font style="color:#000000;">明细序号，必填，长度8位。</font>

● 对应蓝字发票明细序号，必填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 单位，选填，最大长度300位。

● 数量，选填（单价非空时，必填），最大长度25位。

● 单价，选填（数量非空时，必填），最大长度25位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● <font style="color:#000000;">货物或应税劳务、服务名称</font>，必填，最大长度300位。

● <font style="color:#000000;">商品服务简称，</font>必填，最大长度120位。

##### 3.2.3.2数据校验
● 含税金额 = 税额 + 金额，不能有误差。

● 对于税控发票，申请红字确认单时，如果税控蓝票项目名称为*A*B，红字确认单项目名称字段填写税控蓝字发票项目名称第二个*号之后的内容，即B。

● “红冲原因”为“开票有误”时，必须全额红冲，并且明细单价、金额、数量必须和蓝字发票保持一致。

● “红冲原因”为“服务中止”时，允许修改总金额和数量，不允许修改单价。

● “红冲原因”为“销售折让”时，单价、数量必须为空。

● 当受票方为自然人时，只允许开票方填开《红字发票信息确认单》后，开具红字数电票，无需受票方确认。若自然人在个人票夹未操作“拒收”，此时支持部分红冲或全额红冲；若已操作“拒收”，此时仅支持全额红冲。对于已部分红冲后的蓝字发票，自然人对于原蓝票剩余部分操作“拒收”，仅允许对于剩余部分一次性全部冲完，不再允许对于剩余部分多次红冲。

● 当受票方为企业时，按照以下规则红冲：

1）受票方未做用途确认及入账确认的，开票方填开《红字发票信息确认单》后，开具红字数电票，无需受票方确认。

2）受票方已进行用途确认或入账确认的，由开票方填开《红字发票信息确认单》，经受票方确认后，开票方依据《红字发票信息确认单》开具红字发票。发起红冲流程后，受票方需在72小时内进行确认，未在规定时间内确认的，该流程自动作废。受票方无论是否进行勾选用途确认或入账确认，均支持部分红冲或全额红冲。

#### 3.2.4铁路电子客票红字确认单开具
铁路电子客票红字确认单录入校验通过后，首先在本地保存铁路电子客票红字确认单申请信息，调用税务局端《铁路电子客票红字确认单申请》接口将预申请铁路电子客票确认单上传至税务局端，如果返回成功则表明预申请铁路电子客票红字确认单上传成功。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114838206-032ae3ed-edf9-42f6-96a4-189850069cc5.png)

##### 3.2.4.1判断逻辑
调用《铁路电子客票红字确认单申请》接口申请铁路电子客票红字确认单，当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

### 4红字确认单确认
#### **4.1全流程图**
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114838445-07861313-ae0d-438f-8961-1acf987bff8d.png)

业务流程图

#### **4.2业务规则 **
#### 4.2.1查询数电红字确认单信息
从本地查询数电红字确认单信息，判断红字确认单是否可以确认。

##### 4.2.1.1判断逻辑
根据查询的数电红字确认单信息进行校验，当满足以下任意条件时禁止确认数电红字确认单。

● 查询数电红字确认单信息失败，本地无数电红字确认单信息。

● 红字确认单状态非待确认状态。

#### 4.2.2选择、确认数电红字确认单
从查询出的数电红字确认单中选择需要确认的数电红字确认单，并选择确认结果。

#### 4.2.3上传数电红字确认单确认信息
调用《数电红字确认单确认》接口向税务局端上传数电红字确认单确认结果，包括：同意、不同意和撤销，并更新数电红字确认单确认信息上传结果。

红字确认单撤销时要求红字确认单状态为有效且未开具红票，红字确认单撤销只能由最后操作方申请，具体包含以下规则：

1）购买方未对蓝字发票做勾选/入账操作，销售方申请红字确认单，这时红字确认单状态为“01”，此时只允许销售方撤销。

2）购买方对蓝字发票做勾选/入账操作，销售方申请红字确认单，购买方未确认，这时红字确认单状态为“02”，此时只允许销售方撤销。

3）购买方对蓝字发票做勾选/入账操作，销售方申请红字确认单，购买方已确认，这时红字确认单状态为“04”，此时只允许购买方撤销。

4）购买方对蓝字发票做勾选/入账操作，购买方申请红字确认单，销售方未确认，这时红字确认单状态为“03”，此时只允许购买方撤销。

5）购买方对蓝字发票做勾选/入账操作，购买方申请红字确认单，销售方已确认，这时红字确认单状态为“04”，此时只允许销售方撤销。

### 5红字铁路电子客票开具
#### 5.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114839362-d9febf02-6a9e-4ea8-b213-2df9e5c2f05d.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114839655-124ae2d5-3245-40bc-859f-2ee99d0fa067.png)

时序图

#### 5.2.业务规则
##### 5.2.1校验红字确认单状态
查询本地保存的红字确认单信息，判断是否存在红字确认单信息以及红字确认单状态是否正常。

由于业务需求要求在蓝字铁路电子客票未上传时允许开具红字铁路电子客票，所以当红字确认单审核失败时，如果失败原因为“21（根据开具红字发票对应的蓝字发票号码未查询到有效的蓝字发票信息，无法进行红字确认信息单上传）”时，允许开具红字铁路电子客票，但是需要在发票上传时重新申请红字确认单，且红字确认单审核通过后才可能继续上传红字发票。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114839878-fbb02a9a-7017-4a77-9a97-cefd2f75f229.png)

###### 5.2.1.1判断逻辑
根据查询的红字确认单信息进行校验，当满足以下任意条件时禁止开具红字发票。

● 未查询到红字确认单信息，本地无红字确认单信息。

● 红字确认单审核失败，原因非“21（根据开具红字发票对应的蓝字发票号码未查询到有效的蓝字发票信息，无法进行红字确认信息单上传）”。

● 红字确认单审核通过，但红字确认单信息状态非“01（无需确认）”。

##### 5.2.2判断纳税人开票资格
校验纳税人是否具备红字铁路电子客票开票资格，纳税人资格校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114840137-7e4babb7-527d-4def-9537-1d8d7973fdad.png)

查询本地保存的纳税人基本信息，判断纳税人是否具备开具红字铁路电子客票的资格。

###### 5.2.2.1判断逻辑
根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具红字铁路电子客票。

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### 5.2.3录入、校验发票信息
依据开票能力红字发票开具的要求，依据红字确认单录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114840393-78941604-1342-4ca3-a639-210b9e2c4a4a.png)

###### 5.2.3.1合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 发票号码，必填，长度20位，由数字组成，前2位为年份后2位。

● 蓝字发票标志，必填，长度1位。

● 平台编号，必填，最大长度	20位。

● 服务器地址，必填，长度20位。

● mac地址，必填，长度20位。

● CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 发票票种，必填，长度2位。

● 特定要素，必填，长度2位。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 差额征税类型代码，选填，取值范围为“空”、“01”、“02”。

● 销售方纳税人识别号，必填，最大长度20位，由数字和大写字母组成。

● 销售方名称，必填，最大长度300位。

● 销售方地址，选填，最大长度300位。

● 销售方电话，选填，最大长度60位。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 购买方纳税人识别号，选填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方自然人标志，选填，取值范围为“Y”、“N”。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行，选填，最大长度120位。

● 购买方账号，选填，最大长度50位。

● 购买方经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 价税合计（大写），必填，最大长度300位。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度100位。

● 结算方式代码，选填，最大长度2位。

● 开票人，必填，最大长度300位。当使用联用、他用能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，选填，最大长度30位。当使用联用、他用能力时，必填，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，选填，最大长度4位。当使用他用、联用能力时，必填，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 开具红字发票对应的蓝字发票号码，必填，最大长度20位。

● 红字确认信息单编号，必填，最大长度20位。

● 红字确认单uuid，必填，最大长度32位。

● 备注，选填，最大长度382位。

● 开票日期，必填，格式：yyyy-MM-dd HH:mm:ss。

● 开票单位名称，选填，长度300位。

● 开票单位代码，选填，长度20位。

● 业务类型名称，必填，长度300位。

● 出发站，选填，最大长度60位。

● 出发站拼音，选填，最大长度60位。

● 到达站，选填，最大长度60位

● 到达站拼音，选填，最大长度60位。

● 乘车车次，选填，最大长度20位。

● 日期，选填，格式：yyyy-MM-dd。

● 出发时间，选填，格式：HH:mm。。

● 铁路电子客票票种名称，选填，最大长度60位。

● 空调特征，选填，最大长度20位。

● 席别，选填，最大长度20位。

● 车厢，选填，最大长度20位。

● 席位，选填，最大长度60位。

● 支付金额，必填，最大长度18位，最多2位小数。

● 已退金额，选填，最大长度18位，最多2位小数。

● 原票票价，选填，最大长度18位，最多2位小数。

● 原票出发站，选填，最大长度60位。

● 原票到达站，选填，最大长度60位。

● 电子客票号，选填，最大长度30位。

● 证件号码，选填，最大长度30位。

● 身份证件类型，选填，最大长度3位。

● 标识信息区1，选填，最大长度100位。

● 标识信息区2，选填，最大长度100位。

● 提示信息区，选填，最大长度400位。

● 姓名，选填，最大长度150位。

● 明细序号，必填，长度8位。

● 对应蓝字发票明细序号，选填，最大长度8位。

● 项目名称，必填，最大长度600位。

● 金额（不含税），必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

###### 5.2.3.2数据校验
● 含税金额=税额+金额，不能有误差。

● 红票开具金额=对应蓝字发票开具金额。

● 差额征税类型代码必须为空。

● 发票上传时间与开票时间间隔应当小于48小时。

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### 5.2.4发票赋码
根据铁路电子客票号码规则，给要开具的铁路电子客票依次分配不重复的铁路电子客票号码。

赋码规则：发票号码设计采用20位电子发票编码规则，编码规则说明如下：

第1-2位，共2位，取开票年份的末2位，如2021年开的发票为21，2022年为22，以此类推。

第3-4位，共2位，为省份代码。

第5位是9，6到20位调用铁路规则。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114840608-affbb7ce-16f3-4fe5-aa5f-73f790437f40.png)

##### 5.2.5二次校验红字确认单状态
由于业务需求要求在蓝字铁路电子客票未上传时允许开具红字铁路电子客票，所以红字确认单审核失败时，且失败原因为“21（根据开具红字发票对应的蓝字发票号码未查询到有效的蓝字发票信息，无法进行红字确认信息单上传）”时，允许开具红字铁路电子客票。

在红字铁路电子客票完成赋码后，需再校验红字确认单状态，若红字确认单审核失败，且失败原因代码为“21”，同需要再次申请红字确认单，并且红字确认单审核通过后，在红字发票上补齐红字确认单编号、红字确认单UUID。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114840835-fdeaec5b-0fe9-4f79-a3fe-c1ccff5dfcad.png)

###### 5.2.5.1判断逻辑
重新申请铁路电子客票红字确认单，参见铁路电子客票红字确认单申请。

##### 5.2.6发票上传
发票赋码成功后，首先在本地保存铁路电子客票预开具信息（发票状态为“预开具成功”），调用税务局端《铁路电子客票上传》接口预上传铁路电子客票，并依据返回的结果，更新本地铁路电子客票预上传结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114841046-639c404f-b69c-4055-a2f2-d60ae9e81586.png)

###### 5.2.6.1判断逻辑
调用《铁路电子客票上传》进行判断，满足以下任意条件时阻断开具铁路电子客票蓝字发票。

● 调用《铁路电子客票上传》接口通信失败或者“返回码”提示“Error”或不为“00”。若非“Error”或不为“00”则证明已上传到税务局端，待税务局端进行下一步处理。

##### 5.2.7查询发票上传结果
发票上传成功后，间隔10秒-10分钟依据发票上传返回的“受理流水号”调用税务局端《查询铁路电子客票上传结果》接口查询铁路电子客票是否接收成功，并依据返回的开具结果，更新本地铁路电子客票开具结果，返回结果是包含每张发票的处理结果。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114841587-851aa129-b946-4852-b41c-3a5956f33a9a.png)

###### 5.2.7.1判断逻辑
调用《查询铁路电子客票上传结果》接口查询铁路电子客票是否开具成功。 

● 调用《查询铁路电子客票开具状态》接口通信失败或者“Error”或不为“00”则表明开具失败。

### 6开票汇总确认
#### 6.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114842140-ec7f884f-36ed-41be-9ec4-e80dc0ece98e.png)

业务流程图

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114842364-6a752d1b-2a3b-4190-9b14-3133204183a8.png)

时序图

#### 6.2.业务规则
##### 6.2.1数字化电子发票汇总信息上传
给企业提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和税额上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。开票汇总确认后不允许上传已确认的月份的数字化电子发票说明。

若企业在每月13日零点前未上传上个月的发票汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票。每月13日零点之后，上个月未上传的发票，请重新开具。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114842595-8b87deef-ebe3-46eb-961a-57444975ea1c.png)

每月13日零点之前，当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114842798-03726131-da96-4412-822f-083e43af9b63.png)

###### 6.2.1.1判断逻辑
调用《上传发票汇总确认信息》接口当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### 6.2.2查询发票汇总确认信息
给企业提供发票汇总确认信息查询功能，企业可以通过此接口查询历史发票汇总确认信息。

![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114842998-ed9242e8-4efe-493f-8f73-2e3e0faa2706.png)

###### 6.2.2.1判断逻辑
调用《查询发票会汇总确认信息》接口当接口调用时发生以下任意情形，调用失败。

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

# **五、**接口技术说明
## （一）能力编码
| 能力名称 | 乐企铁路电子客票开票能力 |
| --- | --- |
| 能力编码 | 202009 |


## （二）接口清单
| **序号** | **接口名称** | **服务编码** |
| :---: | --- | --- |
| 1 | 查询纳税人基本信息 | <font style="color:rgb(0, 0, 0);">CXNSRJBXX</font> |
| 2 | 查询税收分类编码信息 | <font style="color:rgb(0, 0, 0);">CXSSFLBM</font> |
| 3 | 查询可用税率信息 | <font style="color:rgb(0, 0, 0);">CXKYSL</font> |
| 4 | 铁路电子客票上传 | <font style="color:rgb(0, 0, 0);">QDFPSC_RAIL</font> |
| 5 | 查询铁路电子客票上传结果 | <font style="color:rgb(0, 0, 0);">CXQDFPSCJG</font> |
| 6 | 铁路电子客票红字确认单申请 | <font style="color:rgb(0, 0, 0);">QDHZQRDSQ_RAIL</font> |
| 7 | 发票用途状态信息查询 | FPYTXXCX |
| 8 | 查询铁路电子客票红字确认单列表信息 | <font style="color:rgb(0, 0, 0);">CXQDHZQRDLB_RAIL</font> |
| 9 | 查询铁路电子客票红字确认单明细信息 | <font style="color:rgb(0, 0, 0);">CXQDHZQRDMX_RAIL</font> |
| 10 | 查询购方纳税人信息 | <font style="color:rgb(0, 0, 0);">CXGFNSRXX</font> |
| 11 | 查询发票汇总信息 | <font style="color:rgb(0, 0, 0);">CXFPGYXX</font> |
| 12 | 获取发票汇总信息结果 | <font style="color:rgb(0, 0, 0);">HQFPHZXXJG</font> |
| 13 | 查询发票概要信息 | CXFPGYXX |
| 14 | 铁路电子客票红字确认单确认 | <font style="color:rgb(0, 0, 0);">QDHZQRDQR_RAIL</font> |
| 15 | 上传发票汇总确认信息 | SCFPHZQRXX |
| 16 | 查询发票汇总确认信息 | <font style="color:rgb(0, 0, 0);">CXFPHZQRXX</font> |


### <font style="color:#1A1A1A;">1.查询纳税人基本信息</font>
#### 1.1接口说明
向企业提供查询纳税人基本信息的功能，企业可将查询的基本信息，包括生产经营信息、税务机关信息、企业性质、消费税性质等保存在本地。在开票时自校验该接口获取的纳税人基本信息是否满足开具发票的条件。

#### 1.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 1.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |


#### 1.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 1.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | djxh | 登记序号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | ssdabh | 税收档案编号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | nsrmc | 纳税人名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | nsrlx | 纳税人类型标签 | varchar | 300 | 是 | 1：一般纳税人<br/>2：小规模纳税人<br/>3：转登记小规模纳税人<br/>4：辅导期一般纳税人<br/>5：自然人 |
| <font style="color:rgb(0, 0, 0);">8</font> | scjydz | 生产经营地址 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | zcdyzbm | 注册地邮政编码 | varchar | 6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | zcdlxdh | 注册地联系电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | fddbrxm | 法人名称(法定代表人姓名 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | djzclxdm | 登记注册类型（国标） | varchar | 3 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | hydm | 行业代码 | varchar | 4 | 是 | 主行业代码特定征收部门可空 |
| <font style="color:rgb(0, 0, 0);">14</font> | qxjswjgdm | 区县级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | zgswskfjdm | 税务机关代码 | varchar | 11 | 是 | 主管税务所科分局 |
| <font style="color:rgb(0, 0, 0);">16</font> | zgswskfjmc | 税务机关名称 | varchar | 300 | 是 | 主管税务所科分局 |
| <font style="color:rgb(0, 0, 0);">17</font> | cwfzrxm | 财务负责人姓名 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | khhmc | 账户名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | yhzh | 账号 | varchar | 50 | 否 | 首选账户账号 |
| <font style="color:rgb(0, 0, 0);">20</font> | bsrxm | 企业办税人员姓名 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">21</font> | xdpsdqybz | 数字化电子票试点企业标识 | varchar | 20 | 是 | Y：数字化电子票试点企业<br/>N：不是数字化电子票试点企业 |
| <font style="color:rgb(0, 0, 0);">22</font> | ckqyfldm | 出口企业分类 | varchar | 20 | 是 | 空：非出口企业<br/>01：一类出口企业<br/>02：二类出口企业<br/>03：三类出口企业<br/>04：四类出口企业 |
| <font style="color:rgb(0, 0, 0);">23</font> | zfjglxdm | 总分机构类型 | varchar | 20 | 是 | 0：非总分机构 <br/>1：总机构<br/>2：分支机构 3：分总机构 |
| <font style="color:rgb(0, 0, 0);">24</font> | yhyywddm | 银行营业网点 | varchar | 13 | 否 | |
| <font style="color:rgb(0, 0, 0);">25</font> | nsrztdm | 开票方纳税人状态 | varchar | 2 | 是 | 01：受理<br/>02：筹建期<br/>03：正常<br/>04：停业<br/>05：非正常<br/>06：清算<br/>07：注销<br/>08：非正常户注销<br/>09：报验<br/>10：核销报验<br/>11：中断缴费<br/>12：恢复缴费<br/>13：简易注销无异议<br/>99：其他 |
| <font style="color:rgb(0, 0, 0);">26</font> | yxqq | 纳税人类型标签有效期起 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">27</font> | yxqz | 纳税人类型标签有效期止 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">28</font> | qyhyxzdm | 企业行业性质 | varchar | 300 | 否 | 01：成品油生产企业 <br/>02：成品油经销企业 <br/>03：国内机动车生产企业 <br/>04：进口机动车生产企业驻我国办事机构或总授权代理机构 <br/>05：机动车授权经销企业 <br/>06：其他机动车贸易商 <br/>07：二手车市场 <br/>08：二手车经销企业<br/>09：二手车拍卖企业 <br/>10：稀土矿产企业 <br/>11：稀土冶炼分离企业 <br/>12：稀土其他企业<br/>13：稀土矿产企业、稀土冶炼分离企业、稀土其他企业<br/>14：稀土矿产企业、稀土冶炼分离企业 15：稀土矿产企业、稀土其他企业 <br/>16：稀土冶炼分离企业、稀土其他企业 <br/>17：卷烟生产企业<br/>18：卷烟批发企业<br/>19：卷烟出口企业 <br/>20：生产型出口企业 <br/>21：外贸型出口企业<br/>22：外贸综合服务企业<br/>23：自贸区试点企业<br/>24：特殊监管区内企业 <br/>25：增值税一般纳税人资格试点<br/>26：市场采购试点<br/>27：退税商店<br/>28：电子商务出口企业<br/>29：享受出口退税政策的融资租赁企业 <br/>30：增值税零税率应税服务提供者<br/>31：房地产开发企业 <br/>32：农产品深加工企业<br/>33：外购石脑油、燃料油用于消费税退税企业 <br/>34：从事机动车进口的其他贸易商<br/>35：自产农产品者 <br/>36：农产品收购企业 <br/>37：光伏收购企业 <br/>38：住房租赁企业 <br/>39：冬奥会退税企业 |
| <font style="color:rgb(0, 0, 0);">29</font> | xfsnsrlxdm | 消费税纳税人类型 | varchar | 20 | 否 | 01：卷烟生产消费税纳税人 <br/>02：卷烟批发消费税纳税人 <br/>03：白酒生产消费税纳税人 <br/>04：黄酒生产消费税纳税人 <br/>05：啤酒生产消费税纳税人 <br/>06：其他酒生产消费税纳税人 <br/>07：小汽车生产消费税纳税人 <br/>08：超豪华小汽车消费税纳税人 <br/>09：汽油生产消费税纳税人 <br/>10：石脑油生产消费税纳税人 <br/>11：溶剂油生产消费税纳税人 <br/>12：润滑油生产消费税纳税人 <br/>13：柴油生产消费税纳税人 <br/>14：航空煤油生产消费税纳税人 <br/>15：燃料油生产消费税纳税人<br/>16：电池生产消费税纳税人 <br/>17：涂料生产消费税纳税人 <br/>18：高档化妆品生产消费税纳税人<br/>19：金银首饰铂金首饰和钻石及钻石饰品零售消费税纳税人<br/>20：其他贵重首饰和珠宝玉石生产消费税纳税人<br/>21：鞭炮焰火生产消费税纳税人 <br/>22：摩托车生产消费税纳税人 <br/>23：高尔夫球及球具生产消费税纳税人 <br/>24：高档手表生产消费税纳税人 <br/>25：游艇生产消费税纳税人 <br/>26：木制一次性筷子生产消费税纳税人 <br/>27：实木地板生产消费税纳税人 <br/>28：雪茄烟生产消费税纳税人 <br/>29：烟丝生产消费税纳税人 |


#### 1.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"jcxx": {<br/>				"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>				"djxh": "登记序号",<br/>				"ssdabh": "税收档案编号",<br/>				"nsrmc": "纳税人名称",<br/>				"nsrlx": "纳税人类型",<br/>				"scjydz": "生产经营地址",<br/>				"zcdyzbm": "注册地邮政编码",<br/>				"zcdlxdh": "注册地联系电话",<br/>				"fddbrxm": "法人名称(法定代表人姓名",<br/>				"djzclxdm": "登记注册类型（国标）",<br/>				"hydm": "行业代码",<br/>				"qxjswjgdm": "区县级税务机关代码",<br/>				"zgswskfjdm": "税务机关代码",<br/>				"zgswskfjmc": "税务机关名称",<br/>				"cwfzrxm": "财务负责人姓名",<br/>				"khhmc": "账户名称",<br/>				"yhzh": "账号",<br/>				"bsrxm": "企业办税人员姓名",<br/>				"xdpsdqybz": "数字化电子票试点企业标识",<br/>				"ckqyfldm": "出口企业分类",<br/>				"zfjglxdm": "总分机构类型",<br/>				"yhyywddm": "银行营业网点",<br/>				"nsrztdm": "开票方纳税人状态",<br/>				"yxqq": "有效期起",<br/>				"yxqz": "有效期止"<br/>			},<br/>			"qyhyxzGrid": [<br/>				{<br/>					"qyhyxzdm": "企业行业性质",<br/>					"yxqq": "有效期起",<br/>					"yxqz": "有效期止"<br/>				}<br/>			],<br/>			"xfsnsrlxGrid": [<br/>				{<br/>					"xfsnsrlxdm": "消费税纳税人类型",<br/>					"yxqq": "有效期起",<br/>					"yxqz": "有效期止"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">2.查询税收分类编码信息</font>
#### 2.1接口说明
向企业提供查询商品税收分类编码信息的功能，企业可将查询的基本信息保存在本地。在开票时选择保存在本地的税收分类编码。

#### 2.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 2.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |
| <font style="color:rgb(0, 0, 0);">2</font> | sjc | 时间戳 | datetime | | 否 | 格式：yyyyMMddHHmmss<br/>首次下载时为空；<br/>非首次下载时，传入上次下载返回的时间戳 |
| <font style="color:rgb(0, 0, 0);">3</font> | sjswjgdm | 省级税务机关代码 | varchar | 11 | 否 |  |


#### 2.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代<br/>码",<br/>	"sjc": "时间戳",<br/>	"sjswjgdm": "省级税务机关代码"<br/>} |
| --- |


#### 2.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | sjc | 时间戳 | datetime | | 是 | 格式：<br/>yyyyMMddHHmmss<br/>用于增量下载 |
| <font style="color:rgb(0, 0, 0);">4</font> | count | 总数量 | number | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | fjbm | 父级编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | tdyslxdm | 特定要素标签归类 | varchar | 2 | 否 | 01：成品油<br/>02：稀土<br/>03：建筑服务<br/>04：货物运输<br/>05：不动产销售<br/>06：不动产租赁<br/>07：代收车船使用税<br/>08：通行费<br/>09：旅客运输<br/>10：医疗服务<br/>11：农产品<br/>12：拖拉机和联合收割机<br/>13：机动车<br/>14：光伏收购<br/>15：卷烟 |
| <font style="color:rgb(0, 0, 0);">8</font> | cezs | 差额征税 | varchar | 1 | 否 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">9</font> | bzs | 不征税 | varchar | 1 | 否 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">10</font> | jzjtdm | 即征即退代码集合 | varchar | 150 | 否 | 01：增值税即征即退-软件产品<br/>02：增值税即征即退-资源综合利用产品<br/>03：增值税即征即退-管道运输服务<br/>04：增值税即征即退-有形动产融资租赁服务<br/>05：增值税即征即退-有形动产融资性售后回租服务<br/>06：增值税即征即退-新型墙体材料<br/>07：增值税即征即退-风力发电产品<br/>08：增值税即征即退-光伏发电产品<br/>09：增值税即征即退-动漫软件产品<br/>10：增值税即征即退-飞机维修劳务<br/>11：增值税即征即退-黄金<br/>12：增值税即征即退-铂金 |
| <font style="color:rgb(0, 0, 0);">11</font> | sphfwmc | 商品和服务名称 | varchar | 150 | 是 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | sphfwfljc | 商品和服务分类简称 | varchar | 120 | 是 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | sm | 说明 | varchar | | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | zzssl | 增值税税率 | varchar | 50 | 否 | <br/>取值返回是中文顿号连接的百分数。例如3%、5% |
| <font style="color:rgb(0, 0, 0);">15</font> | zsl | 征收率 | varchar | 50 | 否 | <br/>取值返回是中文顿号连接的百分数。例如3%、5% |
| <font style="color:rgb(0, 0, 0);">16</font> | zzstsgl | 增值税特殊管理 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | zzszcyj | 增值税政策依据 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | zzstsnrdm(zzsjmszcdmb) | 增值税特殊内容代码（增值税减免税政策代码表） | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | xfsgl | 消费税管理 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | xfszcyj | 消费税政策依据 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">21</font> | xfstsnrdm | 消费税特殊内容代码 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | gjz | 关键字 | mediumtext | | 否 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | sfhzx | 是否汇总项 | varchar | 1 | 是 | Y：是<br/>N：否 |
| <font style="color:rgb(0, 0, 0);">24</font> | dytjjbm | 对应统计局编码（2011年版）或国民行业代码 | mediumtext | | 否 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | hgjcksppm | 海关进出口商品品目 | mediumtext | | 否 |  |
| <font style="color:rgb(0, 0, 0);">26</font> | qyrq | 启用日期 | date | | 是 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">27</font> | tyrq | 停用日期 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">28</font> | hydm | 行业代码 | varchar | 4 | 否 | 主行业代码特定征收部门可空 |
| <font style="color:rgb(0, 0, 0);">29</font> | dydhy | 对应的行业 | varchar | 68 | 否 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | hydydzspm1 | 行业对应的征收品目一 | varchar | 9 | 否 |  |
| <font style="color:rgb(0, 0, 0);">31</font> | hydydzsmc1 | 行业对应的征收名称一 | varchar | 210 | 否 |  |
| <font style="color:rgb(0, 0, 0);">32</font> | hydydzspm2 | 行业对应的征收品目二 | varchar | 9 | 否 |  |
| <font style="color:rgb(0, 0, 0);">33</font> | hydydzsmc2 | 行业对应的征收名称二 | varchar | 210 | 否 |  |




#### 2.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"sjc": "时间戳",<br/>			"count": "总数量",<br/>			“ssbmList”: [<br/>				{<br/>                "fjbm": "父级编码",					<br/>					"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>					"tdyslxdm": "特定要素标签归类",<br/>					"cezs": "差额征税",<br/>					"bzs": "不征税",<br/>					"jzjtdm": "即征即退代码集合",<br/>					"sphfwmc": "商品和服务名称",<br/>					"sphfwfljc": "商品和服务分类简称",<br/>					"sm": "说明",<br/>					"zzssl": "增值税税率",<br/>					"zsl": "征收率",<br/>					"zzstsgl": "增值税特殊管理",<br/>					"zzszcyj": "增值税政策依据",<br/>					"zzstsnrdm": "增值税特殊内容代码（增值税减免税政策代码表）",<br/>					"xfsgl": "消费税管理",<br/>					"xfszcyj": "消费税政策依据",<br/>					"xfstsnrdm": "消费税特殊内容代码",<br/>					"gjz": "关键字",<br/>					"sfhzx": "是否汇总项",<br/>					"dytjjbm": "对应统计局编码（2011年版）或国民行业代码",<br/>					"hgjcksppm": "海关进出口商品品目",<br/>					"qyrq": "启用日期",<br/>					"tyrq": "停用日期",<br/>					“zspmList”: [<br/>						{	<br/>							"hydm": "行业代码",<br/>							"dydhy": "对应的行业",<br/>							"hydydzspm1": "行业对应的征收品目一",<br/>							"hydydzsmc1": "行业对应的征收名称一",<br/>							"hydydzspm2": "行业对应的征收品目二",<br/>							"hydydzsmc2": "行业对应的征收名称二"<br/>						}<br/>					]<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">3.查询可用税率信息</font>
#### 3.1接口说明
向企业提供查询可用税率信息的功能，企业可将查询的基本信息保存在本地。在开票时选择保存在本地的可用税率。

#### 3.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 3.3请求参数
无

#### 3.4请求报文示例
| {} |
| --- |


#### 3.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | count | 总数量 | number | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | csxz | 参数性质 | varchar | 2 | 是 | 1：税率<br/>2：征收率 |
| <font style="color:rgb(0, 0, 0);">5</font> | slzsl | 税率征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | yslbz | 原税率标志 | varchar | 1 | 是 | Y：是原税率<br/>N：非原税率 |
| <font style="color:rgb(0, 0, 0);">7</font> | dyysl | 对应原税率 | varchar | 150 | 否 | 百分比形式、逗号连接 |
| <font style="color:rgb(0, 0, 0);">8</font> | cszt | 参数状态 | varchar | 1 | 是 | 0：启用<br/>1：停用 |
| <font style="color:rgb(0, 0, 0);">9</font> | yxqq | 有效期起 | date | | 是 | 时间格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">10</font> | yxqz | 有效期止 | date | | 否 | 时间格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">11</font> | tyrq | 停用日期 | date | | 否 | 时间格式：<br/>yyyy-MM-dd |


#### 3.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"count": "总数量",<br/>			"slzslList": [<br/>				{<br/>					"csxz": "参数性质",<br/>					"slzsl": "税率征收率",<br/>					"yslbz": "原税率标志",<br/>					"dyysl": "对应原税率",<br/>					"cszt": "参数状态",<br/>					"yxqq": "有效期起",<br/>					"yxqz": "有效期止",<br/>					"tyrq": "停用日期"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |




### <font style="color:#1A1A1A;">4.铁路电子客票上传</font>
#### 4.1接口说明
给企业提供上传开具的铁路电子客票预发票功能，上传成功后给企业返回信息。

税务局端接收到企业上传的铁路电子客票后，依次校验企业是具备开票条件、发票信息是否合规、铁路电子客票号码是否合法，当校验不通过时，不接收企业上传的铁路电子客票，返回具体错误信息。每次上传最大票量为100张数字化电子发票。

#### 4.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 4.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | --- | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | fphm | 发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | lzfpbz | 蓝字发票标志 | varchar | 1 | 是 | 0：蓝字发票<br/>1：红字发票 |
| <font style="color:rgb(0, 0, 0);">3</font> | ptbh | 平台编号 | varchar | 20 | 是 | 直连单位ID |
| <font style="color:rgb(0, 0, 0);">4</font> | fppz | 发票票种 | varchar | 2 | 是 | 05：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">5</font> | tdys | 特定要素 | varchar | 2 | 是 | 21：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">6</font> | fpkjfsDm | 发票开具方式代码 | varchar | 1 | 是 | 4：第三方平台开票（乐企联用、他用开票）<br/>5：自建平台开票（乐企自用开票） |
| <font style="color:rgb(0, 0, 0);">7</font> | cezslxDm | 差额征税类型代码 | varchar | 2 | 否 | 空：非差额发票<br/>01：差额开票<br/>02：全额开票 |
| <font style="color:rgb(0, 0, 0);">8</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | xsfmc | (销售方)名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | xsfdz | 销售方地址 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | xsfdh | 销售方电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | xsfkhh | 销售方开户行 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | xsfzh | 销售方账号 | varchar | 50 | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | gmfmc | (购买方)名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">16</font> | gmfzrrbz | 购买方自然人标志 | varchar | 1 | 否 | Y：购买方是自然人<br/>N：购买方非自然人 |
| <font style="color:rgb(0, 0, 0);">17</font> | gmfdz | 购买方地址 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | gmfdh | 购买方电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | gmfkhh | 购买方开户行 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | gmfzh | 购买方账号 | varchar | 50 | 否 |  |
| <font style="color:rgb(0, 0, 0);">21</font> | gmfjbr | 购买方经办人 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | jbrsfzjhm | 购买方经办人证件号码 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | gmfjbrlxdh | 购买方经办人联系电话 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | hjje | 合计金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | hjse | 合计税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">26</font> | jshj | 价税合计 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">27</font> | jshjdx | 价税合计（大写） | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">28</font> | skyhmc | 收款银行名称 | varchar | 120 | 否 |  |
| <font style="color:rgb(0, 0, 0);">29</font> | skyhzh | 收款银行账号 | varchar | 100 | 否 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | jsfs | 结算方式 | varchar | 2 | 否 | 01：现金<br/>02：银行转账<br/>03：票据<br/>04：第三方支付<br/>05：预付卡<br/>99：其他 |
| <font style="color:rgb(0, 0, 0);">31</font> | kpr | 开票人 | varchar | 16 | 是 |  |
| <font style="color:rgb(0, 0, 0);">32</font> | kprzjhm | 开票人证件号码 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">33</font> | kprzjlx | 开票人证件类型 | varchar | 4 | 否 | 101：组织机构代码证<br/>102：营业执照<br/>103：税务登记证<br/>199：其他单位证件<br/>201：居民身份证<br/>202：军官证<br/>203：武警警官证<br/>204：士兵证<br/>205：军队离退休干部证<br/>206：残疾人证<br/>207：残疾军人证（1-8级）<br/>208：外国护照<br/>209：港澳同胞回乡证<br/>210：港澳居民来往内地通行证<br/>211：台胞证<br/>212：中华人民共和国往来港澳通行证<br/>213：台湾居民来往大陆通行证<br/>214：大陆居民往来台湾通行证<br/>215：外国人居留证<br/>216：外交官证<br/>217：使（领事）馆证<br/>218：海员证<br/>219：香港永久性居民身份证<br/>220：台湾身份证<br/>221：澳门特别行政区永久性居民身份证<br/>222：外国人身份证件<br/>223：高校毕业生自主创业证<br/>224：就业失业登记证<br/>225：退休证<br/>226：离休证<br/>227：中国护照<br/>228：城镇退役士兵自谋职业证<br/>229：随军家属身份证明<br/>230：中国人民解放军军官转业证书<br/>231：中国人民解放军义务兵退出现役证<br/>232：中国人民解放军士官退出现役证<br/>233：外国人永久居留身份证（外国人永久居留证）<br/>234：就业创业证<br/>235：香港特别行政区护照<br/>236：澳门特别行政区护照<br/>237：中华人民共和国港澳居民居住证<br/>238：中华人民共和国台湾居民居住证<br/>239：《中华人民共和国外国人工作许可证》（A类）<br/>240：《中华人民共和国外国人工作许可证》（B类）<br/>241：《中华人民共和国外国人工作许可证》（C类）<br/>291：出生医学证明<br/>299：其他个人证件 |
| <font style="color:rgb(0, 0, 0);">34</font> | dylzfphm | 开具红字发票对应的蓝字发票号码 | varchar | 20 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传；<br/>如果红冲的是税控发票，对应蓝字发票号码的填写规则为税控发票的发票代码+发票号码。 |
| <font style="color:rgb(0, 0, 0);">35</font> | hzqrxxdbh | 红字确认信息单编号 | varchar | 20 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传 |
| <font style="color:rgb(0, 0, 0);">36</font> | hzqrduuid | 红字确认单uuid | varchar | 32 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传 |
| <font style="color:rgb(0, 0, 0);">37</font> | bz | 备注 | varchar | 450 | 否 | 蓝票最长450位，红票最长382位。 |
| <font style="color:rgb(0, 0, 0);">38</font> | ip | 服务器地址 | varchar | 20 | 是 | 需自行采集开票申请设备 |
| <font style="color:rgb(0, 0, 0);">39</font> | macdz | mac地址 | char | 20 | 是 | 需自行采集开票申请设备 |
| <font style="color:rgb(0, 0, 0);">40</font> | cpuid | CPU序列号 | char | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">41</font> | zbxlh | 主板序列号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">42</font> | kprq | 开票日期 | datetime | | 是 | 格式：<br/>yyyy-MM-dd HH:mm:ss  |
| <font style="color:rgb(0, 0, 0);">43</font> | kpdwmc | 开票单位名称 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">44</font> | kpdwdm | 开票单位代码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">45</font> | ywlxmc | 业务类型名称 | varchar | 300 | 是 | 0：售票 <br/>1：退票（手续费）   2：改签（手续费） |
| <font style="color:rgb(0, 0, 0);">46</font> | cfz | 出发站 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">47</font> | cfzpy | 出发站拼音 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">48</font> | ddz | 到达站 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">49</font> | ddzpy | 到达站拼音 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">50</font> | cccc | 乘车车次 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">51</font> | rq | 日期 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">52</font> | cfsj1 | 出发时间 | varchar | 5 | 否 | 格式：<br/> HH:mm |
| <font style="color:rgb(0, 0, 0);">53</font> | tldzkppzmc | 铁路电子客票票种名称 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">54</font> | kttz | 空调特征 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">55</font> | xb | 席别 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">56</font> | yhbz | 优惠标识 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">57</font> | cx | 车厢 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">58</font> | xw | 席位 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">59</font> | zfje | 支付金额 | varchar | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">60</font> | ytje | 已退金额 | varchar | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">61</font> | yppj | 原票票价 | varchar | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">62</font> | ypcfz | 原票出发站 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">63</font> | ypddz | 原票到达站 | varchar | 60 | 否 |  |
| <font style="color:rgb(0, 0, 0);">64</font> | dzkph | 电子客票号 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">65</font> | sfzjlx | 身份证件类型 | varchar | 3 | 否 | 100：单位<br/>101：组织机构代码证<br/>102：营业执照<br/>103：税务登记证<br/>199：其他单位证件<br/>200：个人<br/>201：居民身份证<br/>202：军官证<br/>203：武警警官证<br/>204：士兵证<br/>205：军队离退休干部证<br/>206：残疾人证<br/>207：残疾军人证（1-8级）<br/>208：外国护照<br/>209：港澳同胞回乡证<br/>210：港澳居民来往内地通行证<br/>211：台胞证<br/>212：中华人民共和国往来港澳通行证<br/>213：台湾居民来往大陆通行证<br/>214：大陆居民往来台湾通行证<br/>215：外国人居留证<br/>216：外交官证<br/>217：使（领事）馆证<br/>218：海员证<br/>219：香港永久性居民身份证<br/>220：台湾身份证<br/>221：澳门特别行政区永久性居民身份证<br/>222：外国人身份证件<br/>223：高校毕业生自主创业证<br/>224：就业失业登记证<br/>225：退休证<br/>226：离休证<br/>227：中国护照<br/>228：城镇退役士兵自谋职业证<br/>229：随军家属身份证明<br/>230：中国人民解放军军官转业证书<br/>231：中国人民解放军义务兵退出现役证<br/>232：中国人民解放军士官退出现役证<br/>233：外国人永久居留身份证（外国人永久居留证）<br/>234：就业创业证<br/>235：香港特别行政区护照<br/>236：澳门特别行政区护照<br/>237：中华人民共和国港澳居民居住证<br/>238：中华人民共和国台湾居民居住证<br/>239：《中华人民共和国外国人工作许可证》（A类）<br/>240：《中华人民共和国外国人工作许可证》（B类）<br/>241：《中华人民共和国外国人工作许可证》（C类）<br/>291：出生医学证明<br/>299：其他个人证件 |
| <font style="color:rgb(0, 0, 0);">66</font> | zjhm | 证件号码 | varchar | 30 | 否 |  |
| <font style="color:rgb(0, 0, 0);">67</font> | xm | 姓名 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">68</font> | bsxxq1 | 标识信息区1 | varchar | 100 | 否 |  |
| <font style="color:rgb(0, 0, 0);">69</font> | bsxxq2 | 标识信息区2 | varchar | 100 | 否 |  |
| <font style="color:rgb(0, 0, 0);">70</font> | tsxxq | 提示信息区 | varchar | 400 | 否 |  |
| <font style="color:rgb(0, 0, 0);">71</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">72</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 否 | 红票必传 |
| <font style="color:rgb(0, 0, 0);">73</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">74</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">75</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">76</font> | se | 税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">77</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| <font style="color:rgb(0, 0, 0);">78</font> | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 | 拼装规则：“*商品服务简称（spfwjc）*”+“项目名称（xmmc）” |
| <font style="color:rgb(0, 0, 0);">79</font> | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |


#### 4.4请求报文示例
| [<br/>	{<br/>		"fphm": "发票号码",<br/>		"lzfpbz": "蓝字发票标志",<br/>		"ptbh": "平台编号",<br/>		"fppz": "发票票种",<br/>		"tdys": "特定要素",<br/>		"fpkjfsDm": "发票开具方式代码",<br/>		"cezslxDm": "差额征税类型代码",<br/>		"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>		"xsfmc": "（销售方）名称",<br/>		"xsfdz": "销售方地址",<br/>		"xsfdh": "销售方电话",<br/>		"xsfkhh": "销售方开户行",<br/>		"xsfzh": "销售方账号",<br/>		"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>		"gmfmc": "（购买方）名称",<br/>		"gmfdz": "购买方地址",<br/>		"gmfzrrbz": "购买方自然人标志",<br/>"gmfdh": "购买方电话",<br/>		"gmfkhh": "购买方开户行",<br/>		"gmfzh": "购买方账号",<br/>		"gmfjbr": "购买方经办人",<br/>		"jbrsfzjhm": "经办人身份证件号码",<br/>		"gmfjbrlxdh": "购买方经办人联系电话",<br/>		"hjje": "合计金额",<br/>		"hjse": "合计税额",<br/>		"jshj": "价税合计",<br/>		"jshjdx": "价税合计（大写）",<br/>		"skyhmc": "收款银行名称",<br/>		"skyhzh": "收款银行账号",<br/>		"jsfs": "结算方式",<br/>		"kpr": "开票人",<br/>		"kprzjhm": "开票人证件号码",<br/>		"kprzjlx": "开票人证件类型",<br/>		"dylzfphm": "开具红字发票对应的蓝字发票号码",<br/>		"hzqrxxdbh": "红字确认信息单编号",<br/>		"hzqrduuid": "红字确认单uuid",<br/>		"bz": "备注",<br/>		"ip": "服务器地址",<br/>		"macdz": "mac地址",<br/>		"cpuid": "CPU序列号",<br/>		"zbxlh": "主板序列号",<br/>		"kprq": "开票日期",<br/>		"xcxxList": [<br/>			{<br/>			   "mxxh": "明细序号",<br/>			   "dylzfpmxxh": "对应蓝字发票明细序号",<br/>				"kpdwmc": "开票单位名称",<br/>				"kpdwdm": "开票单位代码",<br/>				"ywlxmc": "业务类型名称",<br/>				"tldzkppzmc": "铁路电子客票票种名称",<br/>				"dzkph": "电子客票号",<br/>				"sfzjlx": "身份证件类型",<br/>				"zjhm": "证件号码",<br/>				"xm": "姓名",<br/>				"bsxxq1": "标识信息区1",<br/>				"bsxxq2": "标识信息区2",<br/>				"tsxxq": "提示信息区",<br/>				"cfz": "出发站",<br/>				"cfzpy": "出发站拼音",<br/>				"ddz": "到达站",<br/>				"ddzpy": "到达站拼音",<br/>				"cccc": "乘车车次",<br/>				"rq": "日期",<br/>				"cfsj1": "出发时间",<br/>				"kttz": "空调特征",<br/>				"xb": "席别",<br/>				"cx": "车厢",<br/>				"xw": "席位",<br/>				"yhbz": "优惠标识",<br/>				"zfje": "支付金额",<br/>				"ytje": "已退金额",<br/>				"yppj": "原票票价",<br/>				"ypcfz": "原票出发站",<br/>				"ypddz": "原票到达站",<br/>				"xmmc": "项目名称",<br/>				"je": "金额（不含税）",<br/>				"slv": "增值税税率/征收率",<br/>				"se": "税额",<br/>				"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>				"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>				"spfwjc": "商品服务简称"<br/>			}<br/>		]<br/>	}<br/>] |
| --- |


生产报文示例

| [<br/>	{<br/>		"fphm": "25519*********103003",<br/>		"lzfpbz": "0",<br/>		"ptbh": "5d2cff**********b7a3",<br/>		"fppz": "05",<br/>		"tdys": "21",<br/>		"fpkjfsDm": "6",<br/>		"cezslxDm": "",<br/>		"xsfnsrsbh": "9144**********093N",<br/>		"xsfmc": "广州********设计室",<br/>      "xsfdz": "广东省***********厂房",<br/>      "xsfdh": "110****2888",<br/>      "xsfkhh": "建设银行*****支行",<br/>      "xsfzh": "811070********00501",<br/>		"gmfzrrbz":"Y",<br/>		"gmfnsrsbh": "340822********6225",<br/>		"gmfmc": "陈**（个人）",<br/>		"gmfdz": "内蒙古********小区",<br/>       "gmfdh": "153****4321",<br/>       "gmfkhh": "中信银行",<br/>       "gmfzh": "811070**********502",<br/>	    "gmfjbr": "付**",<br/>		"jbrsfzjhm": "1310**********1335",<br/>		"gmfjbrlxdh": "155****0791",	<br/>		"hjje": "1000.00",<br/>		"hjse": "30.00",<br/>		"jshj": "1030.00",<br/>		"jshjdx": "壹佰零叁元",<br/>		"skyhmc": "中信银行*******支行",<br/>		"skyhzh": "811070**********502",<br/>		"jsfs": "02",<br/>		"kpr": "牛**",<br/>		"kprzjhm": "4105**********8510",<br/>		"kprzjlx": "201",<br/>		"dylzfphm": "",<br/>       "hzqrxxdbh": "",<br/>		"hzqrduuid": "",<br/>		"bz": "开具数电乐企铁路发票",<br/>       "ip": "***.***.***.**",<br/>       "macdz": "SDFSDF2WQ3424SWER",<br/>       "cpuid": "WERWER234234234",<br/>       "zbxlh": "WEREWR3243242",<br/>		"kprq": "2025-05-28 12:00:00",<br/>		"xcxxList": [<br/>			{<br/>			   "mxxh": "1",<br/>			   "dylzfpmxxh": "",<br/>				"kpdwmc": "成都铁路局",<br/>				"kpdwdm": "CDTL03",<br/>				"ywlxmc": "0",<br/>				"tldzkppzmc": "全",<br/>				"dzkph": "D1****4321",<br/>              "sfzjlx":"201",<br/>				"zjhm": "340822********6225",<br/>              "xm": "陈**",<br/>				"cfz": "成都北",<br/>				"cfzpy": "ChengDuBei",<br/>				"ddz": "北京南",<br/>				"ddzpy": "BeiJingNan",<br/>				"cccc": "G306",<br/>				"rq": "2025-02-20",<br/>				"cfsj1": "12:00",<br/>				"kttz": "室内循环",<br/>				"xb": "一等座",<br/>				"cx": "03",<br/>				"xw": "09C",<br/>				"yhbz": "",<br/>				"zfje": "1030.00",<br/>				"ytje": "0.00",<br/>				"yppj": "1030.00",<br/>				"ypcfz": "成都",<br/>				"ypddz": "北京",<br/>			 	"bsxxq1": "蓝票",<br/>				"bsxxq2": "标2",<br/>				"tsxxq": "买票请到12306 发货请到95306 ",<br/>				"xmmc": "票价",<br/>				"je": "1000.00",<br/>				"slv": "0.03",<br/>				"se": "30.00",<br/>				"sphfwssflhbbm": "3010101010100000000",<br/>				"hwhyslwfwmc": "*运输服务*票价",<br/>				"spfwjc": "运输服务"<br/>			}<br/>		]<br/>	}<br/>]<br/> |
| --- |


#### 4.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| :---: | --- | --- | --- | :---: | :---: | --- |
| 1.  | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 1.  | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 1.  | sllsh | 受理流水号 | String | 40 | 是 |  |


**错误码**

| **序号** | returncode | **说明** |
| :---: | --- | --- |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1001</font> | <font style="color:rgb(0, 0, 0);">请求列表发票号码重复</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1002</font> | <font style="color:rgb(0, 0, 0);">发票输入购销方信息与身份上下文不一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1012</font> | <font style="color:rgb(0, 0, 0);">发送消息队列异常</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1013</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，单行金额应满足|单价*数量-金额|<=0.01</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1014</font> | <font style="color:rgb(0, 0, 0);">汇总金额应满足|所有商品行不含税金额之和-合计金额|<=0.01</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1015</font> | <font style="color:rgb(0, 0, 0);">价税合计应满足|合计金额+合计税额=价税合计|</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1016</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，单行税额应满足| 不含税金额 * 税率（不含税税率） - 税额 |<=0.06</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1017</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，单行税额应满足|（含税金额-扣除金额）÷（1+税率） * 税率- 税额 |<=0.06</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1018</font> | <font style="color:rgb(0, 0, 0);">汇总税额应满足| 不含税金额 * 税率（不含税税率）（第1行）+......+不含税金额 * 税率（第N行）-税额合计|<=1.27</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1019</font> | <font style="color:rgb(0, 0, 0);">汇总税额应满足|（含税金额-扣除金额）÷（1+税率） * 税率（第1行）+……（含税金额-扣除金额）÷（1+税率） * 税率（第N行）-税额合计 |<= 1.27</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1020</font> | <font style="color:rgb(0, 0, 0);">发票明细行行号顺序错误</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1021</font> | <font style="color:rgb(0, 0, 0);">航段序号顺序错误</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1022</font> | <font style="color:rgb(0, 0, 0);">蓝字发票上传红字发票参数应为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1023</font> | <font style="color:rgb(0, 0, 0);">发票明细行行号必须为数字</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1024</font> | <font style="color:rgb(0, 0, 0);">红字发票上传对应蓝字发票号码不能为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1025</font> | <font style="color:rgb(0, 0, 0);">红字发票上传红字确认信息不能为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1026</font> | <font style="color:rgb(0, 0, 0);">红字发票上传对应蓝字发票明细序号不能为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1027</font> | <font style="color:rgb(0, 0, 0);">单位非空数量单价应不为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1028</font> | <font style="color:rgb(0, 0, 0);">数量单价应同时为空或同时不为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1031</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细未获取到对应行号的确认单明细</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1032</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细对应蓝字发票明细序号不一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1033</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细商品编码不一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1034</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细税率不一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1035</font> | <font style="color:rgb(0, 0, 0);">赋码段信息为空，请检查</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1036</font> | <font style="color:rgb(0, 0, 0);">发票号码不在可用申请的赋码段内</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1037</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，差额开票扣除额不可为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1038</font> | <font style="color:rgb(0, 0, 0);">合计金额价税合计应为正数,合计税额应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1039</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，正常行或被折扣行金额含税金额应为正数,税额应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1040</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，金额税额含税金额应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1041</font> | <font style="color:rgb(0, 0, 0);">合计金额价税合计应为负数,合计税额应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1042</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，金额含税金额应为负数,税额应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1043</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，金额税额含税金额应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1044</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，单价应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1045</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，数量应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1046</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，数量应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1047</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，单价应大于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1048</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，数量应大于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1049</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，数量应小于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1050</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，红票不应有折扣行或被折扣行</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1051</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，含税金额=税额+金额，不能有误差</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1052</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，负数发票扣除额应为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1053</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行的商品名称应与原发票行一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1054</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行上一行必须为被折扣行!</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1055</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，被折扣行的下一行必须为折扣行!</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1073</font> | <font style="color:rgb(0, 0, 0);">直连单位纳税人识别号不能为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1075</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行的金额含税金额应为负数,税额应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1076</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行的规格型号单位数量单价应为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1077</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行的商品编码应与原发票行一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1078</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，扣除额应大于0小于等于含税金额</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1079</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行金额应小于等于被折扣行金额</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1080</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，含税金额反算金额误差应小于等于0.01</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1081</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行税额应小于等于被折扣行税额</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1082</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，税率应大于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1083</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，普通征税扣除额应为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1084</font> | <font style="color:rgb(0, 0, 0);">蓝字发票上传对应蓝字发票明细序号应为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1085</font> | <font style="color:rgb(0, 0, 0);">差额开票不支持折扣行</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1086</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，折扣行的税率应与原发票行一致</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1087</font> | <font style="color:rgb(0, 0, 0);">解锁红字确认单对应蓝字发票失败</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1088</font> | <font style="color:rgb(0, 0, 0);">单位数量单价应同时为空或同时不为空</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1089</font> | <font style="color:rgb(0, 0, 0);">发票明细应为票价、燃油附加费、民航发展基金、其他税费</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1090</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，金额税额应小于等于0</font> |
| 1.  | <font style="color:rgb(0, 0, 0);">BI1091</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的商品，金额税额应大于等于0</font> |


#### 4.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"sllsh": "受理流水号"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">5.查询铁路电子客票上传结果</font>
#### 5.1接口说明
给企业提供查询铁路电子客票开具状态的功能，预发票上传后由税务局端对发票再次进行校验，如果校验通过则表明发票开具成功。此时企业根据上传返回的信息查询发票开具的状态。

发票上传结果只能在发票上传后12小时内查询，如果超过12小时只能重新上传发票再获取上传结果。

#### 5.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 5.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | sllsh | 受理流水号 | String | 40 | 是 |  |


#### 5.4请求报文示例
| {<br/> "sllsh": "受理流水号"<br/>} |
| --- |


#### 5.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | fphm | 发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | status | 开票状态 | varchar | | 是 | 00：上传成功<br/>01：发票上传处理中<br/>02：上传失败<br/>03：发票号码在数据库已存在 |
| <font style="color:rgb(0, 0, 0);">5</font> | Message | 详细信息 | varchar | 500 | 否 | 详细信息 |
| <font style="color:rgb(0, 0, 0);">6</font> | Code | 错误码 | varchar | 20 | 否 | 未查询到上传结果会返回固定的Code值 |


**错误码**

| **序号** | returncode | **说明** |
| --- | --- | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">BI1000</font> | <font style="color:rgb(0, 0, 0);">电票平台更新红字确认单失败，请联系管理员处理</font> |
| <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">BI1003</font> | <font style="color:rgb(0, 0, 0);">发票号码格式错误,第3、4位是"44",第5位是8</font> |
| <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">BI1004</font> | <font style="color:rgb(0, 0, 0);">授信额度不在有效期内</font> |
| <font style="color:rgb(0, 0, 0);">4</font> | <font style="color:rgb(0, 0, 0);">BI1005</font> | <font style="color:rgb(0, 0, 0);">已下载剩余授信额度不足</font> |
| <font style="color:rgb(0, 0, 0);">5</font> | <font style="color:rgb(0, 0, 0);">BI1006</font> | <font style="color:rgb(0, 0, 0);">授信额度更新失败</font> |
| <font style="color:rgb(0, 0, 0);">6</font> | <font style="color:rgb(0, 0, 0);">BI1007</font> | <font style="color:rgb(0, 0, 0);">业务所属期为%s授信额度台账为空</font> |
| <font style="color:rgb(0, 0, 0);">7</font> | <font style="color:rgb(0, 0, 0);">BI1008</font> | <font style="color:rgb(0, 0, 0);">Ⅰ类（高风险）纳税人禁止开票</font> |
| <font style="color:rgb(0, 0, 0);">8</font> | <font style="color:rgb(0, 0, 0);">BI1009</font> | <font style="color:rgb(0, 0, 0);">纳税人预警级别为红色禁止开票</font> |
| <font style="color:rgb(0, 0, 0);">9</font> | <font style="color:rgb(0, 0, 0);">BI1010</font> | <font style="color:rgb(0, 0, 0);">风险纳税人禁止开票</font> |
| <font style="color:rgb(0, 0, 0);">10</font> | <font style="color:rgb(0, 0, 0);">BI1011</font> | <font style="color:rgb(0, 0, 0);">纳税人状态不正常禁止开票</font> |
| <font style="color:rgb(0, 0, 0);">11</font> | <font style="color:rgb(0, 0, 0);">BI1029</font> | <font style="color:rgb(0, 0, 0);">红字发票明细与确认单不一致</font> |
| <font style="color:rgb(0, 0, 0);">12</font> | <font style="color:rgb(0, 0, 0);">BI1030</font> | <font style="color:rgb(0, 0, 0);">红字发票明细数量与确认单不一致</font> |
| <font style="color:rgb(0, 0, 0);">13</font> | <font style="color:rgb(0, 0, 0);">BI1056</font> | <font style="color:rgb(0, 0, 0);">查询红字确认单异常</font> |
| <font style="color:rgb(0, 0, 0);">14</font> | <font style="color:rgb(0, 0, 0);">BI1057</font> | <font style="color:rgb(0, 0, 0);">红字确认单状态异常，无法开票</font> |
| <font style="color:rgb(0, 0, 0);">15</font> | <font style="color:rgb(0, 0, 0);">BI1058</font> | <font style="color:rgb(0, 0, 0);">红字确认单与发票购销方信息不一致</font> |
| <font style="color:rgb(0, 0, 0);">16</font> | <font style="color:rgb(0, 0, 0);">BI1059</font> | <font style="color:rgb(0, 0, 0);">红字确认单与发票金额税额信息不一致</font> |
| <font style="color:rgb(0, 0, 0);">17</font> | <font style="color:rgb(0, 0, 0);">BI1060</font> | <font style="color:rgb(0, 0, 0);">红字信息单发票票种不匹配，不允许开具</font> |
| <font style="color:rgb(0, 0, 0);">18</font> | <font style="color:rgb(0, 0, 0);">BI1061</font> | <font style="color:rgb(0, 0, 0);">红字信息单编号不匹配，不可开具</font> |
| <font style="color:rgb(0, 0, 0);">19</font> | <font style="color:rgb(0, 0, 0);">BI1062</font> | <font style="color:rgb(0, 0, 0);">原蓝字发票号码与红字信息单号码不一致，不可开具</font> |
| <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">BI1063</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细项目名称不一致</font> |
| <font style="color:rgb(0, 0, 0);">21</font> | <font style="color:rgb(0, 0, 0);">BI1064</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细规格型号不一致</font> |
| <font style="color:rgb(0, 0, 0);">22</font> | <font style="color:rgb(0, 0, 0);">BI1065</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细单位不一致</font> |
| <font style="color:rgb(0, 0, 0);">23</font> | <font style="color:rgb(0, 0, 0);">BI1066</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细数量不一致</font> |
| <font style="color:rgb(0, 0, 0);">24</font> | <font style="color:rgb(0, 0, 0);">BI1067</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细单价不一致</font> |
| <font style="color:rgb(0, 0, 0);">25</font> | <font style="color:rgb(0, 0, 0);">BI1068</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细金额不一致</font> |
| <font style="color:rgb(0, 0, 0);">26</font> | <font style="color:rgb(0, 0, 0);">BI1069</font> | <font style="color:rgb(0, 0, 0);">行号为[ %s ]的发票明细与确认单明细税额不一致</font> |
| <font style="color:rgb(0, 0, 0);">27</font> | <font style="color:rgb(0, 0, 0);">BI1070</font> | <font style="color:rgb(0, 0, 0);">红字信息单无效，不允许开具</font> |
| <font style="color:rgb(0, 0, 0);">28</font> | <font style="color:rgb(0, 0, 0);">BI1071</font> | <font style="color:rgb(0, 0, 0);">红字信息单已使用，不可开具</font> |
| <font style="color:rgb(0, 0, 0);">29</font> | <font style="color:rgb(0, 0, 0);">BI1072</font> | <font style="color:rgb(0, 0, 0);">税收编码缓存获取失败</font> |
| <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">BI1074</font> | <font style="color:rgb(0, 0, 0);">获取蓝字开票失败</font> |
| <font style="color:rgb(0, 0, 0);">31</font> | <font style="color:rgb(0, 0, 0);">BI1092</font> | <font style="color:rgb(0, 0, 0);">发票号码格式错误,第5位应是9</font> |
| <font style="color:rgb(0, 0, 0);">32</font> | <font style="color:rgb(0, 0, 0);">BI2000</font> | <font style="color:rgb(0, 0, 0);">未查询到发票上传结果，请稍后再试</font> |




#### 5.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"resultList": [<br/>				{<br/>					"fphm": "发票号码1",<br/>					"status": "上传状态",<br/>					"message": "详细信息"<br/>				}, {<br/>					"fphm": "发票号码2",<br/>					"status": "上传状态",<br/>					"message": "详细信息"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">6.铁路电子客票红字确认单申请</font>
#### 6.1接口说明
给企业提供铁路电子客票红字确认单开具功能。

#### 6.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 6.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | lrfsf | 录入方身份 | varchar | 2 | 是 | 0：销方 |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfmc | 销售方名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | gmfnsrsbh | 购买方纳税人识别号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | gmfmc | 购买方名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfphm | 蓝字发票号码 | String | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | lzkprq | 蓝字发票开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">8</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 是 | 05：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">11</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 21：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">12</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | chyyDm | 红字发票冲红原因代码 | String | 2 | 是 | 01：开票有误<br/>03：服务中止<br/>04：销售折让 |
| <font style="color:rgb(0, 0, 0);">15</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">16</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | ggxh | 规格型号 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | dw | 单位 | varchar | 300 | 否 | 必须与蓝票“单位”保持一致。 |
| <font style="color:rgb(0, 0, 0);">20</font> | sl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">21</font> | dj | 单价 | varchar | 25 | 否 | 如“单位”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">22</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | se | 税额 | number | 18，2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">25</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 否 |  |
| <font style="color:rgb(0, 0, 0);">26</font> | hwhyslwfwmc | <font style="color:#000000;">货物或应税劳务、服务名称</font> | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">27</font> | spfwjc | <font style="color:#000000;">商品服务简称</font> | varchar | 120 | 是 |  |


#### 6.4请求报文示例
| {<br/>	"lrfsf": "录入方身份",<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfmc": "销售方名称",<br/>	"gmfnsrsbh": "购买方纳税人识别号",<br/>	"gmfmc": "购买方名称",<br/>	"lzfphm": "蓝字发票发票号码",<br/>	"lzkprq": "蓝字发票开票日期",<br/>	"lzhjje": "蓝字发票合计金额",<br/>	"lzhjse": "蓝字发票合计税额",<br/>	"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>	"hzcxje": "红字冲销金额",<br/>	"hzcxse": "红字冲销税额",<br/>	"chyyDm": "红字发票冲红原因代码",<br/>	"hzqrdmxList": [<br/>		{<br/>			"mxxh": "明细序号",<br/>			"dylzfpmxxh": "对应蓝字发票明细序号",<br/>			"xmmc": "项目名称",<br/>          "ggxh": "规格型号",<br/>			"dw": "单位",<br/>			"sl": "数量",<br/>			"dj": "单价",<br/>			"je": "金额（不含税）",<br/>			"slv": "增值税税率/征收率",<br/>			"se": "税额",<br/>			"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>			"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>			"spfwjc": "商品服务简称"<br/>		}<br/>	]<br/>} |
| --- |


生产报文示例

| {<br/>	"lrfsf": "0",<br/>	"xsfnsrsbh": "914401********093N",<br/>	"xsfmc": "广州市********设计室",<br/>	"gmfnsrsbh": "911502********NK5H",<br/>	"gmfmc": "包头市********任公司",<br/>	"lzfphm": "255190000********330",<br/>	"lzkprq": "2025-07-13 12:00:00",<br/>	"lzhjje": "1000.00",<br/>	"lzhjse": "30.00",<br/>   "lzfppzDm":"05",<br/>	"lzfpTdyslxDm": "21",<br/>	"hzcxje": "-1000.00",<br/>	"hzcxse": "-30.00",<br/>	"chyyDm": "01",<br/>	"hzqrdmxList": [<br/>		{<br/>			"mxxh": "1",<br/>			"dylzfpmxxh": "1",<br/>			"xmmc": "票价",<br/>          "ggxh": "",<br/>          "dw": "",<br/>			"sl": "",<br/>			"dj": "",<br/>			"je": "-1000.00",<br/>			"slv": "0.03",<br/>			"se": "-30.00",<br/>			"sphfwssflhbbm": "3010101010100000000",<br/>			"hwhyslwfwmc": "*运输服务*票价",<br/>			"spfwjc": "运输服务"<br/>		}<br/>	]<br/>} |
| :--- |


#### 6.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>21：未找到蓝字发票<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | Code | 错误代码 | varchar | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | Message | 错误说明 | varchar | 500 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | hzfpxxqrdbh | 红字确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | hzqrxxztDm | 红字确认单状态 | varchar | 2 | 是 | 01：无需确认<br/>02：销方录入待购方确认 |


**错误码**

| **序号** | returncode | **说明** |
| --- | --- | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">RI1000</font> | <font style="color:rgb(0, 0, 0);">红字确认单对应蓝字发票已锁定,蓝字发票号码：[%s]</font> |
| <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">RI1001</font> | <font style="color:rgb(0, 0, 0);">红字确认单申请更新发票异常表错误</font> |
| <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">RI1003</font> | <font style="color:rgb(0, 0, 0);">税率不能为负数</font> |
| <font style="color:rgb(0, 0, 0);">4</font> | <font style="color:rgb(0, 0, 0);">RI1004</font> | <font style="color:rgb(0, 0, 0);">红字冲销金额应满足-|所有商品行金额之和|<=0.01</font> |
| <font style="color:rgb(0, 0, 0);">5</font> | <font style="color:rgb(0, 0, 0);">RI1005</font> | <font style="color:rgb(0, 0, 0);">红字冲销金额(或税额)不能大于蓝字发票金额（或税额）</font> |
| <font style="color:rgb(0, 0, 0);">6</font> | <font style="color:rgb(0, 0, 0);">RI1006</font> | <font style="color:rgb(0, 0, 0);">红字确认单对应蓝字发票不是蓝票</font> |
| <font style="color:rgb(0, 0, 0);">7</font> | <font style="color:rgb(0, 0, 0);">RI1007</font> | <font style="color:rgb(0, 0, 0);">商品数量不是数字</font> |
| <font style="color:rgb(0, 0, 0);">8</font> | <font style="color:rgb(0, 0, 0);">RI1008</font> | <font style="color:rgb(0, 0, 0);">商品数量应小于0</font> |
| <font style="color:rgb(0, 0, 0);">9</font> | <font style="color:rgb(0, 0, 0);">RI1009</font> | <font style="color:rgb(0, 0, 0);">商品数量应小于等于0</font> |
| <font style="color:rgb(0, 0, 0);">10</font> | <font style="color:rgb(0, 0, 0);">RI1010</font> | <font style="color:rgb(0, 0, 0);">商品单价不是数字</font> |
| <font style="color:rgb(0, 0, 0);">11</font> | <font style="color:rgb(0, 0, 0);">RI1011</font> | <font style="color:rgb(0, 0, 0);">商品单价应大于0</font> |
| <font style="color:rgb(0, 0, 0);">12</font> | <font style="color:rgb(0, 0, 0);">RI1012</font> | <font style="color:rgb(0, 0, 0);">商品单价应大于等于0</font> |
| <font style="color:rgb(0, 0, 0);">13</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">发票存在进行中的红字通知单</font> |
| <font style="color:rgb(0, 0, 0);">14</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">该蓝字发票存在换开记录，无法进行红冲</font> |
| <font style="color:rgb(0, 0, 0);">15</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单销售方纳税人识别号与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">16</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单销售方纳税人名称与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">17</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单购买方纳税人识别号与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">18</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单购买方纳税人名称与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">19</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单蓝字发票票种与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单蓝字发票合计金额与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">21</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次开具通知单蓝字发票合计税额与原蓝字发票中不一致,请检查</font> |
| <font style="color:rgb(0, 0, 0);">22</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中蓝字开票日期与原蓝字发票开票日期不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">23</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中存在蓝字明细序号与原蓝字发票中无法对应的明细数据,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">24</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,规格型号为空,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">25</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,规格型号与原蓝字发票不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">26</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,商品和服务税收分类合并编码与原蓝字发票不符,请检查</font> |
| <font style="color:rgb(0, 0, 0);">27</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,商品服务简称与原蓝字发票不符,请检查</font> |
| <font style="color:rgb(0, 0, 0);">28</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,项目名称与原蓝字发票不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">29</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,货物或应税劳务、服务名称与原蓝字发票不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,单位与原蓝字发票不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">31</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,税率与原蓝字发票不符,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">32</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,发票商品数量大于原蓝字发票商品数量,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">33</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">确认单中第X条明细中,发票商品单价大于原蓝字发票商品单价,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">34</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细中第X行单价x数量所得金额与对应行金额不一致,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">35</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细中第X行金额x税率所得税额与对应行税额不一致,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">36</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细中第X行的商品服务编码不允许冲红原因选择服务终止!</font> |
| <font style="color:rgb(0, 0, 0);">37</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细中第X行的商品服务编码不允许冲红原因选择销货退回!</font> |
| <font style="color:rgb(0, 0, 0);">38</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">根据蓝字发票的增值税用途标签判断，该蓝票不允许红冲!</font> |
| <font style="color:rgb(0, 0, 0);">39</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">蓝字发票的增值税用途标签为X,不允许进行红冲!</font> |
| <font style="color:rgb(0, 0, 0);">40</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">蓝字发票的增值税用途标签为已使用，不允许进行红冲！</font> |
| <font style="color:rgb(0, 0, 0);">41</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">当前发票只能由购买方发起红字确认单!</font> |
| <font style="color:rgb(0, 0, 0);">42</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">该张发票未做用途确认,不允许购买方发起红冲</font> |
| <font style="color:rgb(0, 0, 0);">43</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">对方已经注销或非正常无法进行确认!</font> |
| <font style="color:rgb(0, 0, 0);">44</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">此蓝票存在红冲历史记录，但红字发票数据正在同步中，请稍后重试</font> |
| <font style="color:rgb(0, 0, 0);">45</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细金额存在正数值,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">46</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细税额存在正数值,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">47</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细金额合计与红字冲销金额不一致,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">48</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲明细税额合计与红字冲销税额不一致,请检查!</font> |
| <font style="color:rgb(0, 0, 0);">49</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲金额大于蓝字发票可红冲金额,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">50</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">本次红冲税额大于蓝字发票可红冲税额,请检查！</font> |
| <font style="color:rgb(0, 0, 0);">51</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">该发票未使用,只可全额红冲！</font> |
| <font style="color:rgb(0, 0, 0);">52</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">该发票未使用,只可全额红冲！</font> |
| <font style="color:rgb(0, 0, 0);">53</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">差额开票不允许部分红冲！</font> |
| <font style="color:rgb(0, 0, 0);">54</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">冲红原因选择开票有误不允许部分红冲！</font> |
| <font style="color:rgb(0, 0, 0);">55</font> | <font style="color:rgb(0, 0, 0);">N</font> | <font style="color:rgb(0, 0, 0);">保存成功</font> |


#### 6.6返回报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzfpxxqrdbh": "红字确认单编号",<br/>			"uuid": "红字确认单UUID",<br/>			"hzqrxxztDm": "红字确认单状态"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">7.</font>发票用途状态信息查询
#### 7.1接口说明
企业业务系统通过此接口查询单张发票状态、红字开具确认状态、发票用途等信息。此接口用途为辅助乐企开票企业发起红字确认单申请时的业务校验，实际以生成红字确认单时的业务校验结果为准。

发票用途状态信息查询结果仅供企业参考，在综服平台进行发票勾选的企业，其查询到的发票状态可能存在延时问题。

#### 7.2请求方式
请求方式为POST

path 指该参数为路径参数

query 指该参数需在请求URL传参

body 指该参数需在请求JSON传参

#### 7.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | fplx | 发票类型 | String | 2 | 是 | 01：增值税专用发票<br/>02：货物运输业增值税专用发票<br/>03：机动车销售统一发票<br/>04：增值税普通发票<br/>08：增值税电子专用发票<br/>10：增值税电子普通发票<br/>11：卷式发票<br/>14：通行费发票<br/>15：二手车销售统一发票<br/>81：电子发票（增值税专用发票）<br/>82：电子发票（普通发票）<br/>85：纸质发票（增值税专用发票）<br/>86：纸质发票（普通发票）<br/>51：电子发票（铁路电子客票）<br/>61：电子发票（航空运输客票电子行程单）<br/>83：机动车销售电子统一发票<br/>84：二手车销售电子统一发票<br/>87：纸质发票（机动车销售统一发票）<br/>88：纸质发票（二手车销售统一发票） |
| 2 | fpdm | 发票代码 | String | 12 | 否 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票代码，其他发票类型无需传入 |
| 3 | fphm | 发票号码 | String | 20 | 是 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票号码<br/>发票类型为：51、61、81、82、83、84、85、86、87、88传20位数字化电子发票号码 |
| 4 | kprq | 开票日期 | String | 8 | 是 | YYYYMMDD |


#### 7.4请求报文示例
| {<br/>	"fplx": "发票类型",<br/>	"fpdm": "发票代码",<br/>	"fphm": "发票号码",<br/>	"kprq": "开票日期"<br/>} |
| --- |


#### 7.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照“六、附件：1.返回码代码表” |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | fpdm | 发票代码 | String | 12 | 是 | <font style="color:#000000;">数字化电子发票发票代码可为空</font> |
| 4 | fphm | 发票号码 | String | 20 | 是 | <font style="color:#000000;">数字化电子发票，发票号码20位</font> |
| 5 | kprq | 开票日期 | String | 19 | 是 | YYYY-MM-DD HH:mm:ss |
| 6 | fpzt | 发票状态 | String | 1 | 否 | 0：正常<br/>2：作废<br/>3：已红冲<br/>7：部分红冲<br/>8：全额冲红 |
| 7 | ycpzzt | 异常凭证状态 | String | 1 | 否 | 01：正常<br/>02：异常凭证<br/>03：疑似异常凭证 |
| 8 | hzsdbs | 红字锁定标识 | String | 1 | 否 | Y：锁定<br/>N：未锁定 |
| 9 | fpyt | 发票用途 | String | 2 | 否 | 0：未使用<br/>1：已申请抵扣<br/>2：已申请退税<br/>3：已申请代办退税<br/>4：已勾选不抵扣（历史数据）<br/>5：已申请代办退税（历史数据）<br/>6：已申请不抵扣<br/>7：内销转出口<br/>8：出口转内销<br/>9：准予退税<br/>10：不予退税<br/>11：冬奥退税 |
| 10 | rzzt | 入账状态 | String | 2 | 否 | 01：未入账<br/>02：已入账<br/>03：已入账撤销 |
| 11 | cpyycbs | 成品油异常标识 | String | 1 | 否 | 9：正常<br/>1：成品油单价异常<br/>2：成品油超库存异常<br/>8：正常，需全额红冲 |
| 12 | cktsldm | 出口退税类代码 | String | 2 | 否 | 01：增值税专用发票可用于代办退税标签（仅用于代办退税） |
| 13 | zzsyhyt | 增值税优惠用途（农产品加计扣除） | String | 2 | 否 | 0：未使用 <br/>1：全部项目加计 <br/>2：全部项目不加计 <br/>3：部分项目加计 |
| 14 | xfsyt | 消费税用途 | String | 2 | 否 | 00：未勾选库存<br/>01：已勾选库存 |
| 15 | jdcycbs | 机动车异常标识 | String | 1 | 否 | 0：无风险<br/>1：低风险<br/>2：中风险<br/>3：高风险 |
| 16 | skssq | 税款所属期 | String | 6 | 否 | 返回格式：yyyymm |


#### 7.6返回报文示例
| {<br/>	"Response": {<br/>		"RequestId": "系统自动生成ID",<br/>		"Data": {<br/>			"returncode": "返回码",<br/>			"returnmsg": "返回信息",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"kprq": "开票日期",<br/>			"fpzt": "发票状态",<br/>			"ycpzzt": "异常凭证状态",<br/>			"hzsdbs": "红字锁定标识",<br/>			"fpyt": "发票用途",<br/>			"rzzt": "入账状态",<br/>			"cpyycbs": "成品油异常标识",<br/>			"cktsldm": "出口退税类代码",<br/>			"zzsyhyt": "增值税优惠用途（农产品加计扣除）",<br/>			"xfsyt": "消费税用途",<br/>			"jdcycbs": "机动车异常标识",<br/>			"skssq": "税款所属期"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error": {<br/>			"Code": "01",<br/>			"Message": "错误说明"<br/>		}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">8.查询铁路电子客票红字确认单列表信息</font>
#### 8.1接口说明
向企业提供查询铁路电子客票红字确认单列表信息的功能，企业可通过购买方纳税人识别号、销售方纳税人识别号、蓝字发票号码、录入日期起、录入日期止等条件查询铁路电子客票红字确认单列表信息，并将查询的结果保存在本地。使用此信息可以在申请铁路电子客票红字确认单时校验蓝字铁路电子客票是否可以红冲；在开具红字铁路电子客票时校验是否有铁路电子客票红字确认单。

#### 8.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 8.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | :---: | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | yhjslx | 用户角色类型 | varchar | 2 | 是 | 0：销方 |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为销方，必录 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfmc | （销售方）名称 | varchar | 300 | 否 | 条件必录，作为销方，必录 |
| <font style="color:rgb(0, 0, 0);">4</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为购方，必录 |
| <font style="color:rgb(0, 0, 0);">5</font> | gmfmc | （购买方）名称 | varchar | 300 | 否 | 条件必录，作为购方，必录 |
| <font style="color:rgb(0, 0, 0);">6</font> | lrfsf | 录入方身份 | varchar | 2 | 否 | 0：销方<br/>1：购方 |
| <font style="color:rgb(0, 0, 0);">7</font> | lrrqq | 录入日期起 | date | | 否 | yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">8</font> | lrrqz | 录入日期止 | date | | 否 | yyyy-MM-dd |
| <font style="color:rgb(0, 0, 0);">9</font> | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 否 | 01：无需确认<br/>02：销方录入待购方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| <font style="color:rgb(0, 0, 0);">11</font> | fppzDm | 发票票种代码 | varchar | 2 | 否 | 01: 增值税专用发票<br/>02: 普通发票<br/>03: 机动车统一销售发票<br/>04: 二手车统一销售发票<br/>05：铁路电子客票<br/>06：航空运输电子客票行程单 |
| <font style="color:rgb(0, 0, 0);">12</font> | pageNumber | 页码 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | pageSize | 每页数量 | number | 10 | 否 |  |


#### 8.4请求报文示例
| {<br/>	"yhjslx": "用户角色类型",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"xsfmc": "（销售方）名称",<br/>	"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"gmfmc": "（购买方）名称",<br/>	"lrfsf": "录入方身份",<br/>	"lrrqq": "录入日期起",<br/>	"lrrqz": "录入日期止",<br/>	"lzfphm": "蓝字发票号码",<br/>	"hzfpxxqrdbh": "红字确认单编号",<br/>	"hzqrxxztDm": "红字确认信息状态代码",<br/>	"fppzDm": "发票票种代码",<br/>	"pageNumber": "页码",<br/>	"pageSize": "每页数量"<br/>} |
| --- |


生产报文示例

| {<br/>    "yhjslx": "0",<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfmc": "广州********设计室",<br/>    "gmfnsrsbh": "9115**********NK5H",<br/>    "gmfmc": "包头市******有限责任公司",<br/>    "lrfsf": "0",<br/>    "lrrqq": "2025-05-01",<br/>    "lrrqz": "2025-05-30",<br/>    "lzfpdm": "",<br/>    "lzfphm": "254470********220447",<br/>    "hzfpxxqrdbh": "4401052********01218",<br/>    "hzqrxxztDm": "01",<br/>    "fppzDm": "05",<br/>    "pageNumber": "1",<br/>    "pageSize": "10"<br/>} |
| --- |


#### 8.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | --- | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | total | 总数量 | varchar | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | lrfsf | 录入方身份 | varchar | 2 | 是 | 0：销方 1：购方 |
| <font style="color:rgb(0, 0, 0);">7</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">12</font> | lzkprq | 蓝字发票开票日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">13</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">15</font> | lzfppzDm | 蓝字发票票种代码 | String | 2 | 否 | 05：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">16</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | String | 2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | hzcxse | 红字冲销税额 | number | 18,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">19</font> | hzqrdmxsl | 红字确认单明细数量 | number | 10 | 是 |  |
| <font style="color:rgb(0, 0, 0);">20</font> | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>03：服务中止<br/>04：销售折让 |
| <font style="color:rgb(0, 0, 0);">21</font> | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">22</font> | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| <font style="color:rgb(0, 0, 0);">23</font> | hzfphm | 红字发票号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">24</font> | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">25</font> | yxbz | 有效标志 | varchar | 1 | 是 | Y：有效<br/>N：无效 |
| <font style="color:rgb(0, 0, 0);">26</font> | lrrq | 录入日期 | datetime |  | 是 | yyyy-MM-dd HH:mm:ss |


**错误码**

| **序号** | returncode | **说明** |
| --- | --- | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">RI3000</font> | <font style="color:rgb(0, 0, 0);">购买方名称不能为空</font> |
| <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">RI3001</font> | <font style="color:rgb(0, 0, 0);">销售方名称不能为空</font> |
| <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">RI3002</font> | <font style="color:rgb(0, 0, 0);">购买方名称最大长度300位</font> |
| <font style="color:rgb(0, 0, 0);">4</font> | <font style="color:rgb(0, 0, 0);">RI3003</font> | <font style="color:rgb(0, 0, 0);">销售方名称最大长度300位</font> |
| <font style="color:rgb(0, 0, 0);">5</font> | <font style="color:rgb(0, 0, 0);">RI3004</font> | <font style="color:rgb(0, 0, 0);">红字确认单列表查询数据不存在</font> |
| <font style="color:rgb(0, 0, 0);">6</font> | <font style="color:rgb(0, 0, 0);">RI3005</font> | <font style="color:rgb(0, 0, 0);">购买方纳税人识别号不能为空</font> |
| <font style="color:rgb(0, 0, 0);">7</font> | <font style="color:rgb(0, 0, 0);">RI3006</font> | <font style="color:rgb(0, 0, 0);">销售方纳税人识别号不能为空</font> |


#### 8.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>			"returncode": "结果代码",<br/>			"returnmsg": "结果说明",<br/>			"hzqrxxList": {<br/>				"pageNumber": 1,<br/>				"pageSize": 20,<br/>				"total": 1,<br/>				"list": [<br/>					{<br/>						"uuid": "红字确认单UUID",<br/>						"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>						"lrfsf": "录入方身份",<br/>						"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"xsfmc": "（销售方）名称",<br/>						"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"gmfmc": "（购买方）名称",<br/>						"lzfphm": "蓝字发票号码",<br/>						"lzkprq": "蓝字发票开票日期",<br/>						"lzhjje": "蓝字发票合计金额",<br/>						"lzhjse": "蓝字发票合计税额",<br/>						"lzfppzDm": "蓝字发票发票票种代码",<br/>						"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>						"hzcxje": "红字冲销金额",<br/>						"hzcxse": "红字冲销税额",<br/>"hzqrdmxsl": "红字确认单明细数量",<br/>						"chyyDm": "红字发票冲红原因代码",<br/>						"hzqrxxztDm": "红字确认信息状态代码",<br/>						"ykjhzfpbz": "已开具红字发票标志",<br/>						"hzfphm": "红字发票号码",<br/>						"hzkprq": "红字开票日期",<br/>						"yxbz": "有效标志",<br/>						"lrrq": "录入日期"<br/>					}<br/>				]<br/>			}<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">9.查询铁路电子客票红字确认单明细信息</font>
#### 9.1接口说明
向企业提供铁路电子客票红字确认单明细查询的功能，企业可通过红字确认单UUID、销售方纳税人识别号查询铁路电子客票红字确认单明细信息，并将查询的结果保存在本地。使用此信息可以在申请铁路电子客票红字确认单时校验蓝票是否可以红冲；在开具红字铁路电子客票时校验是否和铁路电子客票红字确认单明细一致。

#### 9.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 9.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |


#### 9.4请求报文示例
| {<br/>	"uuid": "红字确认单UUID ",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码"<br/>} |
| --- |


#### 9.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | lrfsf | 录入方身份 | varchar | 1 | 是 | 0：销方<br/>1：购方 |
| <font style="color:rgb(0, 0, 0);">6</font> | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | lzfphm | 蓝字发票号码 | number | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | lzkprq | 蓝字发票开票日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">12</font> | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">13</font> | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">14</font> | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 否 | 05：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">15</font> | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 21：铁路电子客票 |
| <font style="color:rgb(0, 0, 0);">16</font> | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">17</font> | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">18</font> | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>03：服务中止<br/>04：销售折让 |
| <font style="color:rgb(0, 0, 0);">19</font> | hzqrxxztDm | 红字确认单状态 | varchar | 2 | 是 | 01：无需确认<br/>02：销方录入待购方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| <font style="color:rgb(0, 0, 0);">20</font> | qrrq | 确认日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">21</font> | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| <font style="color:rgb(0, 0, 0);">22</font> | hzfphm | 红字发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">23</font> | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">24</font> | yxbz | 有效标志 | varchar | 1 | 否 | Y：有效<br/>N：无效 |
| <font style="color:rgb(0, 0, 0);">25</font> | cezslxDm | 差额征税类型代码 | varchar | 2 | 否 | 空：非差额发票<br/>01：全额开票<br/>02：差额开票 |
| <font style="color:rgb(0, 0, 0);">26</font> | lrrq | 录入日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">27</font> | mxxh | 明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">28</font> | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 是 |  |
| <font style="color:rgb(0, 0, 0);">29</font> | xmmc | 项目名称 | varchar | 600 | 是 |  |
| <font style="color:rgb(0, 0, 0);">30</font> | ggxh | 规则型号 | varchar | 150 | 否 |  |
| <font style="color:rgb(0, 0, 0);">31</font> | dw | 单位 | varchar | 300 | 否 |  |
| <font style="color:rgb(0, 0, 0);">32</font> | sl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">33</font> | dj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| <font style="color:rgb(0, 0, 0);">34</font> | je | 金额（不含税） | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">35</font> | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| <font style="color:rgb(0, 0, 0);">36</font> | se | 税额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">37</font> | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 否 |  |
| <font style="color:rgb(0, 0, 0);">38</font> | hwhyslwfwmc | <font style="color:#000000;">货物或应税劳务、服务名称</font> | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">39</font> | spfwjc | <font style="color:#000000;">商品服务简称</font> | varchar | 120 | 是 |  |
| <font style="color:rgb(0, 0, 0);">40</font> | kce | 扣除额 | number | 18,2 | 否 | 蓝票扣除额的负数 |
| <font style="color:rgb(0, 0, 0);">41</font> | yhzcbs | 优惠政策标识 | varchar | 2 | 否<br/> |  |


**错误码**

| **序号** | returncode | **说明** |
| --- | --- | --- |
| 1 | <font style="color:rgb(0, 0, 0);">RI4000</font> | <font style="color:rgb(0, 0, 0);">红字确认单明细查询数据不存在</font> |


#### 9.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"returncode": "结果代码",<br/>			"returnmsg": "结果说明",<br/>			"uuid": "红字确认单UUID",<br/>			"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>			"lrfsf": "录入方身份",<br/>			"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"xsfmc": "销售方名称",<br/>			"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"gmfmc": "购买方名称",<br/>			"lzfphm": "蓝字发票发票号码",<br/>			"lzkprq": "蓝字发票开票日期",<br/>			"lzhjje": "蓝字发票合计金额",<br/>			"lzhjse": "蓝字发票合计税额",<br/>			"lzfppzDm": "蓝字发票发票票种代码",<br/>			"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>			"hzcxje": "红字冲销金额",<br/>			"hzcxse": "红字冲销税额",<br/>			"chyyDm": "红字发票冲红原因代码",<br/>			"hzqrxxztDm": "红字确认信息状态代码",<br/>			"qrrq": "确认日期",<br/>			"ykjhzfpbz": "已开具红字发票标志",<br/>			"hzfphm": "红字发票号码",<br/>			"hzkprq": "红字开票日期",<br/>			"yxbz": "有效标志",<br/>			"cezslxDm": "差额征税类型代码",<br/>			"lrrq": "录入日期",<br/>			"hzqrxxmxList": [<br/>				{	"mxxh": "明细序号",<br/>					"dylzfpmxxh": "对应蓝字发票明细序号",<br/>					"xmmc": "项目名称",<br/>					"ggxh": "规格型号",<br/>					"dw": "单位",<br/>					"sl": "数量",<br/>					"dj": "单价",<br/>					"je": "金额（不含税）",<br/>					"slv": "增值税税率/征收率",<br/>					"se": "税额",<br/>					"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>					"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>					"spfwjc": "商品服务简称",<br/>					"kce": "扣除额",<br/>					"yhzcbs": "优惠政策标识"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">10.查询</font>购方纳税人信息
#### 10.1接口说明
向企业端开票系统提供购票方纳税人信息查询功能，企业端在开具发票时，使用此功能自动带出购票方纳税人信息，方便纳税人开票。

#### 10.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 10.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |


#### 10.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 10.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | nsrmc | 纳税人名称 | varchar | 300 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | ssdabh | 税收档案编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | ssjswjgdm | 省级税务机关代码 | varchar | 11 | 否 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | dsjswjgdm | 地市级税务机关代码 | varchar | 11 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | qxjswjgdm | 区县级税务机关代码 | varchar | 11 | 否 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | zgswskfjdm | 主管税务所科分局代码 | varchar | 11 | 否 |  |


#### 10.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		“Data”:{<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>	"jcxx": {<br/>		"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>		"nsrmc": "纳税人名称",<br/>		"ssdabh": "税收档案编号",<br/>		"ssjswjgdm": "省级税务机关代码",<br/>		"dsjswjgdm": "地市级税务机关代码",<br/>		"qxjswjgdm": "区县级税务机关代码",<br/>		"zgswskfjdm": "主管税务所科分局代码",<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">11.查询发票汇总</font>信息
#### 11.1接口说明
当企业需要与税务局端核对发票汇总信息是否一致时，企业可以通过查询发票汇总信息接口请求数据并进行比对。税局端返回本次请求流水号。

#### 11.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 11.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | qsrq | 起始日期 | date | | 是 | 时间段不能跨月，格式：<br/>yyyy-MM-dd |
| 2 | zzrq | 终止日期 | date | | 是 | 时间段不能跨月，格式：<br/>yyyy-MM-dd |


#### 11.4请求报文示例
| {<br/>"qsrq": "起始日期",<br/>"zzrq": "终止日期"<br/>} |
| --- |


#### 11.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | ywlsh | 业务流水号 | varchar | 40 | 是 |  |


#### 11.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"ywlsh": "业务流水号"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">12.获取发票汇总信息结果</font>
#### 12.1接口说明
企业可以通过请求流水号获取发票汇总信息结果接口，下载已上传的发票汇总信息数据与本地发票数据进行比对。

#### 12.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 12.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | ywlsh | 业务流水号 | varchar | 40 | 是 |  |


#### 12.4请求报文示例
| {<br/>	"ywlsh": "业务流水号"<br/>} |
| --- |


#### 12.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfnsrsbh | （销售方）纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | djxh | 登记序号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | hzsl | 汇总数量 | varchar | 25 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | hzje | 汇总金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | lpsl | 蓝票数量 | varchar | 25 | 是 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | lpje | 蓝票金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | hpsl | 红票数量 | varchar | 25 | 是 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | hpje | 红票金额 | number | 18,2 | 是 | 负数 |


#### 12.6返回报文示例
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzxxList": [<br/>				{<br/>					"xsfnsrsbh": "(销售方)纳税人识别号/统一社会信用代码",<br/>					"djxh": "登记序号",<br/>					"hzsl": "汇总数量",<br/>					"hzje": "汇总金额",<br/>					"lpsl": "蓝票数量",<br/>					"lpje": "蓝票金额",<br/>					"hpsl": "红票数量",<br/>					"hpje": "红票金额"<br/>				}, {<br/>					"xsfnsrsbh": "(销售方)纳税人识别号/统一社会信用代码",<br/>					"djxh": "登记序号",<br/>					"hzsl": "汇总数量",<br/>					"hzje": "汇总金额",<br/>					"lpsl": "蓝票数量",<br/>					"lpje": "蓝票金额",<br/>					"hpsl": "红票数量",<br/>					"hpje": "红票金额"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### <font style="color:#1A1A1A;">13.查询</font>发票概要信息
#### 13.1接口说明
当企业侧数据与税务局端发票数据不一致时，企业可以通过查询发票概要信息接口下载已上传的发票概要数据与本地发票数据进行比对。

#### 13.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 13.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| 1 | xsfnsrsbh | （销售方）纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| 2 | djxh | 登记序号 | varchar | 20 | 是 |  |
| 3 | qssj | 起始时间 | datetime | | 是 | 时间段不能跨天，格式：<br/>yyyy-MM-dd HH:mm:ss  |
| 4 | zzsj | 终止时间 | datetime | | 是 | 时间段不能跨天，格式：<br/>yyyy-MM-dd HH:mm:ss  |


#### 13.4请求报文示例
| {<br/>	"xsfnsrsbh": "纳税人识别号/统一社会信用代码",<br/>	"djxh": "登记序号",<br/>	"qssj": "起始时间",<br/>	"zzsj": "终止时间"<br/>} |
| --- |


#### 13.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfnsrsbh | (销售方)纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | cljg | 处理结果 | gzip | | 否 | gzip压缩(base64)。当returncode为00时返回该节点 |
| 处理结果中内容 | | | | | | |
| <font style="color:rgb(0, 0, 0);">5</font> | fphm | 发票号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">6</font> | kprq | 开票日期 | datetime | | 是 | 格式：<br/>yyyy-MM-dd HH:mm:ss |
| <font style="color:rgb(0, 0, 0);">7</font> | hjje | 合计金额 | number | 18,2 | 是 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | fpbz | 发票标志 | varchar | 1 | 是 | 0-蓝票 1-红票 |


#### 13.6返回报文示例 
成功返回(gzip格式压缩(base64)返回)：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"xsfnsrsbh": "(销售方)纳税人识别号/统一社会信用代码",<br/>			"cljg": "处理结果"<br/>		}<br/>	}<br/>} |
| --- |


处理结果（gzip压缩）中的内容：

| {<br/>	"fpgyxxList": [<br/>		{<br/>			"fphm": "发票号码",<br/>			"kprq": "开票日期",<br/>			"hjje": "合计金额",<br/>			"fpbz": "发票标志"<br/>		}, {<br/>			"fphm": "发票号码",<br/>			"kprq": "开票日期",<br/>			"hjje": "合计金额",<br/>			"fpbz": "发票标志"<br/>		}<br/>	]<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 14.铁路电子客票红字确认单确认
#### 14.1接口说明
给企业提供红字确认单确认接口，进行红字确认单撤销操作。

#### 14.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 14.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | hzqrdbh | 红字确认单编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">4</font> | qrlx | 确认类型 | varchar | 1 | 是 | Y：同意<br/>N：不同意<br/>C：撤销 |


#### 14.4请求报文示例
| {<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"uuid": "红字确认单UUID ",<br/>	"hzqrdbh": "红字确认单编号 ",<br/>	"qrlx": "确认类型"<br/>} |
| --- |


#### 14.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | qrrq | 确认日期 | datetime | | 否 | 格式：<br/>yyyy-MM-dd HH:mm:ss |


#### 14.6返回报文示例 
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>		  "returncode": "00",<br/>		  "returnmsg": "成功",<br/>		  "qrrq ": "确认日期"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	} |
| --- |


### 15.上传发票汇总确认信息
#### 15.1接口说明
给企业提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和税额进行上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。

若企业在每月13日零点前未上传上个月的发票汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票。

当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

#### 15.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 15.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | ywlx | 业务类型 | varchar | 1 | 是 | 0：确认<br/>1：取消 |
| <font style="color:rgb(0, 0, 0);">4</font> | ptbh | 平台编号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | yf | 月份 | varchar | 7 | 是 | 格式：yyyy-MM |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfpsl | 蓝字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">7</font> | lzfpje | 蓝字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">8</font> | lzfpse | 蓝字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">9</font> | hzfpsl | 红字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">10</font> | hzfpje | 红字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| <font style="color:rgb(0, 0, 0);">11</font> | hzfpse | 红字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |


#### 15.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ywlx": "业务类型",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份",<br/>	"lzfpsl": "蓝字发票数量",<br/>	"lzfpje": "蓝字发票金额",<br/>	"lzfpse": "蓝字发票税额",<br/>	"hzfpsl": "红字发票数量",<br/>	"hzfpje": "红字发票金额",<br/>	"hzfpse": "红字发票税额"<br/>} |
| --- |


生产报文示例

| {<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfsjswjgdm": "14400020000",<br/>    "ywlx": "0",<br/>    "ptbh": "5d2cff**********b7a3",<br/>    "yf": "2025-05",<br/>    "lzfpsl": "1300",<br/>    "lzfpje": 15518088765.27,<br/>    "lzfpse": 1687911.48,<br/>    "hzfpsl": 257,<br/>    "hzfpje": -9770623.50,<br/>    "hzfpse": -1043355.60<br/>} |
| --- |


#### 15.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |


#### 15.6返回报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>		  "returncode": "00",<br/>		  "returnmsg": "成功"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 16. 查询发票汇总确认信息
#### 16.1接口说明
给企业提供发票汇总确认信息查询功能，企业可以通过此接口查询历史发票汇总确认信息。

#### 16.2请求方式
请求方式为POST

● <font style="color:#FF9B00;">path</font><font style="color:#333333;"> 指该参数为路径参数</font>

● <font style="color:#00C250;">query</font><font style="color:#333333;"> 指该参数需在请求URL传参</font>

● <font style="color:#0CA2E3;">body</font><font style="color:#333333;"> 指该参数需在请求JSON传参</font>

#### 16.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 |  |
| <font style="color:rgb(0, 0, 0);">2</font> | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 |  |
| <font style="color:rgb(0, 0, 0);">3</font> | ptbh | 平台编号 | varchar | 20 | 否 | 若为空，则查询纳税人在所有平台的开票汇总信息 |
| <font style="color:rgb(0, 0, 0);">4</font> | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM若为空，则查询所有历史月份数据 |




#### 16.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份"<br/>} |
| --- |


#### 16.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| :---: | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是<br/> |  |
| 发票汇总确认信息（多条记录时，循环以下节点） | | | | | | |
| <font style="color:rgb(0, 0, 0);">4</font> | ptbh | 平台编号 | varchar | 20 | 否 |  |
| <font style="color:rgb(0, 0, 0);">5</font> | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM |
| <font style="color:rgb(0, 0, 0);">6</font> | lzfpsl | 蓝字发票数量 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">7</font> | lzfpje | 蓝字发票金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">8</font> | lzfpse | 蓝字发票税额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">9</font> | hzfpsl | 红字发票数量 | number | 10 | 否 |  |
| <font style="color:rgb(0, 0, 0);">10</font> | hzfpje | 红字发票金额 | number | 18,2 | 否 |  |
| <font style="color:rgb(0, 0, 0);">11</font> | hzfpse | 红字发票税额 | number | 18,2 | 否 |  |


#### 16.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"xsfnsrsbh": "销售方纳税人识别号",<br/>			"fphzqrxxList": [<br/>				{	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额"<br/>				}, {	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |




# 六、附件
无







