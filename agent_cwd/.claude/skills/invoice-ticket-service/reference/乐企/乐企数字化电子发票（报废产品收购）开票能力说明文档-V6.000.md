<font style="color:#000000;">乐企数字化电子发票（报废产品收购）开票能力说明文档V6.000</font>





































修改说明

| 版本 | 章节编号 | 修订内容简述 | 生效日期 |
| --- | --- | --- | --- |
| V1.000 | 全部章节 | 新增 | 2024-4-29 |
| V2.000 | 全部章节 | 根据报废产品收购发票补充需求补充能力文档 | 2024-5-31 |
| V2.001 | 全部章节 | 调整文档描述及接口报文 | 2024-6-5 |
| V2.002 | 第四、五章 | 调整算税参数及算税校验接口内容 | 2024-6-27 |
| V3.000 | 第四、五章 | 调整算税参数接口，增加退税相关接口 | 2024-6-29 |
| | 第四、五章 | 调整销售方地址、电话蓝票必填。 | 2024-7-12 |
| | 第五章 | 调整第三方平台提交缴款请求接口中“税款缴纳方式代码”字段说明。 | 2024-7-19 |
| | 第四、五章 | 第四章2.2.7.1调整蓝票单位、单价、数量为必填，第五章10.报废产品收购发票调整单位、单价、数量说明。 | 2024-7-25 |
| V3.001 | 第五章 | 第五章16.17发票汇总上传及查询接口纳税人识别号、省级税务机关代码调整为销售方纳税人识别号、销售方省级税务机关代码。 | 2024-8-3 |
| V4.000 | 第四、五章 | 第四章2.2.3调整未办结业务校验规则；2.2.7.3/5.2.4.2增加当月发票上传规则。<br/>第五章18.查询企业未缴税记录调整请求、返回参数逻辑；19.报废产品收购待缴税费校验请求参数增加“税费缴纳方式”；新增31.自然人间接登记接口。 | 2024-8-6 |
| V4.001 | 全部 | 修改全文中联用平台为直连单位。 | 2024-8-20 |
| | 第四、五章 | 第四章2.2.7.1,5.2.4.1合规性校验增加支付渠道，交易单号字段；2.2.7.3业务逻辑校验增加交易信息校验规则。<br/>第五章10.报废产品收购发票上传增加支付渠道、交易单号字段。 | 2024-8-20 |
| V4.002 | 第四章 | 第四章2.2.7.3业务逻辑校验增加直连单位自行校验规则。 | 2024-9-18 |
| V4.003 | 第四、五章 | 第四章5.2.4.1调整备注长度；<br/>第五章10.报废产品收购发票上传调整备注字段说明。 | 2025.01.24 |
| V4.004 | 第四、五章 | 第四章2.2.7.1、5.2.4.1合规性校验增加乐企开票模式代码，发票开具方式代码字段；2.2.7.3、5.2.4.2业务逻辑校验增加乐企开票模式代码，发票开具方式代码校验规则。<br/>第五章10.报废产品收购发票上传增加乐企开票模式代码，发票开具方式代码字段。 | 2025.03.28 |
| | 第四章 | 第四章2.2.7.3、5.2.4.2业务逻辑校验调整支付渠道、交易单号、乐企开票模式代码校验规则。 | 2025.03.28 |
| | 第四、五章 | 第四章2.2.4.1、3.3.2.4.1合规性校验新增及调整销售方自然人信息（销售方自然人标志、销售方自然人证件类型、销售方自然人证件号码、销售方自然人国籍代码）字段。<br/>第五章10.报废产品收购发票上传调整销售方自然人信息（销售方自然人证件类型、销售方自然人证件号码、销售方自然人国籍代码）字段。 | 2025.03.28 |
| V5.000 | 第五章 | 新增上传发票对账数据、查询发票对账不符数据接口。 | 2025.04.25 |
| V5.001 | 第五章 | 接口详情1.获取数电票批量预赋码信息的接口说明增加跨省迁移企业发票号码段下载使用规则。 | 2025.08.29 |
| | 第五章 | 发票上传、红字确认单申请、汇总确认等接口请求报文增加生产报文示例。 | 2025.08.29 |
| V6.000 | 第五章 | 增加发票用途状态信息查询接口 | 2025.09.26 |


<font style="color:#000000;">目  录</font>



一、阅读指引	6

二、能力介绍	7

（一）能力简介	7

（二）应用案例	7

（三）名词解释	7

（四）扩展阅读	8

三、政策依据	9

四、开发指引	10

（一）业务场景	10

1.发票开具前置	10

2.蓝字发票开具	14

3.红字确认单申请	26

4.红字确认单撤销	31

5.红字发票开具	31

6.退税申请流程	38

7.开票汇总确认	40

五、接口技术说明	43

（一）能力编码	43

（二）接口清单	43

1.获取数电票批量预赋码信息	44

2.查询赋额额度	46

3.下载/退回赋额额度	48

4.调整赋额额度有效期	50

5.查询纳税人风险信息	52

6.查询纳税人基本信息	54

7.查询可用税率信息	61

8.查询税收分类编码信息	62

9.查询自然人开票信息	67

10.报废产品收购发票上传	70

11.查询发票上传结果	80

12.数字化电子发票红字确认单申请	82

13.数字化电子发票确认单确认	87

14.查询数字化电子发票红字确认单列表	88

15.查询数字化电子发票红字确认单明细	95

16.上传发票汇总确认信息	100

17.查询发票汇总确认信息	103

18.查询企业未缴税记录	106

19.报废产品收购待缴税费校验	108

20.查询待缴税费缴款信息	115

21.查询税费缴纳结果	117

22.取消预开发票交易	119

23.查询反向开票算税参数	121

24.查询应代办未代办税费信息	125

25.查询退税信息	127

26.申请反向开票退税	130

27.查询报废产品退税结果	133

28.第三方平台提交缴款请求	135

29.确认电子税票扣款状态	137

30.验证银行卡号信息	139

31.自然人间接登记	141

32.上传发票对账数据	143

33.查询发票对账不符数据	147

34.发票用途状态信息查询	152

六、附件	156







# 一、阅读指引
为满足纳税人多场景、规模化、合规化、自动化的报废产品收购发票开具需求，乐企数字开放平台提供数字化电子发票（报废产品收购）（以下简称“报废产品收购发票”）开具能力，并通过本能力说明文档明确了报废产品收购发票开具相关业务规则和数据接口。

本能力适用于收购报废产品的纳税人订阅。

本能力说明文档分为阅读指引、能力介绍、政策依据、开发指引、接口技术说明、附件六个章节，其中阅读指引、能力介绍、政策依据章节适合纳税人管理人员及财务人员阅读；开发指引、接口技术说明、附件章节适合纳税人技术人员阅读。



# 二、能力介绍
## （一）能力简介
纳税人收购报废产品时，可以通过本能力开具报废产品收购发票。

纳税人可将本能力中的各类规则和接口嵌入本单位信息化系统中（如订单、结算等），实现报废产品收购发票开具流程和商业行为的融合，有效提升报废产品发票开具效率。

纳税人可以同时使用本能力、电子发票服务平台开具报废产品收购发票（税务机关另有规定除外）。

## （二）应用案例
1、某报废产品收购企业订单完成自动开票

某报废产品收购企业将报废产品收购发票开具能力嵌入内部收购开票系统，当报废产品交易正式完成或变更时，其收购开票系统通过乐企嵌入的报废产品收购发票开具能力的各个规则和接口，组合商品、订单、支付、物流等信息自动生成报废产品收购发票，并完成交付。

2、某报废产品收购企业资金结算自动开票

某报废产品收购企业将报废产品收购发票开具能力嵌入结算系统，当收购方确认支出、产生结算单时，结算系统通过乐企嵌入的报废产品收购发票开具能力的各个规则和接口，组合商品、结算等信息自动生成报废产品收购发票。完成交付并推送至财务系统，同时进行账务处理。

## （三）名词解释
直连单位:指的是申请直连乐企数字开放平台且税务机关审核通过的纳税人。

使用单位:指的是被直连单位邀请直连乐企数字开放平台且税务机关审核通过的纳税人。

开具前置:指的是纳税人在开具发票前所获取的关于开票相关信息的能力。

赋额额度:指的是税务机关对纳税人开票实行开具金额总额度管理。开具金额总额度，是指一个自然月内，纳税人发票开具总金额（不含增值税）的上限额度。

预赋码信息:指的是纳税人在开具发票前所需获取的发票号码信息。

API列表:指的是纳税人在使用开票能力期间所需要的应用程序接口。

## （四）扩展阅读
无。 



# 三、政策依据
按照《中华人民共和国发票管理办法》规定，销售商品、提供服务以及从事其他经营活动的单位和个人，对外发生经营业务收取款项，收款方应向付款方开具发票。特殊情况下由付款方向收款方开具发票。

按照《中华人民共和国发票管理办法实施细则》规定，所称特殊情况下，由付款方向收款方开具发票，是指下列情况：(一)收购单位和扣缴义务人支付个人款项时；(二)国家税务总局认为其他需要由付款方向收款方开具发票的。



# 四、开发指引
企业在调用乐企平台发起的相关请求报文中禁止使用Unicode码，但是可以使用Unicode码对应的中文。例如 ★ 可以出现在开票报文的备注中，但是不能出现\u38996。

为方便理解，下述内容中业务流程图中涉及到的接口编号与第四章-（一）接口清单列表进行对应，编号规则仅适用于本文档。



## （一）业务场景
### 1.发票开具前置
企业在开具发票前可提前将开具发票所需的相关信息获取到本地，待开票时查询本地的数据进行校验。

在此场景中企业获取信息时无严格的先后顺序，可同时申请获取所有信息，也可以单独只获取某一个开票信息更新本地的信息。



#### 1.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114713073-e7d486c4-d687-42b0-800e-3769a3221c5c.png)

#### 1.2业务规则 
##### 1.2.1获取批量预赋码信息
查询本地未使用发票号码段，判断是否低于设定的阈值（例如：低于1000张等），则需要调用税务局端接口重新获取发票批量预赋码信息。

数字化电子发票号码前2位代表使用年份，禁止跨年度使用。例如：“24”开头的发票号码为2024年度的发票号码，只能在2024年使用，开票日期必须为2024年。企业在2024年开具的数字化电子发票，可以在跨年后继续上传，跨年后企业需要重新下载新一年度的数字化电子发票号码开具数字化电子发票。

##### 1.2.2赋额额度管理
赋额额度即开票额度，用于控制企业开具发票的总额度，乐企1.5要求企业自行管理每月的赋额额度，并且赋额额度禁止跨月使用、禁止超额度开票。

赋额额度管理包括下载赋额额度和退回赋额额度2个功能。

###### 1.2.2.1下载赋额额度
当企业本地的已下载未使用的赋额额度小于需要开具发票的额度时，可通过此功能下载赋额额度。

建议根据企业自身开票情况，对本地已下载未使用的赋额额度设置阈值，当已下载未使用的赋额额度小于设置的阈值时，自动触发下载赋额额度操作。

###### 1.2.2.2退回赋额额度
当企业需要在其他平台开具发票，但是赋额额度不足时，企业可通过此接口把下载到本地的赋额额度退回至税务局端，以便企业在其他平台开具发票时。

注意：企业行业性质关于资源回收企业的核定如在授信额度属期内取消，系统将以企业核定时调增的授信额度信息为依据自动进行调减处理，建议企业在发生资源回收企业核定变化时及时查询授信额度，并根据最新的额度信息进行相关业务处理。

##### 1.2.3调整赋额额度有效期
给企业提供调整赋额额度有效期接口，企业在月初未申报时下载的赋额额度的有效期止为当月申报截止日期，超过赋额额度有效期止后，无法开具发票。企业在完成申报或到达赋额额度有效期止后，通过此接口调整赋额额度有效期，并根据税局端返回的有效期更新本地赋额额度有效期。

##### 1.2.4获取纳税人风险信息
定时获取纳税人风险信息，用于企业判断是否可以使用开票能力。

建议定时获取纳税人风险信息，或者在纳税人风险信息发生变更时手动触发更新。

##### 1.2.5获取纳税人基本信息
定时获取纳税人基本信息，用于企业判断是否使用开票能力、可使用哪些开票场景。

建议定时获取纳税人基本信息，或者在纳税人基本信息发生变更时手动触发更新。

##### 1.2.7获取可用税率
定时获取可用税率，使用在开具报废产品收购发票时可依据获取到的可用税率判断发票信息是否合规。

开具“报废产品收购”特定要素标签发票时，票种类为增值税专用发票的，项目明细行的税率仅允许选择3%和1%；票种类为普通发票的，项目明细行的税率仅允许选择1%和免税。

##### 1.2.6获取可用税收分类编码
定时获取可用税收分类编码，在报废产品收购发票时可依据获取到的税收分类编码判断发票信息是否合规。

针对不同的税收分类编码维护了可使用增值税特殊管理内容，即可使用的优惠政策，纳税人在开具数字化电子发票时可以根据选择的税收分类编码选择适用的优惠政策，享受税收减免政策。

##### 1.2.8获取红字确认单列表
从税务局端获取红字确认单列表信息，以便于后期开具红字发票以及红字发票确认时进行业务校验。

建议企业定时下载/更新红字确认单列表信息,或在接收红字确认单、红字确认单变更时手工获取红字确认单列表信息。

##### 1.2.9获取红字确认单明细
从税务局端获取红字确认单明细信息，以便于后期开具红字发票以及红字发票确认时进行业务校验。

建议企业定时下载/更新红字确认单明细信息,或在接收红字确认单明细、红字确认单明细变更时手工获取红字确认单明细信息。

##### 1.2.10获取收购企业代办税费信息
从税务局端获取上月、本月企业应代办未代办税费信息，提醒企业完成代办税费缴纳。

具体可见“四、接口列表24.查询应代办未代办税费信息”。

### 2.蓝字发票开具
#### 2.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114713465-b35e50b3-0fc8-4775-b0b7-09eb7d5d9a13.png)

#### 2.2业务规则
##### 2.2.1判断纳税人开票资格
校验纳税人是否具备报废产品收购蓝字发票开票资格，包括风险纳税人信息校验和纳税人资格校验。

根据查询的纳税人风险信息进行校验，当满足以下任意条件时禁止开具报废产品收购蓝字发票：

● 未查询到纳税人风险信息，本地无纳税人风险信息

● 纳税人风险信息中“风险纳税人类型”为“Ⅰ类（高风险）”。

● 纳税人风险信息中“纳税人预警级别”为“红色预警”。

● 纳税人风险信息中“风险纳税人标志”为“Y（风险纳税人）”。

根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具报废产品收购蓝字发票：

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

● 纳税人信息中“企业行业性质”不是“50-【资源回收企业反向开票-一般计税】，51-【资源回收企业反向开票-简易计税】”的企业。

##### 2.2.2企业代办税费校验
通过《查询应代办未代办税费信息》校验纳税人是否存在应代办未代办税费记录，直连平台可定时查询收购企业的代办税费信息，用于提醒企业及时前往电子税务局进行代办税费申报。

当超过每月申报期后，收购企业仍存在上一月的代办税费记录未申报的，阻断收购企业开票。

##### 2.2.3企业及自然人未办结业务校验
直连平台根据收购企业及自然人信息，查询企业及自然人是否存在已预开验证税款但未缴税的记录，来判断该笔交易是否可以继续开具发票。

企业及自然人未缴税阻断判断规则如下：

（1）按照报废产品收购企业纳税人识别号查询昨日24:00之前（以录入日期为准）是否存在缴纳方式为企业委托扣缴的未缴税数据（包括缴税状态为未缴税和扣款失败，税费已作废），如果有则阻断校验；

（2）按照自然人卖方姓名+身份证号码查询是否存在未缴税数据（包括缴税状态为未缴税和扣款失败，税费已作废），如果有则阻断校验。

直连单位可以通过《查询收购企业未缴税记录》查询包括收购企业、自然人在全部平台已预开验证税款但未缴税的数据记录。

##### 2.2.4自然人开票校验
校验自然人是否为阻断反向开票自然人，并根据自然人月累计被反向开票金额、年累计开票金额进行相应提示提醒和阻断。

根据《查询自然人开票信息》返回信息，当满足以下条件时阻断开票并进行相应提示提醒：

● 查询到自然人“阻断反向开票自然人”为“Y”时，提示信息：“尊敬的纳税人：当前不允许向报废产品出售者xx（身份证号码：******）反向开具“报废产品收购”发票，如有疑义，请联系主管税务机关处理。；

● 查询计算自然人年累计开票总额数据，与本次交易数据不含税金额之和超过500万时，提示信息：“尊敬的纳税人：xx连续12个月累计销售废品已超过500万元，需由xx办理市场主体登记，自行开具发票，请您知悉。”

根据《查询自然人开票信息》返回信息，当满足以下条件时不阻断开票但需进行相应提示提醒：

● 查询到自然人“月累计开票金额”数据与本次不含税金额合计超过100,000元时提示“尊敬的纳税人：xx当月累计销售废品已超过10万元，您在支付货款时应代为扣缴增值税及附加税费。”

##### 2.2.5发票号段结余校验
判断本地是否还有未使用的发票，若无未使用的发票，需调用税务局端接口重新获取发票批量预赋码信息。

##### 2.2.6获取开票基础信息
查询本地保存的税收分类编码信息和可用税率信息。

##### 2.2.7录入、校验发票信息
依据开票能力发票开具的要求，录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

###### 2.2.7.1合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。报废产品收购不支持差额开票、出口业务开票、增值税即征即退业务。

校验规则如下：

● 平台编号，必填，最大长度20位。

● 发票票种，必填，取值范围为01、02。

● 发票号码，必填，长度20位数字格式，前2位为年份后2位。

● 蓝字发票标志，必填，取值范围为“0”、“1”.

● 开票日期，必填，格式必须是“yyyy-MM-dd HH:mm:ss”。

● 开票人，必填，最大长度300位。当使用联用（使用单位与直连平台无控制关系）、他用开票能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，必填，最大长度30位。当使用联用（使用单位与直连平台无控制关系）、他用能力时，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，必填，最大长度4位。当使用他用、联用（使用单位与直连平台无控制关系）能力时，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 收款人姓名，选填，最大长度150位。

● 复核人姓名，选填，最大程度75位。

● 特定要素，必填，取值范围为“24”。

● 区域代码，必填，最大长度20位。

● 销售方名称，必填，最大长度300位。

● 销售方纳税人识别号，必填，最大长度20位，必须与销售方自然人证件号码一致。

● 销售方自然人标志，必填，必须传“Y”。

● 销售方自然人国籍代码，必填，必须传“156”。

● 销售方自然人身份证件类型，必填，取值范围“201”。

● 销售方自然人身份证件号码，必填，最大长度30位。

● 销售方地址，必填，最大长度300位，填写自然人居住地信息。

● 销售方电话，必填，最大长度60位，填写自然人销售方手机号码，直连单位需校验自然人销售方电话准确性。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 是否销售自然人使用过的报废产品，必填，取值范围“Y”、“N”。

● 个人所得税项目，必填，取值范围“1”，“2”。

● 个人所得税税费，必填，最大长度18位，最多2位小数。

● 增值税及附加税费，必填，最大长度18位，最多2位小数。。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度50位。

● 购买方纳税人识别号，必填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行名称，选填，最大长度120位。

● 购买方开户行银行账号，选填，最大长度50位。

● 经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度	30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 结算方式，必填，取值范围为“01”、“02”、“03”、“04”、“05”、“99”。

● 应税行为发生地，选填，最大长度11位。

● 对应蓝字发票号码，选填，长度20位。

● 红字确认信息单编号，选填，最大长度20位。

● 红字确认单uuid，选填，最大长度32位。

● 备注，选填，最大长度450位。

● 服务器地址，必填，长度20位。

● mac地址，必填，长度20位。

● CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 是否展示销售方银行账号标签，选填，最大长度1位。

● 是否展示购买方银行账号标签，选填，最大长度1位。

● 减按征税类型代码，选填，最大长度2位，不为空时取值范围“54、55”。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 乐企开票模式代码，选填，最大长度2位，不为空时取值“01”、“02”。

● 支付渠道，选填，最大长度3位。

● 交易单号，选填，最大长度40位。

● 明细序号，必填，最大长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

● 项目名称，必填，最大长度600位，不允许为“其他报废产品”。

● 规格型号，选填，最大长度150位。

● 单位，必填，最大长度300位。

● 数量，必填，最大长度25位。

● 单价，必填，最大长度25位。

● 金额，必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 含税金额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在，同时商品和服务税收分类编码的特定要素归类必须为“报废产品”。

● 发票行性质，必填，取值范围为“00”、“01”、“02”。

● 优惠政策标识，选填，不为空时取值范围为“03”、“08”。

● 附加要素名称，选填，最大长度200位。

● 附加要素类型，选填，最大长度200位。

● 附加要素值，选填，最大长度200位。

● 电子税票号码，选填，最大长度20位，填写对应发票完成缴税的电子税票号码，只有不涉及补缴的免税发票无需填写。

###### 2.2.7.2数据校验
● 单行金额校验：|单价*数量-金额|<=0.01。

● 汇总金额校验：|所有商品行金额之和-合计金额|<=0.01。

● 单行税额校验：| 金额 * 税率 - 税额 |<=0.06。

● 汇总税额校验：| 金额 * 税率（第1行）+......+金额 * 税率（第N行）-税额合计|<=1.27。

● 折扣行校验规则：

（1）折扣行与被折扣行“对应蓝字发票明细序号”必须为空。

（2）折扣行“规格型号”、“单价”、“单位”、“数量”必须为空；

（3）折扣行“明细序号”、“金额”、“税额”、“含税金额”按照实际情况填写；

（4）折扣行发票行性质必须填写“01（折扣行）”。

（5）折扣行其他字段必须与被折扣行一致，包括“项目名称”，“货物或应税劳务、服务名称”，“商品服务简称”，“增值税税率/征收率”，“商品和服务税收分类合并编码”，“优惠政策标识”。

###### 2.2.7.3业务逻辑校验
● 开具报废产品收购发票时，只能使用特定要素标签归类为“17-报废产品”的商品和服务税收分类编码。 

● 开具报废产品收购发票时，销售方信息填写为自然人信息，购买方信息填写为开票方信息。

● 发票上传接口中“平台编号”字段值必须为直连单位ID。

● 单张发票明细行最多不能超过5000条，超过5000条则阻断发票上传；建议企业开具发票明细行控制在2000条以下。

● 开具发票只能使用税收分类编码中“是否汇总项”字段为“N”的编码进行开票。

● 身份证件类型只能为“201：居民身份证”。

● 身份证件类型为201时，销售方纳税人识别号必须填写自然人身份证号码。

● 一张发票只能使用一个税率，不允许存在不同税率。

● 企业行业性质为“50-资源回收企业反向开票-一般计税”可以开具报废产品收购专票、普票；企业行业性质为“51-资源回收企业反向开票-简易计税”的只能开具报废产品收购普票。

● 是否销售自然人使用过的报废产品为Y，个人所得税项目必须为1财产转让所得；是否销售自然人使用过的报废产品为N，个人所得税项目必须为2经营所得。

● 开具“报废产品收购”特定要素标签发票时，票种类为增值税专用发票的，项目明细行的税率仅允许选择3%和1%；票种类为普通发票的，项目明细行的税率仅允许选择1%和免税。

● 当个人所得税项目为1财产转让所得时，只能开具报废机动车（包括1110701000000000000（报废汽车）、1110702000000000000（报废摩托车）、1110799000000000000（其他报废机动车））的免税普票；当个人所得税项目为2经营所得时，只能开具3%和1%税率的专票或1%税率的普票。

● 开具报废机动车免税普票时，需要直连单位本地完成自然人的实人认证方可开具。免税发票无需缴纳个人所得税，如不涉及补缴税费可以直接上传发票，如涉及补缴税费需要完成算税校验缴纳税费后再进行发票上传。

● 开具报废产品收购专票时，自然人销售方享受3-1政策，税率应当填写1%，如果填写3%，则必须填写放弃3-1优惠政策的原因（发票中对应字段为“减按征税类型代码”）：

开具增值税专用发票时，按照实际情况选择“54：前期已开具3%征收率的发票，发生销售折让、中止或者退回等情形需要开具3%征收率的红字发票，或者开票有误需要重新开具3%征收率的发票”或“55：因为实际经营业务需要，放弃享受减按1%征收率征收增值税政策”。

● 直连单位只能开具当月发票，不支持跨月的预开发票处理：

算税校验上传的预开发票日期必须与当前系统时间为同一月份，免税发票直接上传时发票上传时间与开票时间必须在同一个月份；

● 发票上传时间与开票时间间隔需小于48小时。 

● 存在未缴税交易需及时处理，完成缴税上传发票或取消交易，跨月后企业不允许再对上月的交易自行取消。

● 支付渠道和交易单号需要同时有值或者同时为空，不允许一个有值、一个为空。当直连单位为自用平台时，支付渠道和交易单号必须有值，不允许为空，至少传入一组支付渠道和交易单号数据。只有自用和联用模式允许填写支付渠道和交易单号，他用模式支付渠道和交易单号必须为空。

● 当交易信息（支付渠道、交易单号）为空时，乐企开票模式代码必须为空；当支付信息有值时，若直连单位与使用单位的关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，乐企开票模式代码必须填写“01：乐企自用支付即开票”；若直连单位与使用单位的关系为不具有控制关系（联用）时，乐企开票模式代码必须填写“02：乐企联用支付即开票”。

● 下列规则需直连单位自行改造，无需上传乐企：

（1）增加反向开票的交易方式

回收企业反向开票前，在预填交易信息环节增加“交易方式”选项，默认为“线上支付”交易，即符合“支付即开票”交易方式。当自然人销售废品不具备“三流合一”交易方式时，回收企业应根据实际情况选择下列交易方式：

1）“现金支付”交易。适用于自然人向回收企业销售废品收取现金时，需由回收企业向其反向开票的情形。

2）“无货款支付”交易。适用于自然人向回收企业销售废品采取“以物易物”“抵债”“投资”等方式取得等价货物或者其他经济利益时，需由回收企业向其反向开票的情形。

3）“其他支付”交易。适用于自然人向回收企业销售废品采取“赊销”“分期收款”“线下银行转账”等收款方式时，需由回收企业向其反向开票的情形。

（2）增加反向开票的实人校验

回收企业向自然人销售废品反向开票前，应通过联用支付平台对自然人进行实人校验，如果自然人已在联用平台登记注册的，可复用联用平台的实人校验结果。具备下列条件的，还应通过联用平台进行实人刷脸校验，通过后可继续反向开票。

1）以现金支付、以物易物、抵债、投资等方式通过联用平台单次交易金额超过2万元或月累计金额超过10万元。

（3）增加反向开票的资料上传

联用平台应建立回收企业电子账户，根据交易信息形成电子收购台账，具体内容包括每笔收购业务的时间、地点、出售者及联系方式、废品名称、数量、价格等。联用平台还应为回收企业提供上传“证明业务真实性的资料”的通道，具体要求如下：

1）“现金支付”和“线下银行转账”。应录入实际收款人和付款金额，并上传现金支付收据和银行转账记录等证明资料。

2）“无货款支付”。应录入“以物易物”“抵债”“投资”等对应的等价金额，并上传相关合同协议或其他资料。

3）“赊销”和“分期收款”。应录入订单编号、付款时间、付款金额，一笔订单可对应多栏付款时间和金额，并上传赊销协议合同或其他证明资料。

联用平台对上传的证明资料应保持资料的原始性与完整性，证明资料应以图片上传，图片格式支持BMP、PNG、JPG、JPEG、PDF等，单个文件大小10M以内。

（4）增加反向开票的资金校验

联用平台应在通过实人校验和资料上传后，根据不同的交易方式预填发票开具金额。

1）对选择“现金支付”“线下银行转账”“无货款支付”交易的，联用平台应根据回收企业录入的付款金额或等价金额等自动预填发票开具金额，不校验是否实际支付。

2）对选择“赊销”“分期收款”交易的，联用平台应根据回收企业录入的付款时间、付款金额等以勾选的方式自动预填发票开具金额；可通过“线上支付”的，应与实际支付金额校验。对“一次录入多次付款开票”或“多次录入一次付款开票”的，联用平台应提供以勾选的方式自动汇总反向开票的功能。

（5）增加反向开票第三方缴税

自然人向回收企业销售废品不属于“线上支付”交易方式的，联用平台应根据发票交易金额，按照现有算税规则自动算税，生成缴税信息，在现有回收企业扣缴税款、自然人线上缴税情形外，增加由第三方扫码缴税的方式，解决例如在现金交易场景下，自然人手机等设备没有联网功能不支持交税的情况。

发票对应税费入库状态为“已上解待入库”“已入库”的，联用平台可按照发票开具后上传规则自行确认上传发票时间（一般不超过48小时）。

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### 2.2.8校验赋额额度
获取企业本地已下载未使用赋额额度，校验纳税人已下载未使用赋额额度和发票金额，若已下载未使用赋额额度 - 开票金额 < 0时，阻断开具报废产品收购发票开具或修改发票信息后重新开具；若已下载未使用赋额额度 - 开票金额 >= 0，更新本地已下载未使用赋额额度。

查询已下载未使用赋额额度，当满足以下任意条件时阻断开具报废产品收购蓝字发票：

● 查询已下载未使用赋额额度失败。

● 赋额额度信息中“已下载未使用赋额额度”小于开票金额。

##### 2.2.9发票赋码
从本地发票号码段中给要开具的报废产品收购发票依次分配不重复的发票号码，若本地发票号码已使用完毕，请求税局下载新的预赋码段。

##### 2.2.10计算待缴税费信息
根据预开具发票信息并按照算税规则，平台进行待缴税费的计算，如果是无需补缴税费的免税发票，则直接进行发票上传；如果是需要进行税费缴纳的发票，则进行算税校验。

##### 2.2.11校验待缴税费信息
涉及税费缴纳的发票，可以调用乐企平台提供的《报废产品收购待缴税费校验》接口，校验税费计算的准确性。

##### 2.2.12税款获取及缴纳
企业完成预开发票待缴税费校验后，通过《查询代缴税费缴款信息》接口查询缴款信息，并根据返回结果中的缴款信息进行税款缴纳，完成税款信息缴纳后，调用《查询税费缴纳结果》接口确认是否缴款成功。

如果无法通过返回的缴税信息完成缴款，可以通过缴税信息返回的《第三方平台提交缴款请求》获取第三方平台二维码进行缴税，并调用《查询税费缴纳结果》查询对应的扣款状态。

当查询缴纳结果返回扣款状态返回状态不明时，需要调用《电子税票缴款状态确认》确认最终的扣款状态。

##### 2.2.13发票上传
发票赋码成功、完成算税和税款校验、解缴后，将本地保存的报废产品收购蓝字发票预开具信息（发票状态为“预开具成功”），调用税务局端《报废产品收购发票上传》接口上传报废产品收购蓝字发票，并依据返回的结果，更新本地发票预上传结果。

##### 2.2.14查询发票上传结果
发票上传成功后，间隔10S依据发票上传返回的“受理流水号”调用税务局端《查询发票上传结果》接口查询报废产品收购蓝字发票是否接收成功，并依据返回的发票开具结果，更新本地发票开具结果。

### 3.红字确认单申请
#### 3.1全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114713846-7cc3335e-d80a-4a6d-8962-53e143ddc14b.png)

#### 3.2业务规则
##### 3.2.1判断纳税人申请资格
校验纳税人是否具备报废产品收购红字确认单申请资格，包括风险纳税人信息校验和纳税人资格校验。

根据本地查询的纳税人风险信息进行校验，当满足以下任意条件时禁止申请报废产品收购红字确认单：

● 未查询到纳税人风险信息，本地无纳税人风险信息

● 纳税人风险信息中“风险纳税人类型”为“Ⅰ类（高风险）”。

● 纳税人风险信息中“纳税人预警级别”为“红色预警”。

● 纳税人风险信息中“风险纳税人标志”为“Y（风险纳税人）”。

根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具报废产品收购红字确认单：

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### 3.2.2本地判断蓝字发票是否可红冲
查询本地保存蓝字发票信息、蓝字发票勾选信息，校验报废产品收购蓝字发票是否具备红冲条件。

对从本地查询的蓝字发票、蓝字发票勾选信息、报废产品收购红字发票信息进行判断，满足以下任意条件时禁止开具报废产品收购红字确认单：

● 企业业务系统中无蓝字发票信息。

● 对应蓝字发票被认定为异常发票。

● 对应蓝字发票状态为“作废”、“锁定”或“异常凭证”。

● 查询蓝字发票抵扣信息失败，本地无蓝字发票抵扣信息。

● 对应蓝字发票增值税用途为待退税、已退税、已抵扣（改退）、已代办退税、不予退税且不予抵扣时。

● 校验对应蓝字发票税收优惠类标签明细，当“冬奥会退税标签”为“已用于冬奥会退税”时。

##### 3.2.3录入、校验红字确认单信息
依据开票能力报废产品收购红字确认单要求，录入报废产品收购红字确认单信息，并依据报废产品收购红字确认单申请规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

###### 3.2.3.1 合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 录入方身份，必填，必须为“1”。

● 销售方纳税人识别号，必填，最大长度20位，填写自然人身份证件号码。

● 销售方名称，必填，最大长度300位。

● 购买方纳税人识别号，必填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 蓝字发票代码，选填，最大长度12位。

● 蓝字发票号码，必填，最大长度20位。

● 是否纸质发票标志，必填，取值范围为“Y”、“N”。

● 蓝字发票开票日期，必填，格式为yyyy-MM-dd HH:mm:ss。

● 蓝字发票合计金额，必填，最大长度18位，最多2位小数。

● 蓝字发票合计税额，必填，最大长度18位，最多2位小数。

● 蓝字发票发票票种代码，必填，取值范围为“01”、“02”。

● 蓝字发票特定要素类型代码，必填，取值范围为“24”。

● 红字冲销金额，必填，最大长度18位，最多2位小数。

● 红字冲销税额，必填，最大长度18位，最多2位小数。

● 红字发票冲红原因代码，必填，取值范围为“01”、“02”。

● 序号，必填，最大长度	8位，从1开始。

● 蓝字发票明细序号，必填，最大长度8位。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

● 项目名称，必填，最大长度600位。

● 规格型号，选填，最大长度150位。

● 单位，选填，最大长度300位。

● 单价，选填（如“数量”非空，则必填），最大长度25位。

● 数量，选填（如“单价”非空，则必填），最大长度25位。

● 金额，必填，最大长度18位，最多2位小数。

● 税率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

###### 3.2.3.2数据校验
● 含税金额=税额+金额，不能有误差。

● 红票开具金额<= 对应蓝字发票开具金额。

###### 3.2.3.3业务逻辑校验
● 开具报废产品收购发票时，只能使用特定要素标签归类为“17”的税收分类编码。 

● 申请报废产品收购发票红字确认单时，销售方信息为自然人信息，购买方信息为开票方信息，红字确认单只能由资源回收企业发起申请。

● 红字确认单的商品金额必须为负数，税额不为正数。

● 对应蓝字发票带折扣行时，将折扣金额、税额分摊反映在对应的项目名称行上，再进行红字确认单申请。

● 对应蓝字发票开具过红字发票时，系统对冲红的“对应蓝字发票明细序号”行累计数量、累计金额和累计税额进行监控。当累计开具红字发票的数量以及负数金额或者税额绝对值之和超过原蓝字发票时，不允许其继续开具红字发票。

● 当蓝字发票对应的“增值税用途标签”为空、“消费税用途标签”为“未勾选库存”、“入账状态标签”为“未入账”或“已入账撤销”时，允许部分红冲、全额红冲。

● “红冲原因”为“开票有误”时，必须全额红冲，并且明细单价、金额、数量必须和蓝字发票保持一致。

● “红冲原因”为“销货退回”时，只允许修改数量，不允许修改单价。

● “红冲原因”为“销售折让”时，单价、数量必须为空。

● 对于税控发票，申请红字确认单时，如果税控蓝票项目名称为*A*B，红字确认单项目名称字段填写税控蓝字发票项目名称第二个*号之后的内容，即B。

##### 3.2.4红字确认单申请
报废产品收购红字确认单录入校验通过后，首先在本地保存报废产品收购红字确认单申请信息，调用税务局端《报废产品收购红字确认单申请》接口将预申请报废产品收购红字确认单上传至税务局端，如果返回成功则表明预申请报废产品收购红字确认单上传成功。

### 4.红字确认单撤销
若需要对红字确认单进行撤销操作，调用《红字确认单确认》接口向税务局端上传红字确认单撤销信息，报废产品收购发票只能由购方发起红字确认单撤销。

### 5.红字发票开具
#### 5.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114714139-b218dab8-f8a0-491f-9393-67a835a7f8da.png)

#### 5.2.业务规则
##### 5.2.1校验红字确认单信息
查询本地保存的红字确认单信息，判断是否存在红字确认单信息以及红字确认单状态是否正常。 

根据查询的红字确认单信息进行校验，当满足以下任意条件时禁止开具报废产品收购红字发票：

● 未查询到红字确认单信息，本地红字确认单信息。

● 报废产品收购红字确认单信息状态不正确。

##### 5.2.2判断纳税人开票资格
校验纳税人是否具备报废产品收购红字发票开票资格，包括风险纳税人信息校验和纳税人资格校验。

根据查询的纳税人风险信息进行校验，当满足以下任意条件时禁止开具报废产品收购红字发票：

● 未查询到纳税人风险信息，本地无纳税人风险信息

● 纳税人风险信息中“风险纳税人类型”为“Ⅰ类（高风险）”。

● 纳税人风险信息中“纳税人预警级别”为“红色预警”。

● 纳税人风险信息中“风险纳税人标志”为“Y（风险纳税人）”。

根据查询的纳税人基本信息进行校验，当发生以下任意条件时禁止开具报废产品收购红字发票：

● 未查询到纳税人基本信息，本地无纳税人基本信息。

● 纳税人信息中“纳税人状态”不是“03（正常）”、“09（报验）”中的任意一个。

##### 5.2.3发票号段结余校验
判断本地是否还有未使用的发票，若无未使用的发票，需调用税务局端接口重新获取发票批量预赋码信息。 

##### 5.2.4录入、校验发票信息
依据开票能力红字发票开具的要求，依据红字确认单录入发票信息，并依据发票开具规则对发票信息进行业务逻辑校验，主要包括合规性校验、数值校验。

###### 5.2.4.1合规性校验
合规性校验主要对输入参数的类型、长度、是否必填、码值进行校验。以下任意一项不满足要求时，阻断发票开具。校验规则如下：

● 平台编号，必填，最大长度	20位。

● 发票票种，必填，取值范围为“01、02”。

● 发票号码，必填，长度20位，由数字组成，前2位为年份后2位。

● 蓝字发票标志，必填，取值范围为“1”.

● 开票日期，必填，格式必须是“yyyy-MM-dd HH:mm:ss”。

● 开票人，必填，最大长度300位。当使用联用（使用单位与直连平台无控制关系）、他用开票能力时，开票员必须与申请接入时配置的开票员一致。

● 开票人证件号码，必填，最大长度30位。当使用联用（使用单位与直连平台无控制关系）、他用能力时，必须是开票人证件类型对应的证件号码，并且与平台维护的信息一致。

● 开票人证件类型，必填，最大长度4位。当使用他用、联用（使用单位与直连平台无控制关系）能力时，取值范围为“ 101”，“ 102”，“ 103”，“ 199”，“ 201”，“ 202”，“ 203”，“ 204”，“ 205”，“ 206”，“ 207”，“ 208”，“ 209”，“ 210”，“ 211”，“ 212”，“ 213”，“ 214”，“ 215”，“ 216”，“ 217”，“ 218”，“ 219”，“ 220”，“ 221”，“ 222”，“ 223”，“ 224”，“ 225”，“ 226”，“ 227”，“ 228”，“ 229”，“ 230”，“ 231”，“ 232”，“ 233”，“ 234”，“ 235”，“ 236”，“ 237”，“ 238”，“ 239”，“ 240”，“ 241”，“ 291”，“ 299”。

● 收款人姓名，选填，最大长度150位。

● 复核人姓名，选填，最大程度75位。

● 特定要素，必填，取值范围为“24”。

● 区域代码，必填，最大长度20位。

● 销售方名称，必填，最大长度300位。

● 销售方纳税人识别号，必填，最大长度20位，必须与销售方自然人证件号码一致。

● 销售方自然人标志，必填，必须传“Y”。

● 销售方自然人国籍代码，必填，必须传“156”。

● 销售方自然人身份证件类型，必填，取值范围“201”。

● 销售方自然人身份证件号码，必填，最大长度30位。

● 销售方地址，选填，最大长度300位。

● 销售方电话，选填，最大长度60位。

● 销售方开户行，选填，最大长度120位。

● 销售方账号，选填，最大长度50位。

● 个人所得税项目，必填，与蓝字发票一致，

● 个人所得税税费，无需填写，红票传空。

● 增值税及附加税费，无需填写，红票传空。

● 收款银行名称，选填，最大长度120位。

● 收款银行账号，选填，最大长度100位。

● 购买方纳税人识别号，必填，最大长度	20位。

● 购买方名称，必填，最大长度300位。

● 购买方地址，选填，最大长度300位。

● 购买方电话，选填，最大长度60位。

● 购买方开户行名称，选填，最大长度120位。

● 购买方开户行银行账号，选填，最大长度50位。

● 经办人，选填，最大长度150位。

● 经办人身份证件号码，选填，最大长度	30位。

● 经办人联系电话，选填，最大长度60位。

● 合计金额，必填，最大长度18位，最多2位小数。

● 合计税额，必填，最大长度18位，最多2位小数。

● 价税合计，必填，最大长度18位，最多2位小数。

● 结算方式，必填，取值范围为“01”、“02”、“03”、“04”、“05”、“99”。

● 应税行为发生地，选填，最大长度11位。

● 对应蓝字发票号码，必填，长度20位。

● 红字确认信息单编号，必填，最大长度20位。

● 红字确认单uuid，必填，最大长度32位。

● 备注，选填，最大长度382位。

● 服务器地址，必填，长度20位。

●  mac地址，必填，长度20位。

●  CPU序列号，选填，长度20位。

● 主板序列号，选填，长度20位。

● 是否展示销售方银行账号标签，选填，最大长度1位。

● 是否展示购买方银行账号标签，选填，最大长度1位。

● 减按征税类型代码，选填，最大长度2位，不为空时取值范围“54、55”。

● 发票开具方式代码，必填，最大长度1位，取值范围“4”、“5”。

● 乐企开票模式代码，选填，最大长度2位，不为空时取值“01”、“02”。

● 支付渠道，选填，最大长度3位。

● 交易单号，选填，最大长度40位。

● 明细序号，必填，最大长度8位。

● 对应蓝字发票明细序号，必填，最大长度8位。

● 货物或应税劳务、服务名称，必填，最大长度300位。

● 商品服务简称，必填，最大长度120位。

● 项目名称，必填，最大长度600位。

● 规格型号，选填，最大长度150位。

● 单位，选填，最大长度300位。

● 数量，选填（如“单价”非空，则必填），最大长度25位。

● 单价，选填（如“数量”非空，则必填），最大长度25位。

● 金额，必填，最大长度18位，最多2位小数。

● 增值税税率/征收率，必填，最大长度16位，最多6位小数。必须在可用税率信息中存在。

● 税额，必填，最大长度18位，最多2位小数。

● 含税金额，必填，最大长度18位，最多2位小数。

● 商品和服务税收分类合并编码，必填，最大长度19位。必须在商品编码信息中存在。

● 发票行性质，必填，取值范围为“00”。

● 优惠政策标识，选填，不为空时取值范围为“03”、“08”。

● 附加要素名称，选填，最大长度200位。

● 附加要素类型，选填，最大长度200位。

● 附加要素值，选填，最大长度200位。

● 电子税票号码，选填，最大长度20位，红票传空。

###### 5.2.4.2数据校验
● 红字发票明细和红字确认单必须保持一致

● 开具红字发票时，优惠政策标识、减按征税类型代码必须与蓝字发票一致。

● 开具红字发票时，销售方名称、销售方证件类型、销售方纳税人识别号、销售方地址、销售方电话必须与原蓝票一致；同时个人所得税项目必须与原蓝票一致。

● 发票上传时间与开票时间间隔应当小于48小时。

● 只能上传开票日期为当月的报废产品收购发票。

● 只有自用和联用模式允许填写支付渠道和交易单号，他用模式支付渠道和交易单号必须为空。

● 当交易信息（支付渠道、交易单号）为空时，乐企开票模式代码必须为空；当支付信息有值时，若直连单位与使用单位的关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，乐企开票模式代码必须填写“01：乐企自用支付即开票”；若直连单位与使用单位的关系为不具有控制关系（联用）时，乐企开票模式代码必须填写“02：乐企联用支付即开票”

● “发票开具方式代码”根据直连单位与使用单位的关系填写内容，当直连单位和使用单位关系为直连单位自用、总分公司关系、母子公司关系、其他控制关系、同一监管部门时，必须填写“5：自建平台开票（乐企自用开票）”，当关系为不具有控制关系（他用）、不具有控制关系（联用）时，必须填写“4：第三方平台开票（乐企联用、他用开票）” 。

##### 5.2.5校验赋额额度
判断红字发票对应蓝字发票的开票日期，若红字发票对应蓝字发票的开票日期为当前月份，需要增加本地赋额额度，增加的数量为红字发票开票金额；若红字发票对应的蓝字发票的开票日期不是当前月份，不增加本地赋额额度。

##### 5.2.6发票赋码
从本地发票号码段中给要开具的报废产品收购发票依次分配不重复的发票号码，若本地发票号码已使用完毕，需调用税务局端接口重新获取发票批量预赋码信息。

##### 5.2.7发票上传
发票赋码成功后，首先在本地保存报废产品收购红字发票预开具信息（发票状态为“预开具成功”），调用税务局端《报废产品收购发票上传》接口预上传报废产品收购红字发票，并依据返回的结果，更新本地发票预上传结果。

##### 5.2.8查询发票上传结果
发票上传成功后，间隔10秒依据发票上传返回的“受理流水号”调用税务局端《查询发票上传结果》接口查询报废产品收购红字发票是否接收成功，并依据返回的发票开具结果，更新本地发票开具结果。

### 6.退税申请流程
#### 6.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114714858-94101b58-0f15-4c02-90ef-c8987539e3b2.png)

#### 6.2.业务规则
##### 6.2.1查询退税信息
当直连单位完成企业红字发票上传或取消取消后，可调用“查询退税信息”查询该自然人是否存在应退税税额。如存在应退税税额可由自然人确认后发起退税申请。

##### 6.2.2验证银行账号信息
发起退税申请需要传入自然人银行账号信息，可以调用《验证银行账号信息》接口查询该银行账号是否可以用于退税。

##### 6.2.3申请反向开票退税
直连单位查询到自然人有应退税额、收集到自然人银行账号信息后，可以调用“申请反向开票退税”接口进行退税申请，乐企服务端将返回各个税款所属税务机关的申请结果。

##### 6.2.4查询反向开票退税结果
发起申请成功后，直连单位可以每天定时调用“查询反向开票退税结果”接口查询对应的退税处理结果。

### 7.开票汇总确认
#### 7.1.全流程图
![](https://cdn.nlark.com/yuque/0/2025/png/647520/1759114715256-438043ab-d881-43bb-832c-4ac81730cf43.png)

#### 7.2.业务规则
##### 7.2.1数字化电子发票汇总信息上传
提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和税额以及已缴税额上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息、已上传并已缴税费数据进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。开票汇总确认后不允许上传已确认的月份的数字化电子发票。

若企业在每月13日零点前未上传上个月的汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票及对应的已缴税费数据。每月13日零点之后，上个月未上传的发票，请重新开具。

每月13日零点之前，当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

当汇总的发票数据应缴税费与企业已缴税费比对不一致时，阻断汇总确认。

调用《上传发票汇总确认信息》接口当接口调用时发生以下任意情形，调用失败：

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。

##### 7.2.2查询发票汇总确认信息
提供发票汇总确认信息查询功能，企业可以通过此接口查询历史汇总确认信息。

调用《查询发票会汇总确认信息》接口当接口调用时发生以下任意情形，调用失败：

● 网络通信异常。

● 返回报文存在error节点。

● “返回码”不为“00”。





# 五、接口技术说明
## （一）能力编码
| 能力名称 | 乐企报废产品收购开票能力 |
| --- | --- |
| 能力编码 | 202078 |


## （二）接口清单
| 序号 | 接口名称 | 服务编码 |
| --- | --- | --- |
| 1 | 获取数电票批量预赋码信息 | QDFPPLFM |
| 2 | 查询赋额额度 | CXSXED |
| 3 | 下载/退回赋额额度 | XZTHSXED |
| 4 | 调整赋额额度有效期 | TZSXEDYXQ |
| 5 | 查询纳税人风险信息 | CXNSRFXXX |
| 6 | 查询纳税人基本信息 | CXNSRJBXX |
| 7 | 查询可用税率信息 | CXKYSL |
| 8 | 查询税收分类编码信息 | CXSSFLBM |
| 9 | 查询自然人开票信息 | CXZRRKPXX |
| 10 | 报废产品收购发票上传 | BFCPSGFPSC |
| 11 | 查询发票上传结果 | CXQDFPSCJG |
| 12 | 数字化电子发票红字确认单申请 | QDHZQRDSQ |
| 13 | 数字化电子发票红字确认单确认 | QDHZQRDQR |
| 14 | 查询数字化电子发票红字确认单列表 | CXQDHZQRDLB |
| 15 | 查询数字化电子发票红字确认单明细 | CXQDHZQRDMX |
| 16 | 上传发票汇总确认信息 | SCFPHZQRXX |
| 17 | 查询发票汇总确认信息 | CXFPHZQRXX |
| 18 | 查询企业未缴税记录 | CXQYWJSJL |
| 19 | 报废产品收购待缴税费校验 | BFCPSGDJSFJY |
| 20 | 查询待缴税费缴款信息 | CXDJSFJKXX |
| 21 | 查询税费缴纳结果 | CXSFJNJG |
| 22 | 取消预开发票交易 | QXYKFPJY |
| 23 | 查询反向开票算税参数 | CXFXKPSSCS |
| 24 | 查询应代办未代办税费信息 | CXYDBWDBSFXX |
| 25 | 查询退税信息 | CXTSXX |
| 26 | 申请反向开票退税 | SQFXKPTS |
| 27 | 查询报废产品退税结果 | CXBFCPTSJG |
| 28 | 第三方平台提交缴款请求 | DSFPTTJJKQQ |
| 29 | 确认电子税票扣款状态 | QRDZSPKKZT |
| 30 | 验证银行卡号信息 | YZYHKHXX |
| 31 | 自然人间接登记 | ZRRJJDJ |
| 32 | 上传发票对账数据 | SCFPDZSJ |
| 33 | 查询发票对账不符数据 | CXFPDZBFSJ |
| 34 | <font style="color:#000000;">发票用途状态信息查询</font> | FPZTXXCX |


### 1.获取数电票批量预赋码信息
#### 1.1接口说明
向纳税人提供批量预赋码功能，用于企业给发票自动赋发票号码。

企业使用开票前置判断企业发票库存低于“20%”阈值时，调用此接口申请预分配置新号码段。

企业每次获取数电票批量预赋码信息时，需要上传业务流水号，由“使用单位id”+“直连单位id”+“32位随机生成码”组成，若企业由于网络超时等原因没有收到获取结果，可以通过该业务流水号重新请求，重新请求时领用数量需要保持不变，企业每次最多申请5000份发票。

当企业完成跨省迁移后，不能再使用跨省迁移前下载的发票号码段，应当重新下载发票号码段，使用迁移后下载的发票号码段开具上传发票。

#### 1.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 1.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 申领发票的纳税人识别号或统一社会信用代码 |
| 2 | lysl | 领用数量 | number | 10 | 是 | 申领数量最大值为：5000 |
| 3 | ywlsh | 业务流水号 | varchar | 100 | 是 | “使用单位id”+“直连单位id”+“32位随机生成数” |


#### 1.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>	    "lysl": "领用数量",<br/>		"ywlsh": "业务流水号"<br/>} |
| --- |


#### 1.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | fpqshm | 发票起始号码 | varchar | 20 | 是 |  |
| 4 | fpzzhm | 发票终止号码 | varchar | 20 | 是 |  |
| 5 | lysl | 领用数量 | number | 10 | 是 |  |


#### 1.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"fpqshm": "发票起始号码",<br/>			"fpzzhm": "发票终止号码",<br/>			"lysl": "领用数量"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>		}<br/>	}<br/>} |
| --- |


### 2.查询赋额额度
#### 2.1接口说明
向纳税人提供赋额额度查询功能，可查询企业当前在税务局端的赋额额度信息，包括：暂停授信标志、本月赋额额度、可用剩余额度、已下载额度、已下载未使用额度、属期。

#### 2.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 2.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 申领发票的纳税人识别号或统一社会信用代码 |


#### 2.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 2.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | ztsxbz | 暂停授信标志 | varchar | 2 | 是 | Y：暂停<br/>N：未暂停 |
| 4 | bysxed | 本月赋额额度 | number | 18,2 | 是 | 本月总赋额额度 |
| 5 | kysyed | 可用剩余额度 | number | 18,2 | 是 | 本月可用赋额额度 |
| 6 | yxzed | 已下载额度 | number | 18,2 | 是 | 本月乐企1.5已下载的全部赋额额度 |
| 7 | yxzwsyed | 已下载未使用额度 | number | 18,2 | 是 | 本月乐企1.5已下载的全部赋额额度减已上传的开票日期为本月的发票的总金额 |
| 8 | sq | 属期 | varchar | 6 | 是 | 格式：yyyyMM |


#### 2.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>		"returncode": "00",<br/>		"returnmsg": "成功",<br/>		"ztsxbz": "暂停授信标志",<br/>		"bysxed": "本月赋额额度",<br/>		"kysyed": "可用剩余额度",<br/>		"yxzed": "已下载额度",<br/>		"yxzwsyed": "已下载未使用额度",<br/>		"sq": "属期"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>	"RequestId": "16位随机数字和字母组合",<br/>	"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>		}<br/>	}<br/>} |
| --- |


### 3.下载/退回赋额额度
#### 3.1接口说明
向纳税人提供下载/退回赋额额度功能，企业可通过接口从税务局端下载或退回赋额额度。

企业每次下载/退回发票额度时，需要上传业务流水号，由“使用单位id”+“直连单位id”+“32位随机生成码”组成，若企业由于网络超时等原因没有收到发票额度下载/退回结果，可以通过该业务流水号重新获取，使用相同业务流水号申请下载/退回发票额度时申请类型与申请额度需要相同。

#### 3.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 3.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 申领发票的纳税人识别号或统一社会信用代码 |
| 2 | ptbh | 平台编号 | varchar | 20 | 是 |  |
| 3 | sqlx | 申请类型 | varchar | 2 | 是 | 0：下载<br/>1：退回 |
| 4 | sqed | 申请额度 | number | 20,2 | 是 |  |
| 5 | ywlsh | 业务流水号 | varchar | 100 | 是 | “使用单位id”+“直连单位id”+“32位随机生成数” |


#### 3.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>	"ptbh": "平台编号",<br/>	"sqlx": "申请类型",<br/>	"sqed": "申请额度",<br/>	"ywlsh": "业务流水号"<br/>} |
| --- |


#### 3.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | syqjq | 赋额额度使用区间起 | date | | 否 | 下载赋额额度时，有此节点<br/>发票开票日期在赋额额度使用区间（含）时才可以使用.格式：yyyymmdd |
| 4 | syqjz | 赋额额度使用区间止 | date | | 否 | 下载赋额额度时，有此节点<br/>发票开票日期在赋额额度使用区间（含）时才可以使用.格式：yyyymmdd |


#### 3.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>"syqjq": "赋额额度使用区间起",<br/>"syqjz": "赋额额度使用区间止"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 4.调整赋额额度有效期
#### 4.1接口说明
给企业提供调整赋额额度有效期接口，企业在月初未申报时下载的赋额额度的有效期止为当月申报截止日期，超过赋额额度有效期止后，无法开具报废产品收购发票，企业在完成申报或到达赋额额度有效期止后，通过此接口调整赋额额度有效期，并根据税局端返回的有效期更新本地赋额额度有效期。

#### 4.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 4.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | xsfnsrsbh | 统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 | 开票方纳税人识别号 |
| 2 | sxedsq | 赋额额度属期 | varchar | 7 | 是 | 格式：yyyy-MM |


#### 4.4请求报文示例
| {<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"sxedsq": "赋额额度属期"<br/>} |
| --- |


#### 4.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | sxedsq | 赋额额度属期 | varchar | 7 | 是 | 格式：yyyy-MM |
| 4 | syqjq | 赋额额度使用区间起 | date | | 否 | 下载赋额额度时，有此节点；发票开票日期在赋额额度使用区间（含）时才可以使用，格式：yyyymmdd |
| 5 | syqjz | 赋额额度使用区间止 | date | | 否 | 下载赋额额度时，有此节点；发票开票日期在赋额额度使用区间（含）时才可以使用，格式：yyyymmdd |


#### 4.6返回报文示例 
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>"sxedsq ": "赋额额度属期",<br/>"syqjq ": "赋额额度使用区间起"<br/>"syqjz ": "赋额额度使用区间止"<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 5.查询纳税人风险信息
#### 5.1接口说明
向企业提供查询纳税人风险信息的功能，企业可将查询的风险信息保存在本地。在开票时自校验该接口获取的风险信息是否满足开具发票的条件，控制高风险企业操作涉税业务。

#### 5.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 5.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |


#### 5.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 5.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| 4 | fxnsrlx | 风险纳税人类型 | varchar | 2 | 否 | 空：非风险纳税人<br/>01：Ⅰ类（高风险）纳税人<br/>02：Ⅱ类（中风险）纳税人<br/>03：Ⅲ类（低风险）纳税人<br/>04：Ⅳ类（无风险）纳税人 |
| 5 | nsrxydj | 纳税人信用等级 | varchar | 20 | 是 | A，B，C，D，M |
| 6 | nsryjjb | 纳税人预警级别 | varchar | 1 | 否 | 空：无预警<br/>01：红色预警<br/>02：黄色预警<br/>03：蓝色预警 |
| 7 | fxnsrbz | 风险纳税人标志 | varchar | 1 | 是 | Y：风险纳税人<br/>N：正常纳税人 |


#### 5.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>			"fxnsrlx": "风险纳税人类型",<br/>			"nsrxydj": "纳税人信用等级",<br/>			"nsryjjb": "纳税人预警级别",<br/>			"fxnsrbz": "风险纳税人标志"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 6.查询纳税人基本信息
#### 6.1接口说明
向企业提供查询纳税人基本信息的功能，企业可将查询的基本信息，包括生产经营信息、税务机关信息、企业性质、消费税性质等保存在本地。在开票时自校验该接口获取的纳税人基本信息是否满足开具发票的条件。

#### 6.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 6.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |


#### 6.4请求报文示例
| {<br/>	"nsrsbh": "纳税人识别号/统一社会信用代码"<br/>} |
| --- |


#### 6.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 |  |
| 4 | djxh | 登记序号 | varchar | 20 | 否 |  |
| 5 | ssdabh | 税收档案编号 | varchar | 20 | 否 |  |
| 6 | nsrmc | 纳税人名称 | varchar | 300 | 是 |  |
| 7 | nsrlx | 纳税人类型标签 | varchar | 300 | 是 | 1：一般纳税人<br/>2：小规模纳税人<br/>3：转登记小规模纳税人<br/>4：辅导期一般纳税人<br/>5：自然人 |
| 8 | scjydz | 生产经营地址 | varchar | 300 | 是 |  |
| 9 | zcdyzbm | 注册地邮政编码 | varchar | 6 | 是 |  |
| 10 | zcdlxdh | 注册地联系电话 | varchar | 60 | 否 |  |
| 11 | fddbrxm | 法人名称(法定代表人姓名 | varchar | 150 | 是 |  |
| 12 | djzclxdm | 登记注册类型（国标） | varchar | 3 | 否 |  |
| 13 | hydm | 行业代码 | varchar | 4 | 是 | 主行业代码特定征收部门可空 |
| 14 | qxjswjgdm | 区县级税务机关代码 | varchar | 11 | 是 |  |
| 15 | zgswskfjdm | 税务机关代码 | varchar | 11 | 是 | 主管税务所科分局 |
| 16 | zgswskfjmc | 税务机关名称 | varchar | 300 | 是 | 主管税务所科分局 |
| 17 | cwfzrxm | 财务负责人姓名 | varchar | 150 | 是 |  |
| 18 | khhmc | 账户名称 | varchar | 300 | 是 |  |
| 19 | yhzh | 账号 | varchar | 50 | 否 | 首选账户账号 |
| 20 | bsrxm | 企业办税人员姓名 | varchar | 150 | 否 |  |
| 21 | xdpsdqybz | 数字化电子票试点企业标识 | varchar | 20 | 是 | Y：数字化电子票试点企业<br/>N：不是数字化电子票试点企业 |
| 22 | ckqyfldm | 出口企业分类 | varchar | 20 | 是 | 空：非出口企业<br/>01：一类出口企业<br/>02：二类出口企业<br/>03：三类出口企业<br/>04：四类出口企业 |
| 23 | zfjglxdm | 总分机构类型 | varchar | 20 | 是 | 0：非总分机构 <br/>1：总机构<br/>2：分支机构 <br/>3：分总机构 |
| 24 | yhyywddm | 银行营业网点 | varchar | 13 | 否 |  |
| 25 | nsrztdm | 开票方纳税人状态 | varchar | 2 | 是 | 01：受理<br/>02：筹建期<br/>03：正常<br/>04：停业<br/>05：非正常<br/>06：清算<br/>07：注销<br/>08：非正常户注销<br/>09：报验<br/>10：核销报验<br/>11：中断缴费<br/>12：恢复缴费<br/>13：简易注销无异议<br/>99：其他 |
| 20 | yxqq | 纳税人类型标签有效期起 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| 27 | yxqz | 纳税人类型标签有效期止 | date | | 否 | 格式：<br/>yyyy-MM-dd |
| 28 | qyhyxzdm | 企业行业性质 | varchar | 300 | 否 | 01：成品油生产企业 <br/>02：成品油经销企业 <br/>03：国内机动车生产企业 <br/>04：进口机动车生产企业驻我国办事机构或总授权代理机构 <br/>05：机动车授权经销企业 <br/>06：其他机动车贸易商 <br/>07：二手车市场 <br/>08：二手车经销企业<br/>09：二手车拍卖企业 <br/>10：稀土矿产企业 <br/>11：稀土冶炼分离企业 <br/>12：稀土其他企业<br/>13：稀土矿产企业、稀土冶炼分离企业、稀土其他企业<br/>14：稀土矿产企业、稀土冶炼分离企业 15：稀土矿产企业、稀土其他企业 <br/>16：稀土冶炼分离企业、稀土其他企业 <br/>17：卷烟生产企业<br/>18：卷烟批发企业<br/>19：卷烟出口企业 <br/>20：生产型出口企业 <br/>21：外贸型出口企业<br/>22：外贸综合服务企业<br/>23：自贸区试点企业<br/>24：特殊监管区内企业 <br/>25：增值税一般纳税人资格试点<br/>26：市场采购试点<br/>27：退税商店<br/>28：电子商务出口企业<br/>29：享受出口退税政策的融资租赁企业 <br/>30：增值税零税率应税服务提供者<br/>31：房地产开发企业 <br/>32：农产品深加工企业<br/>33：外购石脑油、燃料油用于消费税退税企业 <br/>34：从事机动车进口的其他贸易商<br/>35：自产农产品者 <br/>36：报废产品收购企业 <br/>37：光伏收购企业 <br/>38：住房租赁企业 <br/>39：冬奥会退税企业50：资源回收企业反向开票-一般计税<br/>51：资源回收企业反向开票-简易计税 |
| 29 | xfsnsrlxdm | 消费税纳税人类型 | varchar | 20 | 否 | 01：卷烟生产消费税纳税人 <br/>02：卷烟批发消费税纳税人 <br/>03：白酒生产消费税纳税人 <br/>04：黄酒生产消费税纳税人 <br/>05：啤酒生产消费税纳税人 <br/>06：其他酒生产消费税纳税人 <br/>07：小汽车生产消费税纳税人 <br/>08：超豪华小汽车消费税纳税人 <br/>09：汽油生产消费税纳税人 <br/>10：石脑油生产消费税纳税人 <br/>11：溶剂油生产消费税纳税人 <br/>12：润滑油生产消费税纳税人 <br/>13：柴油生产消费税纳税人 <br/>14：航空煤油生产消费税纳税人 <br/>15：燃料油生产消费税纳税人<br/>16：电池生产消费税纳税人 <br/>17：涂料生产消费税纳税人 <br/>18：高档化妆品生产消费税纳税人<br/>19：金银首饰铂金首饰和钻石及钻石饰品零售消费税纳税人<br/>20：其他贵重首饰和珠宝玉石生产消费税纳税人<br/>21：鞭炮焰火生产消费税纳税人 <br/>22：摩托车生产消费税纳税人 <br/>23：高尔夫球及球具生产消费税纳税人 <br/>24：高档手表生产消费税纳税人 <br/>25：游艇生产消费税纳税人 <br/>26：木制一次性筷子生产消费税纳税人 <br/>27：实木地板生产消费税纳税人 <br/>28：雪茄烟生产消费税纳税人 <br/>29：烟丝生产消费税纳税人 |


#### 6.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		“Data”:{<br/>          "returncode": "00",<br/>          "returnmsg": "成功",<br/>			“jcxx”: {<br/>				"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>				"djxh": "登记序号",<br/>				"ssdabh": "税收档案编号",<br/>				"nsrmc": "纳税人名称",<br/>				"nsrlx": "纳税人类型",<br/>				"scjydz": "生产经营地址",<br/>				"zcdyzbm": "注册地邮政编码",<br/>				"zcdlxdh": "注册地联系电话",<br/>				"fddbrxm": "法人名称(法定代表人姓名",<br/>				"djzclxdm": "登记注册类型（国标）",<br/>				"hydm": "行业代码",<br/>				"qxjswjgdm": "区县级税务机关代码",<br/>				"zgswskfjdm": "税务机关代码",<br/>				"zgswskfjmc": "税务机关名称",<br/>				"cwfzrxm": "财务负责人姓名",<br/>				"khhmc": "账户名称",<br/>				"yhzh": "账号",<br/>				"bsrxm": "企业办税人员姓名",<br/>				"xdpsdqybz": "数字化电子票试点企业标识",<br/>				"ckqyfldm": "出口企业分类",<br/>				"zfjglxdm": "总分机构类型",<br/>				"yhyywddm": "银行营业网点",<br/>				"nsrztdm": "开票方纳税人状态",<br/>				"yxqq": "有效期起",<br/>				"yxqz": "有效期止"<br/>			},<br/>			“qyhyxzGrid”: [<br/>				{<br/>						"qyhyxzdm": "企业行业性质",<br/>						"yxqq": "有效期起",<br/>						"yxqz": "有效期止"<br/>				}],<br/>			“xfsnsrlxGrid”: [<br/>				{<br/>						"xfsnsrlxdm": "消费税纳税人类型",<br/>						"yxqq": "有效期起",<br/>						"yxqz": "有效期止"<br/>				}]<br/>		}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 7.查询可用税率信息
#### 7.1接口说明
向企业提供查询可用税率信息的功能，企业可将查询的基本信息保存在本地。在开票时选择保存在本地的可用税率。

#### 7.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 7.3请求参数
无

#### 7.4请求报文示例
| {} |
| --- |


#### 7.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | count | 总数量 | number | 10 | 是 |  |
| 4 | csxz | 参数性质 | varchar | 2 | 是 | 1：税率，2：征收率 |
| 5 | slzsl | 税率征收率 | number | 16,6 | 是 |  |
| 6 | yslbz | 原税率标志 | varchar | 1 | 是 | Y：是原税率，N：非原税率 |
| 7 | dyysl | 对应原税率 | varchar | 150 | 否 | 百分比形式、逗号间隔 |
| 8 | cszt | 参数状态 | varchar | 1 | 是 | 0：启用，1：停用 |
| 9 | yxqq | 有效期起 | date | | 是 | 时间格式：yyyy-MM-dd |
| 10 | yxqz | 有效期止 | date | | 否 | 时间格式：yyyy-MM-dd |
| 11 | tyrq | 停用日期 | date | | 否 | 时间格式：yyyy-MM-dd |


#### 7.6接口报文示例
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"count": "总数量",<br/>			"slzslList": [<br/>				{<br/>					"csxz": "参数性质",<br/>					"slzsl": "税率征收率",<br/>					"yslbz": "原税率标志",<br/>					"dyysl": "对应原税率",<br/>					"cszt": "参数状态",<br/>					"yxqq": "有效期起",<br/>					"yxqz": "有效期止",<br/>					"tyrq": "停用日期"<br/>				}]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 8.查询税收分类编码信息
#### 8.1接口说明
向企业提供查询商品税收分类编码信息的功能，企业可将查询的编码信息保存在本地。在开票时选择保存在本地的税收分类编码。

#### 8.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 8.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号/统一社会信用代码 | varchar | 20 | 是 | 开票纳税人识别号/统一社会信用代码 |
| 2 | sjc | 时间戳 | date | | 否 | 格式：yyyyMMddHHmmss<br/>首次下载时为空；<br/>非首次下载时，传入上次下载返回的时间戳.格式：yyyyMMddHHmmss |
| 3 | sjswjgdm | 省级税务机关代码 | varchar | 11 | 否 |  |


#### 8.4请求报文示例
| {<br/>"nsrsbh": "纳税人识别号/统一社会信用代码",<br/>"sjc": "时间戳",<br/>"sjswjgdm": "省级税务机关代码"<br/>} |
| --- |


#### 8.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | sjc | 时间戳 | date | | 是 | 格式：yyyyMMddHHmmss<br/>用于增量下载 |
| 4 | count | 总数量 | number | 10 | 是 |  |
| 5 | fjbm | 父级编码 | varchar | 19 | 是 |  |
| 6 | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| 7 | tdyslxdm | 特定要素标签归类 | varchar | 2 | 是 | 01：成品油<br/>02：稀土<br/>03：建筑服务<br/>04：货物运输<br/>05：不动产销售<br/>06：不动产租赁<br/>07：代收车船使用税<br/>08：通行费<br/>09：旅客运输<br/>10：医疗服务<br/>11：农产品<br/>12：拖拉机和联合收割机<br/>13：机动车<br/>14：光伏收购<br/>15：卷烟<br/>17：报废产品 |
| 8 | cezs | 差额征税 | varchar | 1 | 否 | Y：是，N：否 |
| 9 | bzs | 不征税 | varchar | 1 | 否 | Y：是，N：否 |
| 10 | jzjtdm | 即征即退代码集合 | varchar | 150 | 否 | 01：增值税即征即退-软件产品<br/>02：增值税即征即退-资源综合利用产品<br/>03：增值税即征即退-管道运输服务<br/>04：增值税即征即退-有形动产融资租赁服务<br/>05：增值税即征即退-有形动产融资性售后回租服务<br/>06：增值税即征即退-新型墙体材料<br/>07：增值税即征即退-风力发电产品<br/>08：增值税即征即退-光伏发电产品<br/>09：增值税即征即退-动漫软件产品<br/>10：增值税即征即退-飞机维修劳务<br/>11：增值税即征即退-黄金<br/>12：增值税即征即退-铂金 |
| 11 | sphfwmc | 商品和服务名称 | varchar | 150 | 是 |  |
| 12 | sphfwfljc | 商品和服务分类简称 | varchar | 120 | 是 |  |
| 13 | sm | 说明 | varchar | | 否 |  |
| 14 | zzssl | 增值税税率 | varchar | 50 | 否 | 取值返回是中文顿号连接的百分数。例如3%、5% |
| 15 | zsl | 征收率 | varchar | 50 | 否 | 取值返回是中文顿号连接的百分数。例如3%、5% |
| 16 | zzstsgl | 增值税特殊管理 | varchar | 150 | 否 |  |
| 17 | zzszcyj | 增值税政策依据 | varchar | 300 | 否 |  |
| 18 | zzstsnrdm(zzsjmszcdmb) | 增值税特殊内容代码（增值税减免税政策代码表） | varchar | 300 | 否 |  |
| 19 | xfsgl | 消费税管理 | varchar | 150 | 否 |  |
| 20 | xfszcyj | 消费税政策依据 | varchar | 300 | 否 |  |
| 21 | xfstsnrdm | 消费税特殊内容代码 | varchar | 300 | 否 |  |
| 22 | gjz | 关键字 | mediumtext | | 否 |  |
| 23 | sfhzx | 是否汇总项 | varchar | 1 | 是 | Y：是，N：否 |
| 24 | dytjjbm | 对应统计局编码（2011年版）或国民行业代码 | mediumtext | | 否 |  |
| 25 | hgjcksppm | 海关进出口商品品目 | mediumtext | | 否 |  |
| 26 | qyrq | 启用日期 | date | | 是 | 格式：yyyy-MM-dd |
| 27 | tyrq | 停用日期 | date | | 否 | 格式：yyyy-MM-dd |
| 28 | hydm | 行业代码 | varchar | 4 | 否 | 主行业代码特定征收部门可空 |
| 29 | dydhy | 对应的行业 | varchar | 68 | 否 |  |
| 30 | hydydzspm1 | 行业对应的征收品目一 | varchar | 9 | 否 |  |
| 31 | hydydzsmc1 | 行业对应的征收名称一 | varchar | 210 | 否 |  |
| 32 | hydydzspm2 | 行业对应的征收品目二 | varchar | 9 | 否 |  |
| 33 | hydydzsmc2 | 行业对应的征收名称二 | varchar | 210 | 否 |  |


#### 8.6返回报文示例 
成功返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data":{<br/>		"returncode": "00",<br/>		"returnmsg": "成功",<br/>			"sjc": "时间戳",<br/>			"count": "总数量",<br/>			"ssbmList": [<br/>				{<br/>				   "fjbm": "父级编码",<br/>				   "sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>					"tdyslxdm": "特定要素标签归类",<br/>					"cezs": "差额征税",<br/>					"bzs": "不征税",<br/>					"jzjtdm": "即征即退代码集合",<br/>					"sphfwmc": "商品和服务名称",<br/>					"sphfwfljc": "商品和服务分类简称",<br/>					"sm": "说明",<br/>					"zzssl": "增值税税率",<br/>					"zsl": "征收率",<br/>					"zzstsgl": "增值税特殊管理",<br/>					"zzszcyj": "增值税政策依据",<br/>					"zzstsnrdm": "增值税特殊内容代码（增值税减免税政策代码表）",<br/>					"xfsgl": "消费税管理",<br/>					"xfszcyj": "消费税政策依据",<br/>					"xfstsnrdm": "消费税特殊内容代码",<br/>					"gjz": "关键字",<br/>					"sfhzx": "是否汇总项",<br/>					"dytjjbm": "对应统计局编码（2011年版）或国民行业代码",<br/>					"hgjcksppm": "海关进出口商品品目",<br/>					"qyrq": "启用日期",<br/>					"tyrq": "停用日期",			<br/>					"zspmList": [<br/>						{<br/>	                     "hydm": "行业代码",<br/>							"dydhy": "对应的行业",<br/>							"hydydzspm1": "行业对应的征收品目一",<br/>							"hydydzsmc1": "行业对应的征收名称一",<br/>							"hydydzspm2": "行业对应的征收品目二",<br/>							"hydydzsmc2": "行业对应的征收名称二"<br/>						}]<br/>				}]<br/>}<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 9.查询自然人开票信息
#### 9.1接口说明
提供查询自然人出售者开票信息，包括自然人月累计开票金额、是否阻断反向开票自然人，用于开票前的校验规则处理。

#### 9.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 9.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | zrrxm | 自然人姓名 | varchar | 100 | 是 |  |
| 2 | sfzjlx | 身份证件类型 | char | 3 | 是 | 201:居民身份证 |
| 3 | sfzjhm | 身份证件号码 | varchar | 20 | 是 |  |


#### 9.4请求报文示例
| {<br/>"zrrxm": "自然人姓名",<br/>"sfzjlx": "身份证件类型",<br/>"sfzjhm": "身份证件号码"<br/>} |
| --- |


#### 9.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | zrrxm | 自然人姓名 | varchar | 100 | 是 |  |
| 4 | sfzjlx | 身份证件类型 | char | 3 | 是 | 201-居民身份证 |
| 5 | sfzjhm | 身份证件号码 | varchar | 20 | 是 |  |
| 6 | zdfxkpzrrbz | 阻断反向开票自然人标志 | char | 1 | 是 | Y：需要阻断<br/>N：无需阻断 |
| 7 | kpyf | 开票月份 | varchar | 10 | 是 | 格式：yyyyMM |
| 8 | yljkpzje | 月累计开票总金额 | number | 18,2 | 是 | 当月累计开票总金额 |
| 9 | lqfxkpppje | 乐企反向开票普票金额 | number | 18,2 | 是 |  |
| 10 | lqfxkpzpje | 乐企反向开票专票金额 | number | 18,2 | 是 |  |
| 11 | lqfxkpppse | 乐企反向开票普票税额 | number | 18,2 | 是 |  |
| 12 | lqfxkpfs | 乐企反向开票份数 | int | | 是 |  |
| 13 | lqfxkpppmsje | 乐企反向开票普票免税金额 | number | 18,2 | 是 |  |
| 14 | dpfxkpppje | 电票反向开票普票金额 | number | 18,2 | 是 |  |
| 15 | dpfxkpzpje | 电票反向开票专票金额 | number | 18,2 | 是 |  |
| 16 | dpfxkpppse | 电票反向开票普票税额 | number | 18,2 | 是 |  |
| 17 | dpfxkpfs | 电票反向开票份数 | int | | 是 |  |
| 18 | skfxkpppje | 税控反向开票普票金额 | number | 18,2 | 是 |  |
| 19 | skfxkpzpje | 税控反向开票专票金额 | number | 18,2 | 是 |  |
| 20 | skfxkpppse | 税控反向开票普票税额 | number | 18,2 | 是 |  |
| 21 | skfxkpfs | 税控反向开票份数 | int | | 是 |  |


#### 9.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>"zrrxm": "自然人姓名",<br/>"sfzjlx": "身份证件类型",<br/>"sfzjhm": "身份证件号码",<br/>"zdfxkpzrrbz": "阻断反向开票自然人标志",<br/>zrrcszKpxxList:[{<br/>"yf": "月份",<br/>"yljkpzje": "月累计开票总金额",<br/>"lqfxkpppje": "乐企反向开票普票金额",<br/>"lqfxkpzpje": "乐企反向开票专票金额",<br/>"lqfxkpppse": "乐企反向开票普票税额",<br/>"lqfxkpfs": "乐企反向开票份数",<br/>"lqfxkpppmsje": "乐企反向开票普票免税金额",<br/>"dpfxkpppje": "电票反向开票普票金额",<br/>"dpfxkpzpje": "电票反向开票专票金额",<br/>"dpfxkpppse": "电票反向开票普票税额",<br/>"dpfxkpfs": "电票反向开票份数",<br/>"skfxkpppje": "税控反向开票普票金额",<br/>"skfxkpzpje": "税控反向开票专票金额",<br/>"skfxkpppse": "税控反向开票普票税额",<br/>"skfxkpfs": "税控反向开票份数"<br/><br/>}]<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 10.报废产品收购发票上传
#### 10.1接口说明
给企业提供上传开具的报废产品收购预开发票功能，上传成功后给企业返回信息。

税务局端接收到企业上传的报废产品收购发票后，依次校验企业是具备开票条件、发票信息是否合规、是否超过赋额额度、报废产品收购发票号码是否合法等，当校验不通过时，不接收企业上传的报废产品收购发票，返回具体错误信息。每次上传最大票量为100张数字化电子发票。

#### 10.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 10.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | ptbh | 平台编号 | varchar | 20 | 是 | 直连单位ID |
| 2 | fppz | 发票票种 | varchar | 2 | 是 | 01：增值税专用发票<br/>02：普通发票 |
| 3 | fphm | 发票号码 | varchar | 20 | 是 |  |
| 4 | lzfpbz | 蓝字发票标志 | varchar | 1 | 是 | 0：蓝字发票<br/>1：红字发票 |
| 5 | kprq | 开票日期 | datetime | | 是 | 格式：<br/>yyyy-MM-dd HH:mm:ss |
| 6 | kpr | 开票人 | varchar | 300 | 是 |  |
| 7 | kprzjhm | 开票人证件号码 | varchar | 30 | 是 |  |
| 8 | kprzjlx | 开票人证件类型 | varchar | 4 | 是 |  |
| 9 | skrxm | 收款人姓名 | varchar | 150 | 否 |  |
| 10 | fhrxm | 复核人姓名 | varchar | 75 | 否 |  |
| 11 | tdys | 特定要素 | varchar | 2 | 是 | 24：报废产品收购 |
| 12 | qyDm | 区域代码 | varchar | 20 | 是 | |
| 13 | sfxszrrsygdbfcp | 是否销售自然人使用过的报废产品 | char | 1 | 是 | Y：销售自己使用过的报废产品<br/>N：销售收购的报废产品<br/>红字发票填写时与蓝票一致 |
| 14 | grsdsxm | 个人所得税项目 | varchar | 2 | 是 | 1:财产转让所得<br/>2:经营所得，红字发票需与蓝字发票一致 |
| 15 | grsdssf | 个人所得税 | number | 18.2 | 否 | 蓝字发票必填<br/>免税发票传0 |
| 16 | zzsjfjsf | 增值税及附加税费 | number | 18.2 | 否 | 蓝字发票必填<br/>无需补缴税费的免税发票传0 |
| 17 | sgfplxDm | 收购发票类型代码 | varchar | 2 | 是 | 04：报废产品收购发票 |
| 18 | xsfmc | 销售方姓名 | varchar | 300 | 是 | |
| 20 | xsfnsrsbh | 销售方统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 | 必须与自然人身份证件号码一致 |
| 21 | xsfzrrbz | 销售方自然人标志 | char | 1 | 是 | Y：是 |
| 22 | xsfzrrzjlxDm | 销售方自然人证件类型 | varchar | 3 | 是 | 201:居民身份证； |
| 23 | xsfzrrzjhm | 销售方自然人证件号码 | varchar | 30 | 是 |  |
| 24 | xsfzrrgjDm | 销售方自然人国籍代码 | varchar | 3 | 是 | 156：中国 |
| 25 | xsfdz | 销售方地址 | varchar | 300 | 否 | 蓝票必填，红票与蓝票一致<br/>填写自然人销售方居住地信息 |
| 26 | xsfdh | 销售方电话 | varchar | 60 | 否 | 蓝票必填，红票与蓝票一致<br/>填写自然人销售方手机号码 |
| 27 | xsfkhh | 销售方开户行 | varchar | 120 | 否 |  |
| 28 | xsfzh | 销售方账号 | varchar | 50 | 否 |  |
| 29 | skyhmc | 收款银行名称 | varchar | 120 | 否 |  |
| 30 | skyhzh | 收款银行账号 | varchar | 100 | 否 |  |
| 31 | gmfnsrsbh | 购买方统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| 32 | gmfmc | 购买方名称 | varchar | 300 | 是 |  |
| 33 | gmfdz | 购买方地址 | varchar | 300 | 否 |  |
| 34 | gmfdh | 购买方电话 | varchar | 60 | 否 |  |
| 35 | gmfkhh | 购买方开户行 | varchar | 120 | 否 |  |
| 36 | gmfzh | 购买方账号 | varchar | 50 | 否 |  |
| 37 | gmfjbr | 购买方经办人姓名 | varchar | 150 | 否 |  |
| 38 | jbrsfzjhm | 购买方经办人证件号码 | varchar | 30 | 否 |  |
| 39 | gmfjbrlxdh | 购买方经办人联系电话 | varchar | 60 | 否 |  |
| 40 | hjje | 合计金额 | number | 18,2 | 是 |  |
| 41 | hjse | 合计税额 | number | 18,2 | 是 |  |
| 42 | jshj | 价税合计 | number | 18,2 | 是 |  |
| 43 | jsfs | 结算方式 | varchar | 2 | 是 | 01：现金<br/>02：银行转账<br/>03：票据<br/>04：第三方支付<br/>05：预付卡<br/>99：其他 |
| 44 | ysxwfsd | 应税行为发生地 | varchar | 11 | 否 |  |
| 45 | dylzfphm | 对应蓝字发票号码 | varchar | 20 | 否 | 是否蓝字发票标志为1时，必填。如果红冲的是税控发票，对应蓝字发票号码的填写规则为税控发票的发票代码+发票号码。 |
| 46 | hzqrxxdbh | 红字确认信息单编号 | varchar | 20 | 否 | 是否蓝字发票标志为1时，此节点有内容<br/>红票开具时必传 |
| 47 | hzqrduuid | 红字确认单uuid | varchar | 32 | 否 | 是否蓝字发票标志为1时，此节点有内容红票开具时必传 |
| 48 | bz | 备注 | varchar | 450 | 否 | 蓝票最长450位，红票最长382位。 |
| 49 | ip | 服务器地址 | varchar | 20 | 是 | 需自行采集开票申请设备 |
| 50 | macdz | mac地址 | char | 20 | 是 | 需自行采集开票申请设备 |
| 51 | cpuid | CPU序列号 | char | 20 | 否 |  |
| 52 | zbxlh | 主板序列号 | varchar | 20 | 否 |  |
| 53 | sfzsxsfyhzhbq | 是否展示销售方银行账号标签 | varchar | 1 | 否 | Y：展示<br/>N：不展示 |
| 54 | sfzsgmfyhzhbq | 是否展示购买方银行账号标签 | varchar | 1 | 否 | Y：展示<br/>N：不展示 |
| 55 | jazslxDm | 减按征税类型代码 | varchar | 2 | 否 | 放弃免税、3%减按1%开票优惠政策原因代码，可选54、55、空。<br/>空：使用1%或免税开票<br/>54：前期已开具3%征收率的发票，发生销售折让、中止或者退回等情形需要开具3%征收率的红字发票，或者开票有误需要重新开具3%征收率的发票；<br/>55：因为实际经营业务需要，放弃享受减按1%征收率征收增值税政策； |
| 56 | fpkjfsDm | 发票开具方式代码 | varchar | 1 | 是 | 4：第三方平台开票（乐企联用、他用开票）<br/>5：自建平台开票（乐企自用开票） |
| 57 | lqkpmsDm | 乐企开票模式代码 | varchar | 2 | 否 | 01：乐企自用支付即开票；<br/>02：乐企联用支付即开票 |
| 58 | zfqdDm | 支付渠道 | varchar | 3 | 否 | 001：现金；<br/>002：银行转账；<br/>003：票据；<br/>004：借记卡；<br/>005：信用卡；006：购物卡/券；<br/>007：优惠券；008：商场积分；<br/>009：支付宝；<br/>010：微信支付；<br/>011：云闪付；<br/>012：Apple Pay；<br/>013：Samsung Pay ；<br/>099：其他 |
| 59 | jydh | 交易单号 | varchar | 40 | 否 |  |
| 60 | mxxh | 明细序号 | Number | 8 | 是 |  |
| 61 | dylzfpmxxh | 对应蓝字发票明细序号 | Number | 8 | 否 | 红票必传 |
| 62 | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 | 拼装规则：“*商品服务简称（spfwjc）*”+“项目名称（xmmc）” |
| 63 | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |
| 64 | xmmc | 项目名称 | varchar | 600 | 是 |  |
| 65 | ggxh | 规格型号 | varchar | 150 | 否 |  |
| 66 | dw | 单位 | varchar | 300 | 否 | 蓝票必填，折扣行除外 |
| 67 | sl | 数量 | varchar | 25 | 否 | 蓝票必填，折扣行除外 |
| 68 | dj | 单价 | varchar | 25 | 否 | 蓝票必填，折扣行除外 |
| 69 | je | 金额 | number | 18,2 | 是 |  |
| 70 | slv | 增值税税率/征收率 | number | 16,6 | 是 |  |
| 71 | se | 税额 | number | 18,2 | 是 |  |
| 72 | hsje | 含税金额 | number | 18,2 | 是 |  |
| 73 | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| 74 | fphxz | 发票行性质 | varchar | 2 | 是 | 00：正常行<br/>01：折扣行<br/>02：被折扣行 |
| 75 | yhzcbs | 优惠政策标识 | varchar | 2 | 否 | 03：免税<br/>08：按3%简易征收 |
| 76 | fjysmc | 附加要素名称 | String | 200 | 否 |  |
| 77 | fjyslx | 附加要素类型 | String | 200 | 否 |  |
| 78 | fjysz | 附加要素值 | String | 200 | 否 |  |
| 79 | dzsphmList | 电子税票号码 | List | 20 | 否 | 蓝票只有无需补缴税费的免税发票可以传空，其他情况必填；<br/>红票传空。 |


#### 10.4请求报文示例
| [<br/>	{<br/>"ptbh": "平台编号",<br/>"fppz": "发票票种",<br/>"fphm": "发票号码",<br/>"lzfpbz": "蓝字发票标志",<br/>"kprq": "开票日期",<br/>"kpr": "开票人",<br/>"kprzjhm": "开票人证件号码",<br/>"kprzjlx": "开票人证件类型",<br/>"skrxm": "收款人姓名",<br/>"fhrxm": "复核人姓名",<br/>"tdys": "特定要素",<br/>"qyDm": "区域代码",<br/>"sfxszrrsygdbfcp": "是否销售自然人使用过的报废产品",<br/>"grsdsxm": "个人所得税项目",<br/>"grsdssf": "个人所得税税费",<br/>"zzsjfjsf": "增值税及附加税费",<br/>"fjsf": "附加税费",<br/>"sgfplxDm": "收购发票类型代码",<br/>"xsfmc": "(销售方)姓名",<br/>"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号",<br/>"xsfzrrbz	": "销售方自然人标志",<br/>"xsfzrrzjlxDm": "销售方自然人证件类型",<br/>"xsfzrrzjhm": "销售方自然人证件号码",<br/>"xsfzrrgjDm": "销售方自然人国籍代码",<br/>"xsfdz": "销售方地址",<br/>"xsfdh": "销售方电话",<br/>"xsfkhh": "销售方开户行",<br/>"xsfzh": "销售方账号",<br/>"skyhmc": "收款银行名称",<br/>"skyhzh": "收款银行账号",<br/>"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>"gmfmc": "(购买方)名称",<br/>"gmfdz": "购买方地址",<br/>"gmfdh": "购买方电话",<br/>"gmfkhh": "购买方开户行",<br/>"gmfzh": "购买方账号",<br/>"gmfjbr": "购买方经办人姓名",<br/>"jbrsfzjhm": "购买方经办人证件号码",<br/>"gmfjbrlxdh": "购买方经办人联系电话",<br/>"hjje": "合计金额",<br/>"hjse": "合计税额",<br/>"jshj": "价税合计",<br/>"jsfs": "结算方式",<br/>"ysxwfsd": "应税行为发生地",<br/>"dylzfphm": "对应蓝字发票号码",<br/>"hzqrxxdbh": "红字确认信息单编号",<br/>"hzqrduuid": "红字确认单uuid",<br/>"bz": "备注",<br/>"ip": "服务器地址",<br/>"macdz": "mac地址",<br/>"cpuid": "CPU序列号",<br/>"zbxlh": "主板序列号",<br/>"sfzsxsfyhzhbq": "是否展示销售方银行账号标签",<br/>"sfzsgmfyhzhbq": "是否展示购买方银行账号标签",<br/>"jazslxDm": "减按征税类型代码",<br/>"fpkjfsDm": "发票开具方式代码",<br/>"lqkpmsDm": "乐企开票模式代码",<br/>"zfxxList": [{<br/>"zfqdDm	": "支付渠道",<br/>"jydh": "交易单号"<br/>}],<br/>"fpmxList": [{<br/>"mxxh": "明细序号",<br/>"dylzfpmxxh": "对应蓝字发票明细序号",<br/>"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>"spfwjc": "商品服务简称",<br/>"xmmc": "项目名称",<br/>"ggxh": "规格型号",<br/>"dw": "单位",<br/>"sl": "数量",<br/>"dj": "单价",<br/>"je": "金额",<br/>"slv": "增值税税率/征收率",<br/>"se": "税额",<br/>"hsje": "含税金额",<br/>"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>"fphxz": "发票行性质",<br/>"yhzcbs": "优惠政策标识"<br/>}],<br/>		"fjysList": [{<br/>				"fjysmc": "附加要素名称",<br/>				"fjyslx": "附加要素类型",<br/>				"fjysz": "附加要素值"<br/>}],<br/>			"dzsphmList":  ["电子税票号码1","电子税票号码2"]<br/>	}<br/>] |
| --- |


生产报文示例

| [<br/>    {<br/>        "ptbh": "5d2cff**********b7a3",<br/>        "fppz": "01",<br/>        "fphm": "25517*********016921",<br/>        "lzfpbz": "0",<br/>        "kprq": "2025-05-15 12:00:00",<br/>        "kpr": "牛**",<br/>        "kprzjhm": "4105**********8510",<br/>        "kprzjlx": "210",<br/>        "skrxm": "付**",<br/>        "fhrxm": "付**",<br/>        "tdys": "24",<br/>        "qyDm": "14403000000",<br/>        "sfxszrrsygdbfcp": "N",<br/>        "grsdsxm": "2",<br/>        "grsdssf": "5.00",<br/>        "zzsjfjsf": "31.50",<br/>        "fjsf": "0",<br/>        "sgfplxDm": "04",<br/>        "xsfzrrbz": "Y",<br/>        "xsfzrrgjDm": "156",<br/>        "xsfzrrzjlxDm": "201",<br/>        "xsfzrrzjhm": "520201********001X",<br/>        "xsfmc": "郑**",<br/>        "xsfnsrsbh": "520201********001X",<br/>        "xsfdz": "北京市*******33号",<br/>        "xsfdh": "136*****3234",<br/>        "xsfkhh": "广大银行",<br/>        "xsfzh": "41002229**********3422",<br/>        "skyhmc": "广大银行",<br/>        "skyhzh": "41002229**********3422",<br/>        "gmfnsrsbh": "9144**********093N",<br/>        "gmfmc": "广州********设计室",<br/>        "gmfdz": "成都市******302号",<br/>        "gmfdh": "156*****9281",<br/>        "gmfkhh": "",<br/>        "gmfzh": "811070**********502",<br/>        "gmfjbr": "购**",<br/>        "jbrsfzjhm": "110101********5211",<br/>        "gmfjbrlxdh": "139*****4831",<br/>        "hjje": "1000.00",<br/>        "hjse": "30.00",<br/>        "jshj": "1030.00",<br/>        "jsfs": "01",<br/>        "ysxwfsd": "",<br/>        "dylzfphm": "",<br/>        "hzqrxxdbh": "",<br/>        "hzqrduuid": "",<br/>        "bz": "",<br/>        "ip": "***.***.***.**",<br/>        "macdz": "SESFSD4666DSSSA",<br/>        "cpuid": "SESFSD4666DSSSA",<br/>        "zbxlh": "SESFSD4666DSSSA",<br/>        "sfzsxsfyhzhbq": "N",<br/>        "sfzsgmfyhzhbq": "N",<br/>        "jazslxDm": "55",<br/>        "fpkjfsDm": "5",<br/>        "lqkpmsDm": "01",<br/>        "zfxxList": [<br/>            {<br/>                "zfqdDm": "001",<br/>                "jydh": "202503*****10001"<br/>            }<br/>        ],<br/>        "fpmxList": [<br/>            {<br/>                "mxxh": "1",<br/>                "dylzfpmxxh": "",<br/>                "spfwjc": "报废汽车",<br/>                "xmmc": "报废汽车",<br/>                "hwhyslwfwmc": "*报废汽车*报废汽车",<br/>                "ggxh": "堆",<br/>                "dw": "斤",<br/>                "sl": "1",<br/>                "dj": "1000.00",<br/>                "je": "1000.00",<br/>                "slv": "0.03",<br/>                "se": "30.00",<br/>                "hsje": "1030.00",<br/>                "sphfwssflhbbm": "1110701000000000000",<br/>                "fphxz": "00",<br/>                "yhzcbs": ""<br/>            }<br/>        ],<br/>        "fjysList": [<br/>            {<br/>                "fjysmc": "",<br/>                "fjyslx": "",<br/>                "fjysz": ""<br/>            }<br/>        ],<br/>        "dzsphmList":  ["35100*******3001"]<br/>    }<br/>] |
| --- |


#### 10.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | sllsh | 受理流水号 | String | 40 | 是 |  |


#### 10.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"sllsh": "受理流水号"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 11.查询发票上传结果
#### 11.1接口说明
给企业提供查询发票上传结果的功能，预发票上传后由税务局端对发票再次进行校验，如果校验通过则表明发票开具成功。此时企业根据上传返回的信息查询发票开具的状态。

发票上传结果只能在发票上传后12小时内查询，如果超过12小时只能重新上传发票再获取上传结果。

#### 11.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 11.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sllsh | 受理流水号 | String | 40 | 是 |  |


#### 11.4请求报文示例
| {<br/> "sllsh": "受理流水号"<br/>} |
| --- |


#### 11.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | fphm | 发票号码 | varchar | 20 | 是 |  |
| 4 | status | 上传状态 | varchar | 2 | 是 | 00：上传成功<br/>01：发票上传处理中<br/>02：上传失败<br/>03：发票号码在数据库已存在 |
| 5 | message | 详细信息 | varchar | 30 | 否 | |
| 6 | Code | 错误码 | varchar | 20 | 否 | 未查询到上传结果会返回固定的Code值 |


#### 11.6返回报文示例 
成功返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"resultList": [<br/>				{<br/>					"fphm": "发票号码1",<br/>					"status": "上传状态",<br/>					"message": "详细信息"<br/>				},<br/> {<br/>					"fphm": "发票号码2",<br/>					"status": "上传状态",<br/>					"message": "详细信息"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01",<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 12.数字化电子发票红字确认单申请
#### 12.1接口说明
提供红字确认单申请功能。

#### 12.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 12.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | lrfsf | 录入方身份 | varchar | 2 | 是 | 1：购方 |
| 2 | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 否 |  |
| 3 | xsfmc | 销售方名称 | varchar | 300 | 是 |  |
| 4 | gmfnsrsbh | 购买方纳税人识别号 | varchar | 20 | 是 |  |
| 5 | gmfmc | 购买方名称 | varchar | 300 | 是 |  |
| 6 | lzfpdm | 蓝字发票代码 | varchar | 12 | 否 |  |
| 7 | lzfphm | 蓝字发票号码 | varchar | 20 | 是 |  |
| 8 | sfzzfpbz | 是否纸质发票标志 | varchar | 1 | 是 | Y：纸质发票，N：电子发票 |
| 9 | lzkprq | 蓝字发票开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| 10 | lzhjje | 蓝字发票合计金额 | number | 18,2 | 是 |  |
| 11 | lzhjse | 蓝字发票合计税额 | number | 18,2 | 是 |  |
| 12 | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 是 | 01: 增值税专用发票<br/>02: 普通发票 |
| 13 | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 24：报废产品收购 |
| 14 | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| 15 | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| 16 | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>02：销货退回<br/>04：销售折让 |
| 17 | lzmxxh | 蓝字发票明细序号 | number | 8 | 是 |  |
| 18 | xh | 序号 | number | 8 | 是 |  |
| 19 | sphfwssflhbbm | 商品和服务税收分类合并编码 | String | 19 | 是 |  |
| 20 | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 |  |
| 21 | spfwjc | 商品服务简称 | String | 120 | 是 |  |
| 22 | xmmc | 项目名称 | varchar | 600 | 是 |  |
| 23 | ggxh | 规格型号 | varchar | 150 | 否 |  |
| 24 | dw | 单位 | varchar | 300 | 否 | 必须与蓝票“单位”保持一致。 |
| 25 | fpspdj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| 26 | fpspsl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| 27 | je | 金额 | number | 18,2 | 是 |  |
| 28 | sl1 | 税率 | number | 16,6 | 是 |  |
| 29 | se | 税额 | number | 18,2 | 是 |  |


#### 12.4请求报文示例
| {<br/>	"lrfsf": "录入方身份",<br/>	"xsfnsrsbh": "销售方纳税人识别号" ,<br/>	"xsfmc": "销售方名称",<br/>	"gmfnsrsbh": "购买方纳税人识别号",<br/>	"gmfmc": "购买方名称",<br/>	"lzfpdm": "蓝字发票代码",<br/>	"lzfphm": "蓝字发票号码",<br/>	"sfzzfpbz": "是否纸质发票标志",<br/>	"lzkprq": "蓝字发票开票日期",<br/>	"lzhjje": "蓝字发票合计金额",<br/>	"lzhjse": "蓝字发票合计税额",<br/>	"lzfppzDm": "蓝字发票票种代码",<br/>	"lzfpTdyslxDm": "蓝字发票特定要素类型代码" ,<br/>	"hzcxje": "红字冲销金额" ,<br/>	"hzcxse": "红字冲销税额" ,<br/>	"chyyDm": "红字发票冲红原因代码",<br/>	"hzqrdmxList": [{<br/>			"lzmxxh": "蓝字发票明细序号",<br/>			"xh": "序号",<br/>			"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>			"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>			"spfwjc": "商品服务简称",<br/>			"xmmc": "项目名称",<br/>			"ggxh": "规格型号",<br/>			"dw": "单位",<br/>			"fpspdj": "单价",<br/>			"fpspsl": "数量",<br/>			"je": "金额",<br/>			"sl1": "税率",<br/>			"se": "税额"<br/>		}]<br/>} |
| --- |


生产报文示例

| {<br/>    "lrfsf": "1",<br/>    "xsfmc": "销********名",<br/>    "xsfnsrsbh": "11010********18797",<br/>    "gmfnsrsbh": "914401********093N",<br/>    "gmfmc": "广州市********设计室",<br/>    "lzfpdm": "",<br/>    "lzfphm": "25447000*******6628",<br/>    "sfzzfpbz": "N",<br/>    "lzkprq": "2025-07-03 12:00:00",<br/>    "lzhjje": "100.00",<br/>    "lzhjse": "0.00",<br/>    "lzfppzDm": "01",<br/>    "lzfpTdyslxDm": "24",<br/>    "hzcxje": "-100.00",<br/>    "hzcxse": "-0.00",<br/>    "chyyDm": "01",<br/>    "hzqrdmxList": [<br/>        {<br/>            "lzmxxh": "1",<br/>            "xh": "1",<br/>            "sphfwssflhbbm": "1110701000000000000",<br/>            "hwhyslwfwmc": "*报废汽车*报废汽车",<br/>            "spfwjc": "报废汽车",<br/>            "xmmc": "报废汽车",<br/>            "ggxh": "堆",<br/>            "dw": "斤",<br/>            "fpspdj": "100.00",<br/>            "fpspsl": "-1",<br/>            "je": "-100.00",<br/>            "sl1": "0.00",<br/>            "se": "-0.00"<br/>        }<br/>    ]<br/>}<br/> |
| --- |


#### 12.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | hzfpxxqrdbh | 红字确认单编号 | varchar | 20 | 否 |  |
| 4 | uuid | 红字确认单UUID | varchar | 32 | 否 |  |
| 5 | hzqrxxztDm | 红字确认单状态 | varchar | 2 | 否 | 01：无需确认<br/>02：销方录入待购方确认<br/>03：购方录入待销方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>06：作废（购方录入销方否认）<br/>07：作废（超72小时未确认）<br/>08：作废（发起方撤销）<br/>09：作废（确认后撤销）<br/>10：作废（异常凭证） |


#### 12.6接口报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzfpxxqrdbh": "红字确认单编号",<br/>			"uuid": "红字确认单UUID",<br/>			"hzqrxxztDm": "红字确认单状态"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 13.数字化电子发票确认单确认
#### 13.1接口说明
提供红字确认单确认接口，进行红字确认单撤销操作。

#### 13.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 13.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | xsfnsrsbh | 统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| 2 | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| 3 | hzqrdbh | 红字确认单编号 | varchar | 20 | 是 |  |
| 4 | qrlx | 确认类型 | varchar | 1 | 是 | C：撤销 |


#### 13.4请求报文示例
| {<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"uuid": "红字确认单UUID ",<br/>	"hzqrdbh": "红字确认单编号 ",<br/>	"qrlx": "确认类型"<br/>} |
| --- |


#### 13.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | qrrq | 确认日期 | datetime | | 否 | 格式：<br/>yyyy-MM-dd HH:mm:ss |


#### 13.6返回报文示例 
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"qrrq ": "确认日期"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 14.查询数字化电子发票红字确认单列表
#### 14.1接口说明
向企业提供查询报废产品收购红字确认单列表信息的功能，企业可通过购买方纳税人识别号、销售方纳税人识别号、蓝字发票号码、录入日期起、录入日期止等条件查询报废产品收购红字确认单列表信息，并将查询的结果保存在本地。使用此信息可以在申请报废产品收购红字确认单时校验报废产品收购蓝字发票是否可以红冲；在开具报废产品收购红字发票时校验是否有报废产品收购红字确认单。

#### 14.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 14.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | yhjslx | 用户角色类型 | varchar | 2 | 是 | 0：销方<br/>1：购方 |
| 2 | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为销方，必录 |
| 3 | xsfmc | （销售方）名称 | varchar | 300 | 否 | 条件必录，作为销方，必录 |
| 4 | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 | 条件必录，作为购方，必录 |
| 5 | gmfmc | （购买方）名称 | varchar | 300 | 否 | 条件必录，作为购方，必录 |
| 6 | lrfsf | 录入方身份 | varchar | 2 | 否 | 0：销方<br/>1：购方 |
| 7 | lrrqq | 录入日期起 | date | 20 | 否 | yyyy-MM-dd |
| 8 | lrrqz | 录入日期止 | date | 20 | 否 | yyyy-MM-dd |
| 9 | lzfpdm | 蓝字发票代码 | varchar | 12 | 否 |  |
| 10 | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| 11 | hzfpxxqrdbh | 红字确认单编号 | varchar | 20 | 否 |  |
| 12 | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 否 | 01：无需确认<br/>02：销方录入待购方确认<br/>03：购方录入待销方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>06：作废（购方录入销方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10：作废（异常凭证） |
| 13 | fppzDm | 发票票种代码 | varchar | 2 | 否 | 01: 增值税专用发票<br/>02: 普通发票<br/>03: 机动车统一销售发票<br/>04: 二手车统一销售发票<br/>05：铁路客票电子发票<br/>06：航空运输电子客票行程单 |
| 14 | pageNumber | 页码 | number | 10 | 否 |  |
| 15 | pageSize | 每页数量 | number | 10 | 否 |  |


#### 14.4请求报文示例
| {<br/>	"yhjslx": "用户角色类型",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"xsfmc": "（销售方）名称",<br/>	"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>	"gmfmc": "（购买方）名称",<br/>	"lrfsf": "录入方身份",<br/>	"lrrqq": "录入日期起",<br/>	"lrrqz": "录入日期止",<br/>	"lzfpdm": "蓝字发票代码",<br/>	"lzfphm": "蓝字发票号码",<br/>	"hzfpxxqrdbh": "红字确认单编号",<br/>	"hzqrxxztDm": "红字确认信息状态代码",<br/>	"fppzDm": "发票票种代码",<br/>	"pageNumber": "页码",<br/>	"pageSize": "每页数量"<br/>} |
| --- |


生产报文示例

| {<br/>    "yhjslx": "1",<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfmc": "广州********设计室",<br/>    "gmfnsrsbh": "9115**********NK5H",<br/>    "gmfmc": "包头市******有限责任公司",<br/>    "lrfsf": "1",<br/>    "lrrqq": "2025-05-01",<br/>    "lrrqz": "2025-05-30",<br/>    "lzfpdm": "",<br/>    "lzfphm": "254470********220447",<br/>    "hzfpxxqrdbh": "4401052********01218",<br/>    "hzqrxxztDm": "01",<br/>    "fppzDm": "01",<br/>    "pageNumber": "1",<br/>    "pageSize": "10"<br/>} |
| --- |


#### 14.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | total | 总数量 | varchar | 10 | 是 |  |
| 4 | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| 5 | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| 6 | lrfsf | 录入方身份 | varchar | 2 | 是 | 0：销方 1：购方 |
| 7 | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| 8 | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| 9 | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| 10 | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| 11 | lzfpdm | 蓝字发票代码 | varchar | 12 | 否 |  |
| 12 | lzfphm | 蓝字发票号码 | varchar | 20 | 否 |  |
| 13 | sfzzfpbz | 是否纸质发票标志 | varchar | 1 | 是 | Y：纸质发票，N：电子发票 |
| 14 | lzkprq | 蓝字发票开票日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| 15 | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| 16 | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| 17 | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 否 | 01: 增值税专用发票<br/>02: 普通发票<br/>03: 机动车统一销售发票<br/>04: 二手车统一销售发票<br/>05：铁路客票电子发票<br/>06：航空运输电子客票行程单 |
| 18 | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 01：成品油发票<br/>02：稀土发票<br/>03：建筑服务发票<br/>04：货物运输服务发票<br/>05：不动产销售服务发票<br/>06：不动产租赁服务发票<br/>07：代收车船税<br/>08：通行费<br/>09：旅客运输服务发票<br/>10：医疗服务（住院）发票<br/>11：医疗服务（门诊）发票<br/>12：自产农产品销售发票<br/>13	拖拉机和联合收割机发票<br/>14：机动车<br/>15：二手车<br/>16：农产品收购发票<br/>17：光伏收购发票<br/>18：卷烟发票<br/>20：农产品<br/>24：报废产品收购 |
| 19 | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| 20 | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| 21 | hzqrdmxsl | 红字确认单明细数量 | number | 10 | 是 |  |
| 22 | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>02：销货退回<br/>03：服务中止<br/>04：销售折让 |
| 23 | hzqrxxztDm | 红字确认信息状态代码 | varchar | 2 | 是 |  |
| 24 | qrrq | 确认日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| 25 | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| 26 | hzfphm | 红字发票号码 | varchar | 20 | 否 |  |
| 27 | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| 28 | yxbz | 有效标志 | varchar | 1 | 是 | Y：有效<br/>N：无效 |
| 29 | lrrq | 录入日期 | datetime |  | 是 | yyyy-MM-dd HH:mm:ss |


#### 14.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"hzqrxxList": {<br/>				"pageNumber": 1,<br/>				"pageSize": 20,<br/>				"total": 1,<br/>				"list": [{<br/>						"uuid": "红字确认单UUID",<br/>						"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>						"lrfsf": "录入方身份",<br/>						"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"xsfmc": "（销售方）名称",<br/>						"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>						"gmfmc": "（购买方）名称",<br/>						"lzfpdm": "蓝字发票发票代码",<br/>						"lzfphm": "蓝字发票发票号码",<br/>						"sfzzfpbz": "是否纸质发票标志",<br/>						"lzkprq": "蓝字发票开票日期",<br/>						"lzhjje": "蓝字发票合计金额",<br/>						"lzhjse": "蓝字发票合计税额",<br/>						"lzfppzDm": "蓝字发票发票票种代码",<br/>						"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>						"hzcxje": "红字冲销金额",<br/>						"hzcxse": "红字冲销税额",<br/>						"hzqrdmxsl": "红字确认单明细数量",<br/>						"chyyDm": "红字发票冲红原因代码",<br/>						"hzqrxxztDm": "红字确认信息状态代码",<br/>						"qrrq": "确认日期",<br/>						"ykjhzfpbz": "已开具红字发票标志",<br/>						"hzfphm": "红字发票号码",<br/>						"hzkprq": "红字开票日期",<br/>						"yxbz": "有效标志",<br/>						"lrrq": "录入日期"<br/>					}]<br/>			}<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 15.查询数字化电子发票红字确认单明细
#### 15.1接口说明
向企业提供报废产品收购红字确认单明细查询的功能，企业可通过红字确认单UUID、销售方纳税人识别号查询报废产品收购红字确认单明细信息，并将查询的结果保存在本地。使用此信息可以在申请报废产品收购红字确认单时校验蓝票是否可以红冲；在开具报废产品收购红字发票时校验是否有报废产品收购红字确认单明细。

#### 15.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 15.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| 2 | xsfnsrsbh | 销售方统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |


#### 15.4请求报文示例
| {<br/>	"uuid": "红字确认单UUID ",<br/>	"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码"<br/>} |
| --- |


#### 15.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | uuid | 红字确认单UUID | varchar | 32 | 是 |  |
| 4 | hzfpxxqrdbh | 红字发票信息确认单编号 | varchar | 20 | 是 |  |
| 5 | lrfsf | 录入方身份 | varchar | 1 | 是 | 0：销方，1：购方 |
| 6 | xsfnsrsbh | （销售方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 是 |  |
| 7 | xsfmc | （销售方）名称 | varchar | 300 | 是 |  |
| 8 | gmfnsrsbh | （购买方）统一社会信用代码/纳税人识别号/身份证件号码 | varchar | 20 | 否 |  |
| 9 | gmfmc | （购买方）名称 | varchar | 300 | 是 |  |
| 10 | lzfpdm | 蓝字发票代码 | number | 12 | 否 |  |
| 11 | lzfphm | 蓝字发票号码 | number | 20 | 否 |  |
| 12 | sfzzfpbz | 是否纸质发票标志 | varchar | 1 | 是 | Y：纸质发票，N：电子发票 |
| 13 | lzkprq | 蓝字发票开票日期 | datetime |  | 否 | yyyy-MM-dd HH:mm:ss |
| 14 | lzhjje | 蓝字发票合计金额 | number | 18,2 | 否 |  |
| 15 | lzhjse | 蓝字发票合计税额 | number | 18,2 | 否 |  |
| 16 | lzfppzDm | 蓝字发票票种代码 | varchar | 2 | 否 | 01: 增值税专用发票<br/>02: 普通发票<br/>03: 机动车统一销售发票<br/>04: 二手车统一销售发票 |
| 17 | lzfpTdyslxDm | 蓝字发票特定要素类型代码 | varchar | 2 | 是 | 01：成品油发票<br/>02：稀土发票<br/>03：建筑服务发票<br/>04：货物运输服务发票<br/>05：不动产销售服务发票<br/>06：不动产租赁服务发票<br/>07：代收车船税<br/>08：通行费<br/>09：旅客运输服务发票<br/>10：医疗服务（住院）发票<br/>11：医疗服务（门诊）发票<br/>12：自产农产品销售发票<br/>13	拖拉机和联合收割机发票<br/>14：机动车<br/>15：二手车<br/>16：农产品收购发票<br/>17：光伏收购发票<br/>18：卷烟发票<br/>20：农产品<br/>24：报废产品收购 |
| 18 | hzcxje | 红字冲销金额 | number | 18,2 | 是 |  |
| 19 | hzcxse | 红字冲销税额 | number | 18,2 | 是 |  |
| 20 | chyyDm | 红字发票冲红原因代码 | varchar | 2 | 是 | 01：开票有误<br/>02：销货退回<br/>03：服务中止<br/>04：销售折让 |
| 21 | hzqrxxztDm | 红字确认单状态 | varchar | 2 | 是 | 01：无需确认<br/>02：销方录入待购方确认<br/>03：购方录入待销方确认<br/>04：购销双方已确认<br/>05：作废（销方录入购方否认）<br/>06：作废（购方录入销方否认）<br/>07：作废（超72小时未确认）<br/>08：（发起方撤销）<br/>09：作废（确认后撤销）<br/>10作废（异常凭证） |
| 22 | qrrq | 确认日期 | datetime | | 否 | yyyy-MM-dd HH:mm:ss |
| 23 | ykjhzfpbz | 已开具红字发票标志 | varchar | 1 | 否 | Y：已开具<br/>N：未开具 |
| 24 | hzfphm | 红字发票号码 | String | 20 | 否 |  |
| 25 | hzkprq | 红字开票日期 | datetime | | 是 | yyyy-MM-dd HH:mm:ss |
| 26 | yxbz | 有效标志 | varchar | 1 | 是 | Y：有效<br/>N：无效 |
| 27 | cezslxDm | 差额征税类型代码 | varchar | 2 | 否 | 空：非差额发票<br/>01：全额开票<br/>02：差额开票 |
| 28 | lrrq | 录入日期 | datetime |  | 是 | yyyy-MM-dd HH:mm:ss |
| 29 | lzmxxh | 蓝字发票明细序号 | number | 8 | 是 |  |
| 30 | xh | 序号 | number | 8 | 是 |  |
| 31 | sphfwssflhbbm | 商品和服务税收分类合并编码 | varchar | 19 | 是 |  |
| 32 | hwhyslwfwmc | 货物或应税劳务、服务名称 | varchar | 300 | 是 |  |
| 33 | spfwjc | 商品服务简称 | varchar | 120 | 是 |  |
| 34 | xmmc | 项目名称 | varchar | 600 | 是 |  |
| 35 | ggxh | 规格型号 | varchar | 150 | 否 |  |
| 36 | dw | 单位 | varchar | 300 | 否 | 空 |
| 37 | fpspdj | 单价 | varchar | 25 | 否 | 如“数量”栏次非空，则本栏次必须非空 |
| 38 | fpspsl | 数量 | varchar | 25 | 否 | 如“单价”栏次非空，则本栏次必须非空 |
| 39 | je | 金额 | number | 18,2 | 是 |  |
| 40 | sl1 | 税率 | number | 16,6 | 是 |  |
| 41 | se | 税额 | number | 18,2 | 是 |  |
| 42 | yhzcbs | 优惠政策标识 | varchar | 2 | 否 |  |


#### 15.6返回报文示例 
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"uuid": "红字确认单UUID",<br/>			"hzfpxxqrdbh": "红字发票信息确认单编号",<br/>			"lrfsf": "录入方身份",<br/>			"xsfnsrsbh": "（销售方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"xsfmc": "销售方名称",<br/>			"gmfnsrsbh": "（购买方）统一社会信用代码/纳税人识别号/身份证件号码",<br/>			"gmfmc": "购买方名称",<br/>			"lzfpdm": "蓝字发票代码",<br/>			"lzfphm": "蓝字发票号码",<br/>			"sfzzfpbz": "是否纸质发票标志",<br/>			"lzkprq": "蓝字发票开票日期",<br/>			"lzhjje": "蓝字发票合计金额",<br/>			"lzhjse": "蓝字发票合计税额",<br/>			"lzfppzDm": "蓝字发票票种代码",<br/>			"lzfpTdyslxDm": "蓝字发票特定要素类型代码",<br/>			"hzcxje": "红字冲销金额",<br/>			"hzcxse": "红字冲销税额",<br/>			"chyyDm": "红字发票冲红原因代码",<br/>			"hzqrxxztDm": "红字确认信息状态代码",<br/>			"qrrq": "确认日期",<br/>			"ykjhzfpbz": "已开具红字发票标志",<br/>			"hzfphm": "红字发票号码",<br/>			"hzkprq": "红字开票日期",<br/>			"yxbz": "有效标志",<br/>			"cezslxDm": "差额征税类型代码",<br/>			"lrrq": "录入日期",<br/>			"hzqrxxmxList": [<br/>				{<br/>					"xh": "序号",<br/>					"lzmxxh": "蓝字发票明细序号",<br/>					"sphfwssflhbbm": "商品和服务税收分类合并编码",<br/>					"hwhyslwfwmc": "货物或应税劳务、服务名称",<br/>					"spfwjc": "商品服务简称",<br/>					"xmmc": "项目名称",<br/>					"ggxh": "规格型号",<br/>					"dw": "单位",<br/>					"fpspdj": "单价",<br/>					"fpspsl": "数量",<br/>					"je": "金额",<br/>					"sl1": "税率",<br/>					"se": "税额",<br/>					"kce": "扣除额",<br/>					"yhzcbs": "优惠政策标识"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 16.上传发票汇总确认信息
#### 16.1接口说明
给企业提供按月上传发票汇总信息接口，以避免由于企业未及时上传发票而带来的问题。企业在每月13日零点前需按自然月汇总上月在本平台开具的数字化电子发票的数量、金额和已缴税额上传至乐企服务端，与乐企服务端汇总接收到的数字化电子发票信息进行比对，若比对一致，返回比对成功；若比对不一致，返回具体失败信息，由企业核实后，再次上传。

若企业在每月13日零点前未上传上个月的发票汇总确认信息，乐企服务端将在13日零点汇总乐企服务端接收到的上个月的数字化电子发票、税款缴纳数据，若自动汇总确认的发票应缴税费与已缴税费记录不一致，将阻断自动汇总确认。

当企业上传发票汇总确认信息后，发现已确认的月份还有数字化电子发票未上传，可以取消发票汇总确认，把未上传的数字化电子发票上传至乐企服务端后再次上传发票汇总确认信息。

#### 16.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 16.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 | 报废产品收购企业税号 |
| 2 | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 | 报废产品收购企业省级税务机关代码 |
| 3 | ywlx | 业务类型 | varchar | 1 | 是 | 0：确认<br/>1：取消 |
| 4 | ptbh | 平台编号 | varchar | 20 | 是 |  |
| 5 | yf | 月份 | varchar | 7 | 是 | 格式：yyyy-MM |
| 6 | lzfpsl | 蓝字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| 7 | lzfpje | 蓝字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| 8 | lzfpse | 蓝字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| 9 | hzfpsl | 红字发票数量 | number | 10 | 否 | 业务类型为“0”时必填 |
| 10 | hzfpje | 红字发票金额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| 11 | hzfpse | 红字发票税额 | number | 18,2 | 否 | 业务类型为“0”时必填 |
| 12 | yjsfhj | 已缴税费合计 | number | 18,2 | 否 | 业务类型为“0”且包含报废产品发票时必填 |


#### 16.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ywlx": "业务类型",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份",<br/>	"lzfpsl": "蓝字发票数量",<br/>	"lzfpje": "蓝字发票金额",<br/>	"lzfpse": "蓝字发票税额",<br/>	"hzfpsl": "红字发票数量",<br/>	"hzfpje": "红字发票金额",<br/>	"hzfpse": "红字发票税额",<br/>"yjsfhj": "已缴税费合计"<br/>} |
| --- |


生产报文示例

| {<br/>    "xsfnsrsbh": "9144**********093N",<br/>    "xsfsjswjgdm": "14400020000",<br/>    "ywlx": "0",<br/>    "ptbh": "5d2cff**********b7a3",<br/>    "yf": "2025-05",<br/>    "lzfpsl": "1300",<br/>    "lzfpje": 15518088765.27,<br/>    "lzfpse": 1687911.48,<br/>    "hzfpsl": 257,<br/>    "hzfpje": -9770623.50,<br/>    "hzfpse": -1043355.60,<br/>    "yjsfhj": 2387771.48<br/>} |
| --- |


#### 16.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |


#### 16.6返回报文示例
成功时返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>		   "returncode": "00",<br/>	     	"returnmsg": "成功"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 17.查询发票汇总确认信息
#### 17.1接口说明
给企业提供发票汇总确认信息查询功能，企业可以通过此接口查询历史发票汇总确认信息。

#### 17.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 17.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | 是 | 报废产品收购企业纳税人识别号 |
| 2 | xsfsjswjgdm | 销售方省级税务机关代码 | varchar | 11 | 是 | 报废产品收购企业的省级税务机关代码 |
| 3 | ptbh | 平台编号 | varchar | 20 | 否 | 若为空，则查询纳税人在所有平台的开票汇总信息 |
| 4 | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM若为空，则查询所有历史月份数据 |




#### 17.4请求报文示例
| {<br/>	"xsfnsrsbh": "销售方纳税人识别号",<br/>	"xsfsjswjgdm": "销售方省级税务机关代码",<br/>	"ptbh": "平台编号",<br/>	"yf": "月份"<br/>} |
| --- |


#### 17.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功，其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | xsfnsrsbh | 销售方纳税人识别号 | varchar | 20 | <br/>是<br/> |  |
| 发票汇总确认信息（多条记录时，循环以下节点） | | | | | | |
| 4 | ptbh | 平台编号 | varchar | 20 | 否 |  |
| 5 | yf | 月份 | varchar | 7 | 否 | 格式：yyyy-MM |
| 6 | lzfpsl | 蓝字发票数量 | number | 10 | 否 |  |
| 7 | lzfpje | 蓝字发票金额 | number | 18,2 | 否 |  |
| 8 | lzfpse | 蓝字发票税额 | number | 18,2 | 否 |  |
| 9 | hzfpsl | 红字发票数量 | number | 10 | 否 |  |
| 10 | hzfpje | 红字发票金额 | number | 18,2 | 否 |  |
| 11 | hzfpse | 红字发票税额 | number | 18,2 | 否 |  |
| 12 | yjsfhj | 已缴税费合计 | number | 18,2 | 否 |  |


#### 17.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>		    "xsfnsrsbh": "销售方纳税人识别号",<br/>			"fphzqrxxList": [<br/>				{	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额",<br/>					"yjsfhj": "已缴税费合计"<br/>				}, {	"ptbh": "平台编号",<br/>					"yf": "月份",<br/>					"lzfpsl": "蓝字发票数量",<br/>					"lzfpje": "蓝字发票金额",<br/>					"lzfpse": "蓝字发票税额",<br/>					"hzfpsl": "红字发票数量",<br/>					"hzfpje": "红字发票金额",<br/>					"hzfpse": "红字发票税额"<br/>					"yjsfhj": "已缴税费合计"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 18.查询企业未缴税记录
#### 18.1接口说明
提供直连平台查询收购企业、自然人在乐企全部平台已预开验证税款但未缴税的数据记录（包含缴税状态为未缴税、扣款失败税费已作废），纳税人识别号和自然人姓名+身份证件号码能且只能传入一组数据，传入纳税人识别号时按照企业返回未缴税发票交易数据，传入自然人姓名+身份证号码时按照自然人返回未缴税发票交易数据。

#### 18.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 18.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号 | varchar2 | 20 | 否 | 回收企业的纳税人识别号 |
| 2 | zrrxm | 自然人姓名 | varchar2 | 300 | 否 | 自然人姓名 |
| 3 | sfzjhm | 身份证件号码 | varchar2 | 20 | 否 | 自然人身份证件号码 |


#### 18.4请求报文示例
| {<br/>	  "nsrsbh": "纳税人识别号",<br/>	  "zrrxm	": "自然人姓名",<br/>	  "sfzjhm": "身份证件号码"<br/>} |
| --- |


#### 18.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | nsrsbh | 纳税人识别号 | varchar | 20 | 是 | 收购企业纳税人识别号 |
| 4 | wjskjlsl | 未缴税款记录数量 | varchar | 10 | 是 | 大于等于0的整数 |
| 5 | ykfphm | 预开发票号码 | varchar | 20 | 否 | wjskjlsll=0时无数据 |
| 6 | ykfprq | 预开发票日期 | date | - | 否 | wjskjlsl=0时无数据 |
| 7 | zrrxm | 自然人姓名 | varchar | 300 | 否 | wjskjlsl=0时无数据 |
| 8 | ykfpje | 预开发票金额 | number | 18,2 | 否 | wjskjlsl=0时无数据 |
| 9 | ykfpse | 预开发票税额 | number | 18,2 | 否 | wjskjlsl=0时无数据 |
| 10 | sfjnfs | 税费缴纳方式 | char | 1 | 是 | 0:自然人自行办理<br/>1:企业委托扣缴 |
| 11 | lrrq | 录入日期 | datetime | - | 是 | yyyy-MM-dd HH:mm:ss |
| 12 | jfzt | 缴税状态 | char | 1 | 是 | 0：未缴纳<br/>5：税费扣款失败，税费信息已被作废 |


#### 18.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"nsrsbh": "纳税人识别号",<br/>			"wjskjlsl": "未缴税款记录数量",<br/>			"wjsfpxxList": [<br/>				{<br/>			  "ykfphm": "预开发票号码",<br/>			  "ykfprq": "预开发票日期",<br/>			  "zrrxm": "自然人姓名",<br/>			  "ykfpje": "预开发票金额",<br/>			  "ykfpse": "预开发票税额",<br/>			  "sfjnfs": "税费缴纳方式",<br/>			  "lrrq": "录入日期",<br/>			  "jfzt": "缴税状态"<br/>				}<br/>			]<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 19.报废产品收购待缴税费校验
#### 19.1接口说明
提供给企业在完成算税数据后，进行算税结果校验的接口。每次开票算税前，都需要调用“查询反向开票算税参数”接口查询最新的开票数据，根据返回的开票数据进行算税，并传入算税相关数据。

当出现乐企平台当次交易额不足以补缴前期税费的特殊情况时，需要补缴的发票税费由自然人扫码缴税或回收企业委托代办，此情形下，需经自然人确认是否由自然人扫码补缴前期税费，如是，则计算补缴税费+单笔税费，补缴税费标志传Y。如否，仅计算当次交易税费且当次交易税费从交易款中扣缴并反向开票，前期应补缴的税费部分由回收企业次月委托代办，补缴税费标志传N。其他场景补缴税费标志必须传Y。

当涉及补缴历史发票税费的场景，补缴发票号码列表需要传入本次补缴的历史发票号码，补缴发票号码按照算税前查询“反向算税参数查询”获取到的发票号码返回。

增值税税额列表，当不涉及历史发票税费补缴时，传入当前发票的类型及增值税税额；涉及历史发票税费补缴时，按照历史发票+本次交易的增值税税额分专票、普票两组数据返回，该增值税税额为本次应缴纳增值税税额，非票面增值税税额。

企业需保存算税成功后返回的自然人相关信息，用于获取缴税二维码或后续红冲或取消交易发起退税申请。

新增税费缴纳方式字段，企业算税校验时需要传入此笔交易由自然人还是企业来进行税费缴纳，不传值时默认为自然人自行缴纳。

#### 19.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 19.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | djxh | 登记序号 | number | 20 | 是 | 回收企业登记序号 |
| 2 | nsrsbh | 纳税人识别号 | varchar2 | 20 | 是 | 回收企业的纳税人识别号 |
| 3 | nsrmc | 纳税人名称 | varchar2 | 300 | 是 | 回收企业纳税人名称 |
| 4 | zrrxm | 自然人姓名 | varchar2 | 300 | 是 | 自然人姓名 |
| 5 | sfzjlx | 身份证件类型 | char | 4 | 是 | 201-身份证； |
| 6 | sfzjhm | 身份证件号码 | varchar2 | 20 | 是 | |
| 7 | gjDm | 国籍代码 | char | 3 | 是 | 156-中国<br/>自然人国籍代码，目前仅支持中国 |
| 8 | ykfphm | 预开发票号码 | varchar2 | 20 | 是 | |
| 9 | ykfplx | 预开发票类型 | varchar | 2 | 是 | 01：增值税专用发票<br/>02：普通发票 |
| 10 | ykprq | 预开票日期 | datetime | - | 是 | yyyy-MM-dd HH:mm:ss |
| 11 | hjje | 合计金额 | Number | 18,2 | 是 | 不含税金额 |
| 12 | zzssl | 增值税税率 | Number | 16,6 | 是 | 票面增值税税率 |
| 13 | hjse | 合计税额 | Number | 18,2 | 是 | 必须大于等于0 |
| 14 | jshj | 价税合计 | Number | 18,2 | 是 | |
| 15 | sfxsyhjm | 是否享受优惠减免 | char | 1 | 否 | Y：是；N：否；<br/>普票传空；<br/>专票按实际税率1%为Y，其他为N。 |
| 16 | msbz | 免税标志 | char | 1 | 是 | 预开发票类型为普票，且为免税发票时传Y，其他情形传N。 |
| 17 | bjsfbz | 补缴税费标志 | char | 1 | 是 | Y:补缴<br/>N:不补缴 |
| 18 | sfjnfs | 税费缴纳方式 | char | 1 | 否 | 0:自然人自行办理<br/>1:企业委托扣缴 |
| 补缴发票号码list | | | | | | |
| 1 | fpDm | 发票代码 | varchar2 | 12 | 否 | 当补缴发票类型为01、04、08、10时必填 |
| 2 | fphm | 发票号码 | varchar2 | 30 | 否 | 当补缴税费时，返回开票前查询“反向开票算税参数查询”接口取得的发票号码 |
| 增值税税额list | | | | | | |
| 1 | selx | 税额类型 | char | 2 | 是 | 01：普票<br/>02：专票 |
| 2 | zzsse | 增值税税额 | number | 18,2 | 是 | 传入应缴增值税税额，而非票面税额 |
| 应缴税费list | | | | | | |
| 1 | zsxmDm | 征收项目代码 | varchar2 | 5 | 是 | |
| 2 | zsxmmc | 征收项目名称 | varchar2 | 100 | 是 | |
| 3 | zspmDm | 征收品目代码 | char | 9 | 是 | |
| 4 | zspmmc | 征收品目名称 | varchar2 | 100 | 是 | |
| 5 | jsyj | 计税依据 | number | 22,2 | 是 | 增值税、个人所得税为不含税金额 |
| 6 | slzsl | 税率征收率 | number | 16,6 | 是 | |
| 7 | yjse | 应缴税额 | number | 18,2 | 是 | 直连平台算税规则计算结果，必须大于0 |


#### 19.4请求报文示例
| {<br/>"djxh": "登记序号",<br/>"nsrsbh": "纳税人识别号",<br/>"nsrmc": "纳税人名称",<br/>"zrrxm": "自然人姓名",<br/>"sfzjlx": "身份证件类型",<br/>"sfzjhm": "身份证件号码",<br/>"gjDm": "国籍代码",<br/>"ykfphm": "预开发票号码",<br/>"ykfplx": "预开发票类型",<br/>"ykprq": "预开票日期",<br/>"hjje": "合计金额",<br/>"zzssl": "增值税税率",<br/>"hjse": "合计税额",<br/>"jshj": "价税合计",<br/>"sfxsyhjm": "是否享受优惠减免",<br/>"msbz": "免税标志",<br/>"bjsfbz": "补缴税费标志",<br/>"sfjnfs": "税费缴纳方式",<br/>"bjfphmlist": [{<br/>"fpDm": "发票代码",<br/>"fphm": "发票号码"<br/>}],<br/>"zzsseList":[{<br/>"selx": "税额类型",<br/>"zzsse": "增值税税额"<br/>}],<br/>"djsfList":[{<br/>"zsxmDm": "征收项目代码",<br/>"zsxmmc": "征收项目名称",<br/>"zspmDm": "征收品目代码",<br/>"zspmmc": "征收品目名称",<br/>"jsyj": "计税依据",<br/>"slzsl": "税率征收率",<br/>"yjse": "应缴税额"<br/>}]<br/>} |
| --- |


生产报文示例

| {<br/>    "djxh": "10188*********1849",<br/>    "nsrsbh": "915105********620B",<br/>    "nsrmc": "四川*******有限公司",<br/>    "zrrxm": "郑**",<br/>    "sfzjlx": "201",<br/>    "sfzjhm": "520201********001X",<br/>    "gjDm": "156",<br/>    "ykfphm": "25517*********016922",<br/>    "ykfplx": "01",<br/>    "ykprq": "2025-05-18 12:00:00",<br/>    "hjje": "1000.00",<br/>    "zzssl": "0.03",<br/>    "hjse": "30.00",<br/>    "jshj": "1030.00",<br/>    "sfxsyhjm": "N",<br/>    "msbz": "N",<br/>    "bjsfbz": "Y",<br/>    "zzsseList": [<br/>        {<br/>            "selx": "01",<br/>            "zzsse": "0.00"<br/>        }<br/>    ],<br/>    "djsfList": [<br/>        {<br/>            "zsxmDm": "10106",<br/>            "zsxmmc": "个人所得税",<br/>            "zspmDm": "101060200",<br/>            "zspmmc": "经营所得",<br/>            "jsyj": "1000.00",<br/>            "slzsl": "0.005",<br/>            "yjse": "5.00"<br/>        },<br/>        {<br/>            "zsxmDm": "10101",<br/>            "zsxmmc": "增值税",<br/>            "zspmDm": "101014001",<br/>            "zspmmc": "商业(17%、16%、13%)",<br/>            "jsyj": "1000.00",<br/>            "slzsl": "0.03",<br/>            "yjse": "30.000"<br/>        },<br/>         {<br/>            "zsxmDm": "10109",<br/>            "zsxmmc": "城市维护建设税",<br/>            "zspmDm": "101090101",<br/>            "zspmmc": "市区（增值税附征）",<br/>            "jsyj": "30.00",<br/>            "slzsl": "0.1",<br/>            "yjse": "1.50"<br/>        }<br/>    ]<br/>} |
| --- |


#### 19.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | ykfphm | 预开发票号码 | varchar | 20 | 是 | 预开发票数电票号码 |
| 4 | ssjyjg | 算税校验结果 | char | 1 | 是 | Y：校验通过；<br/>N：校验失败； |
| 自然人信息（算税通过时返回） | | | | | | |
| 1 | zrrdjxh | 自然人登记序号 | number | 20 | 否 | 算税通过不可空 |
| 2 | zrrnsrsbh | 自然人纳税人识别号 | varchar2 | 20 | 否 | 算税通过不可空 |
| 3 | zrrdah | 自然人档案号 | number | 20 | 否 | |
| 应缴税费信息（算税失败时返回） | | | | | | |
| 1 | zsxmDm | 征收项目代码 | varchar2 | 5 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 2 | zsxmmc | 征收项目名称 | varchar2 | 100 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 3 | zspmDm | 征收品目代码 | char | 9 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 4 | zspmmc | 征收品目名称 | varchar2 | 100 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 5 | yjse | 应缴税额 | number | 18,2 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 6 | sl | 税率 | number | 16,6 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |
| 7 | jsyj | 计税依据 | number | 22,2 | 否 | 乐企平台算税规则计算结果，仅当校验失败时返回 |


#### 19.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>			"returncode": "00",<br/>			"returnmsg": "成功",<br/>			"ykfphm": "预开发票号码",<br/>			"ssjyjg": "算税校验结果",<br/>			"zrrxx": {<br/>"zrrdjxh": "自然人登记序号",<br/>"zrrnsrsbh": "自然人纳税人识别号",<br/>"zrrdah" : "自然人档案号"<br/>},<br/>"yjsfList":[{<br/>"zsxmDm": "征收项目代码",<br/>"zsxmmc": "征收项目名称",<br/>"zspmDm": "征收品目代码",<br/>"zspmmc": "征收品目名称",<br/>"yjse": "应缴税额",<br/>"sl": "税率",<br/>"jsyj	": "计税依据"<br/>}]<br/>	   }<br/>}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 20.查询待缴税费缴款信息
#### 20.1接口说明
提供企业查询缴款信息的接口。

#### 20.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 20.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | djxh | 登记序号 | number | 20 | 是 | 回收企业登记序号 |
| 2 | nsrsbh | 纳税人识别号 | varchar2 | 20 | 是 | 回收企业的纳税人识别号 |
| 3 | ykfphm | 预开发票号码 | varchar2 | 20 | 是 | |
| 4 | ykprq | 预开票日期 | datetime | - | 是 | yyyy-MM-dd HH:mm:ss |


#### 20.4请求报文示例
| {<br/>"djxh": "登记序号",<br/>"nsrsbh": "纳税人识别号",<br/>"ykfphm": "预开发票号码",<br/>"ykprq": "预开票日期"<br/>} |
| --- |


#### 20.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | dzsphm | 电子税票号码 | number | 20 | 是 | |
| 4 | sjse | 实缴税额 | number | 18,2 | 是 | |
| 5 | yzpzxh | 应征凭证序号 | number | 20 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 6 | yzpzmxxh | 应征凭证明细序号 | number | 8 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 7 | ybtse | 应补退税额 | number | 18,6 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 8 | zsswjgDm | 征收税务机关代码 | char | 11 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细，此字段返回为缴款书的税款所属税务机关代码 |
| 9 | zsxmDm | 征收项目代码 | varcahr2 | 5 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 10 | zspmDm | 征收品目代码 | char | 9 | 是 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 11 | zszmDm | 征收子目代码 | char | 16 | 否 | 多条（缴款书明细，一个dzsphm对应多条明细） |
| 12 | skssqq | 税款所属期起 | date | | 是 | 多条（缴款书明细，一个dzsphm对应多条明细）<br/>yyyy-MM-dd |
| 13 | skssqz | 税款所属期止 | date | | 是 | 多条（缴款书明细，一个dzsphm对应多条明细）<br/>yyyy-MM-dd |


#### 20.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "returncode",<br/>            "returnmsg": "returnmsg",<br/>            "djsfList": [<br/>                {<br/>                    "dzsphm": "电子税票号码",<br/>                    "sjse": "实缴税额",<br/>          "sfmxList": [<br/>                        {<br/>                            "yzpzxh": "应征凭证序号",<br/>                            "yzpzmxxh": "应征凭证明细序号",<br/>                            "ybtse": "应补退税额",<br/>                            "zsswjgDm": "征收税务机关代码",<br/>                            "zsxmDm": "征收项目代码",<br/>                            "zspmDm": "征收品目代码",<br/>                            "zszmDm": "征收子目代码",<br/>                            "skssqq": "税款所属期起",<br/>                            "skssqz": "税款所属期止"<br/>                        }<br/>                    ]<br/>                }<br/>            ]<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |




### 21.查询税费缴纳结果
#### 21.1接口说明
提供根据缴款信息查询税费缴款结果的接口。税款缴纳结果返回03状态不明时，需要调用“确认电子税票扣款状态”获取最新的状态；税款缴纳结果返回04税费已作废，需要调用“查询待缴税费缴款信息”获取新的税费完成缴款。

#### 21.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 21.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | dzsphmList | 电子税票号码列表 | List | - | 是 | |


#### 21.4请求报文示例
| {<br/>"dzsphmList": [ "电子税票号码1", "电子税票号码2"]<br/>} |
| --- |


#### 21.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | dzsphm | 电子税票号码 | Varchar | 20 | 是 | |
| 4 | skjnjg | 税款缴纳结果 | char | 2 | 是 | 01:已缴纳<br/>02:未缴纳<br/>03:状态未明<br/>04:税费已作废 |


#### 21.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "dzspjnjgList": [<br/>                {<br/>                    "dzsphm": "电子税票号码",<br/>                    "skjnjg": "税款缴纳结果"<br/>                }<br/>            ]<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 22.取消预开发票交易
#### 22.1接口说明
已经完成报废产品收购待缴税费校验的预开具发票（未完成税费缴纳并上传乐企，已缴纳税款的只能上传发票再进行红冲处理），若收购方与自然人取消了交易并完成了退款，企业可通过此接口取消交易信息。只能当月取消当月的预开票交易，次月1日0:00起不能取消上月的预开发票交易。

#### 22.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 22.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | nsrsbh | 纳税人识别号 | varchar | 20 | 是 | 回收企业税号 |
| 2 | zrrxm | 自然人姓名 | varchar | 150 | 是 | |
| 3 | zrrzjhm | 自然人证件号码 | varchar | 30 | 是 | |
| 4 | ykfphm | 预开发票号码 | varcahr | 20 | 是 | |
| 5 | ykfprq | 预开发票日期 | datetime | - | 是 | 格式：yyyy-MM-dd HH:mm:ss |


#### 22.4请求报文示例
| {<br/>"nsrsbh": "纳税人识别号",<br/>"zrrxm": "自然人姓名",<br/>"zrrzjhm": "自然人证件号码",<br/>"ykfphm": "预开发票号码",<br/>"ykfprq": "预开发票日期"<br/>} |
| --- |


#### 22.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | cljg | 处理结果 | varchar | 2 | 否 | 00：税费扣款状态不明，请稍后再尝试作废<br/>01：取消交易成功<br/>02：税款已缴纳，取消交易失败 |
| 4 | cljgxx | 处理结果信息 | varchar | 75 | 否 | 当处理结果为00时返回具体信息 |


#### 22.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>"cljg": "处理结果",<br/>"cljgxx": "处理结果信息"<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 23.查询反向开票算税参数
#### 23.1接口说明
查询企业反向开票算税参数。每次开票前必须调用该接口根据自然人信息查询缴税相关数据，并且返回的数据完成算税校验。

#### 23.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 23.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | djxh | 登记序号 | varchar | 20 | 是 | 回收企业登记序号 |
| 2 | nsrsbh | 纳税人识别号 | varchar | 20 | 是 | 回收企业税号 |
| 3 | sjswjgdm | 省级税务机关代码 | varchar | 11 | 是 | 回收企业省级税务机关代码 |
| 4 | sfzjlxDm | 身份证件类型代码 | varchar | 3 | 是 | 限制身份证件类型只能为：<br/>201：居民身份证 |
| 5 | sfzjhm | 身份证件号码 | varchar | 20 | 是 | |
| 6 | xm | 姓名 | varchar | 300 | 是 | |


#### 23.4请求报文示例
| {<br/>"djxh": "登记序号",<br/>"nsrsbh": "纳税人识别号",<br/>"sjswjgdm": "省级税务机关代码",<br/>"sfzjlxDm": "身份证件类型代码",<br/>"sfzjhm": "身份证件号码",<br/>"xm": "姓名"<br/>} |
| --- |


#### 23.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 算税参数list | | | | | | |
| 1 | zsxmDm | 征收项目代码 | varchar2 | 5 | 是 | |
| 2 | zsxmmc | 征收项目名称 | varchar2 | 100 | 是 | |
| 3 | zspmDm | 征收品目代码 | char | 9 | 是 | |
| 4 | zspmmc | 征收品目名称 | varchar2 | 100 | 是 | |
| 5 | zsl | 征收率 | varchar2 | 100 | 否 | 只有城建税返回 |
| 6 | jzbl | 减征比例 | varchar2 | 50 | 否 | |
| 待补缴税费金额汇总 | | | | | | |
| 1 | dbjzpljje1 | 待补缴专票累计金额1% | number | 18,2 | 是 | 一人式金额小于等于10万时未缴纳教育费附加及地方教育费附加的专票1%税率的发票金额合计 |
| 2 | dbjzpljje2 | 待补缴专票累计金额3% | number | 18,2 | 是 | 一人式金额小于等于10万时未缴纳教育费附加及地方教育费附加的专票3%税率的发票金额合计 |
| 3 | dbjppljje1 | 待补缴普票累计金额1% | number | 18,2 | 是 | 一人式金额小于等于10万时未缴纳增值税及附加的普票1%税率的发票金额合计 |
| 应补缴发票明细list | | | | | | |
| 1 | nsrsbh | 纳税人识别号 | varchar2 | 20 | 否 | 回收企业的纳税人识别号 |
| 2 | nsrmc | 纳税人名称 | varchar2 | 300 | 否 | 回收企业的纳税人名称 |
| 3 | fpDm | 发票代码 | varchar2 | 12 | 否 | 当发票类型为01、04、08、10时，不为空 |
| 4 | fphm | 发票号码 | varchar2 | 30 | 否 | |
| 5 | kprq | 开票日期 | date | | 否 | yyyy-m-dd |
| 6 | fpje | 发票金额 | number | 18,2 | 否 | 不含税金额，红字发票为负数金额 |
| 7 | fplxDm | 发票类型代码 | varchar2 | 2 | 否 | 81电子发票（增值税专用发票）<br/>82电子发票（普通发票）<br/>85：数电纸质发票（增值税专用发票）<br/>86：数电纸质发票（普通发票）<br/>01增值税专用发票<br/>04增值税普通发票<br/>08增值税电子专用发票<br/>10增值税电子普通发票 |
| 8 | kpqd | 开票渠道 | varchar2 | 10 | 否 | 乐企平台：LQPT；<br/>电子发票服务平台：DPPT；<br/>税控系统：SKXT |


#### 23.6返回报文示例
成功时返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Data": {<br/>"returncode": "00",<br/>"returnmsg": "成功",<br/>"sscsList":[{<br/>"zsxmDm": "征收项目代码",<br/>"zsxmmc": "征收项目名称",<br/>"zspmDm": "征收品目代码",<br/>"zspmmc": "征收品目名称",<br/>"zsl": "征收率",<br/>"jzbl": "减征比例"<br/>}],<br/>"dbjzpljje1": "待补缴专票累计金额1%",<br/>"dbjzpljje2": "待补缴专票累计金额3%",<br/>"dbjppljje1": "待补缴普票累计金额1%",<br/>"ybjfpList":[{<br/>"nsrsbh": "纳税人识别号",<br/>"nsrmc	": "纳税人名称",<br/>"fphm": "发票号码",<br/>"fpDm": "发票代码",<br/>"kprq": "开票日期",<br/>"fpje": "发票金额",<br/>"fplxDm": "发票类型代码",<br/>"kpqd": "开票渠道"<br/>}]<br/>}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 24.查询应代办未代办税费信息
#### 24.1接口说明
平台侧企业可按属期查询在平台已开票的自然人是否存在需委托代办申报的税费信息，用于企业在申报期进行委托代办申报处理，委托代办由企业在电子税务局完成，本接口仅支持按属期（仅支持本月或上月）、企业维度查询企业应委托代办补缴税款的数据。

#### 24.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 24.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | dbnsrdjxh | 代办纳税人登记序号 | number | 20 | 是 | 收购企业登记序号 |
| 2 | dbnsrsbh | 代办纳税人识别号 | varchar2 | 20 | 是 | 收购企业纳税人识别号 |
| 3 | sq | 属期 | varchar2 | 6 | 是 | 举例：yyyyMM 202402 |


#### 24.4请求报文示例
| {<br/>"dbnsrdjxh":"代办纳税人登记序号",<br/>"dbnsrsbh":"代办纳税人识别号",<br/>"sq":"属期"<br/>} |
| --- |


#### 24.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：存在应代办未代办申报的数据，并返回代办税费列表<br/>01：存在已代办申报数据，不需要返回代办税费列表<br/>02：无代办税费信息，不返回代办税费列表 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | |
| 3 | ydbsehj | 应代办税额合计 | number | 18,6 | 是 | 代办税额合计 |
| 4 | skssqq | 税款所属期起 | date | - | 是 | yyyy-MM-dd |
| 5 | skssqz | 税款所属期止 | date | - | 是 | yyyy-MM-dd |
| 6 | sbqx | 申报期限 | Date | | 是 | yyyy-MM-dd |
| 7 | dbhs | 代办户数 | int | - | 是 | 按自然人身份证件号码和姓名统计应代办未代办自然人户数 |
| 代办税费明细list | | | | | | |
| 1 | dbsfmxxh | 代办税费明细序号 | number | 10 | 是 | |
| 2 | zrrsfzjlx | 自然人身份证件类型 | varchar2 | 4 | 是 | |
| 3 | zrrsfzjhm | 自然人身份证件号码 | varchar2 | 30 | 是 | |
| 4 | zrrxm | 自然人姓名 | varchar2 | 150 | 否 | |
| 5 | ydbse | 应代办税额 | number | 18,6 | 是 | |


#### 24.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "ydbsehj": "应代办税额合计",<br/>            "skssqq": "	税款所属期起",<br/>            "skssqz	": "税款所属期止",<br/>            "sbqx": "申报期限",<br/>            "dbhs": "代办户数",<br/>            "dbsfmxList": [<br/>                {<br/>                    "dbsfmxxh": "代办税费明细序号",<br/>                    "zrrsfzjlx": "	自然人身份证件类型",<br/>                    "zrrsfzjhm": "自然人身份证件号码",<br/>                    "zrrxm": "自然人姓名",<br/>                    "ydbse": "应代办税额"<br/>                }<br/>            ]<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 25.查询退税信息
#### 25.1接口说明
当报废产品企业作废交易或者开具红字发票成功后，可以调用该接口查询产生的自然人应退税费信息。

#### 25.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参



#### 25.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sfzjlxDm | 身份证件类型代码 | char | 3 | 是 | 201:居民身份证 |
| 2 | sfzjhm | 身份证件号码 | varchar2 | 30 | 是 | 自然人身份证件号码 |
| 3 | zrrxm | 自然人姓名 | varchar2 | 150 | 是 | |
| 4 | gjDm | 国籍代码 | char | 3 | 是 | 156-中国 |
| 5 | zrrdah | 自然人档案号 | number | 20 | 否 |  |


#### 25.4请求报文示例
| {<br/>"sfzjlxDm": "身份证件类型代码",<br/>"sfzjhm": "身份证件号码",<br/>"zrrxm": "自然人姓名",<br/>"gjDm": "国籍代码",<br/>"zrrdah": "自然人档案号"<br/>} |
| --- |


#### 25.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | ytssehj | 应退税税额合计 | number | 18,2 | 是 | 未产生应退税税额返回0，为0时应退税款明细list为空 |
| 应退税款明细list | | | | | | |
| 1 | zrrdah | 自然人档案号 | number | 20 | 否 |  |
| 2 | djxh | 登记序号 | number | 20 | 是 |  |
| 3 | zsxmDm | 征收项目代码 | varchar2 | 5 | 是 |  |
| 4 | zspmDm | 征收品目代码 | char | 9 | 是 |  |
| 5 | zgswskfjDm | 主管税务所科分局代码 | char | 11 | 是 |  |
| 6 | zgswjgDm | 主管税务机关代码 | char | 11 | 是 | 同税款所属机关 |
| 7 | skssswjgDm | 税款所属税务机关代码 | char | 11 | 是 |  |
| 8 | jdxzDm | 街道乡镇代码 | char | 9 | 否 |  |
| 9 | ytse | 应退税额 | number | 18，6 | 是 | 返回两位小数 |
| 10 | sl | 税率 | number | 16，6 | 是 |  |
| 11 | spuuid | 税票UUID | varchar2 | 32 | 是 |  |
| 12 | dzsphm | 电子税票号码 | number | 20 | 是 |  |
| 13 | skssqq | 税款所属期起 | date |  | 是 | yyyy-MM-dd |
| 14 | skssqz | 税款所属期止 | date |  | 是 | yyyy-MM-dd |


#### 25.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "ytssehj": "应退税税额合计",<br/>           "ytskmxList": [<br/>                {<br/>                    "zrrdah": "自然人档案号",<br/>                    "djxh": "登记序号",<br/>                    "zsxmDm": "征收项目代码",<br/>                    "zspmDm": "征收品目代码",<br/>                    "zgswskfjDm": "主管税务所科分局代码",<br/>                    "zgswjgDm": "主管税务机关代码",<br/>                    "skssswjgDm": "税款所属税务机关代码",<br/>                    "jdxzDm": "街道乡镇代码代码",<br/>                    "ytse	": "应退税额",<br/>                    "sl": "税率",<br/>                    "spuuid": "税票UUID",<br/>                    "dzsphm": "电子税票号码",<br/>                    "skssqq": "税款所属期起",<br/>                    "skssqz": "税款所属期止"<br/>                }<br/>            ]<br/>                }<br/>        }<br/>    } |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 26.申请反向开票退税
#### 26.1接口说明
当纳税人作废交易或者开具红字发票成功查询到存在可退税税额后，可以调用该接口进行反向开票退税申请。若自然人当月一人式归集金额为负数则不允许发起退税申请。

#### 26.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 26.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sfzjlxDm | 身份证件类型代码 | char | 3 | 是 | 201:居民身份证 |
| 2 | sfzjhm | 身份证件号码 | varchar2 | 30 | 是 | 自然人身份证件号码 |
| 3 | zrrxm | 自然人姓名 | varchar2 | 150 | 是 | |
| 4 | zrrdah | 自然人档案号 | number | 20 | 否 |  |
| 5 | gjDm | 国籍代码 | char | 3 | 是 | 156-中国 |
| 6 | khhszsf | 开户银行所在省份 | char | 13 | 是 | 省级行政区划代码<br/>110000：北京市	<br/>120000：天津市<br/>130000：河北省<br/>140000：山西省<br/>150000：内蒙古自治区<br/>210000：辽宁省<br/>220000：吉林省<br/>230000：黑龙江省<br/>310000：上海市<br/>320000：江苏省<br/>330000：浙江省<br/>340000：安徽省<br/>350000：福建省<br/>360000：江西省<br/>370000：山东省<br/>410000：河南省<br/>420000：湖北省<br/>430000：湖南省<br/>440000：广东省<br/>450000：广西壮族自治区<br/>460000：海南省<br/>500000：重庆市<br/>510000：四川省<br/>520000：贵州省<br/>530000：云南省<br/>540000：西藏自治区<br/>610000：陕西省<br/>620000：甘肃省<br/>630000	青海省<br/>640000：宁夏回族自治区<br/>650000：新疆维吾尔自治区 |
| 7 | yhzh | 银行账号 | varchar2 | 50 | 是 | 自然人银行账号 |
| 8 | tdssqly | 退抵税申请理由 | varchar2 | 200 | 否 |  |


#### 26.4请求报文示例
| {<br/>"sfzjlxDm": "身份证件类型代码",<br/>"sfzjhm": "身份证件号码",<br/>"zrrxm": "自然人姓名",<br/>"zrrdah": "自然人档案号",<br/>"gjDm": "国籍代码",<br/>"khhszsf": "开户行银行所在省份",<br/>"yhzh": "银行账号",<br/>"tdssqly": "退抵税申请理由"<br/>} |
| --- |


#### 26.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 申请结果明细list | | | | | | |
| 1 | skssswjgDm | 税款所属税务机关代码 | char | 11 | 是 |  |
| 2 | skssswjgmc | 税款所属税务机关名称 | varchar | 300 | 是 |  |
| 3 | sqjg | 申请结果 | char | 1 | 是 | 0：申请成功<br/>1：申请失败 |
| 4 | sbyy | 失败原因 | varchar | 200 | 否 | 失败时有值 |
| 5 | tdssqxh | 退抵税申请序号 | number | 18 | 否 | 成功时有值 |


#### 26.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "sqjgmxList": [<br/>                {<br/>                    "skssswjgDm": "税款所属税务机关代码",<br/>                    "skssswjgmc": "税款所属税务机关名称",<br/>                    "sqjg": "申请结果",<br/>                    "sbyy": "失败原因",<br/>                    "tdssqxh": "退抵税申请序号"<br/>                }<br/>            ]<br/>                }<br/>        }<br/>    } |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 27.查询报废产品退税结果
#### 27.1接口说明
企业完成退税申请后，可调用此接口使用乐企退税申请接收成功后返回的业务流水号查询报废产品退税结果。

#### 27.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 27.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | sfzjlxDm | 身份证件类型代码 | char | 3 | 是 | 201:居民身份证 |
| 2 | sfzjhm | 身份证件号码 | varchar2 | 30 | 是 | 自然人身份证件号码 |
| 3 | zrrxm | 自然人姓名 | varchar2 | 150 | 是 | |
| 4 | zrrdah | 自然人档案号 | number | 20 | 否 |  |
| 5 | gjDm | 国籍代码 | char | 3 | 是 | 156-中国 |
| 退税序号列表 | | | | | | |
| 1 | tdssqxhList | 退抵税申请序号列表 | number | 18 | 否 | 传入对应申请序号则返回对应的退税结果，不传入申请序号返回最近两个月发起退税申请的全部退税结果。 |


#### 27.4请求报文示例
| {<br/>"sfzjlxDm": "身份证件类型代码",<br/>"sfzjhm": "身份证件号码",<br/>"zrrxm": "自然人姓名",<br/>"zrrdah": "自然人档案号",<br/>"gjDm": "国籍代码",<br/>"tdssqxhList":  ["退税申请序号1","退税申请序号2"]<br/>} |
| --- |


#### 27.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 退税结果list | | | | | | |
| 1 | skssswjgDm | 税款所属税务机关代码 | char | 11 | 是 | 区县级税务机关 |
| 2 | skssswjgmc | 税务所属税务机关名称 | varchar | 300 | 是 | |
| 3 | tdssqxh | 退抵税申请序号 | number | 18 | 是 | |
| 4 | tssqzt | 退税申请状态 | char | 2 | 是 | 01审批中；<br/>02审核不同意；<br/>03 审核同意；<br/>04 申请表作废；<br/>05 收入退还书全部开具未销号；<br/>06 收入退还书部分开具未销号；<br/>07 收入退还书全部销号；<br/>08收入退还书部分销号 |
| 5 | spbtyyy | 审批不同意原因 | varchar | 500 | 否 | 当退税申请状态为02时返回不同意原因 |


#### 27.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "dzspjnjgList": [<br/>                {<br/>                    "skssswjgDm": "税款所属税务机关代码",<br/>                    "skssswjgmc": "税款所属税务机关名称",<br/>                    "tdssqxh": "退税申请序号",<br/>                    "tssqzt": "退税申请状态",<br/>                    "spbtyyy": "审批不同意原因"<br/>                }<br/>            ]<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 28.第三方平台提交缴款请求
#### 28.1接口说明
企业可调用此接口生成生成第三方平台（微信、支付宝、云闪付）缴款二维码，用于扫码缴纳税款，二维码有效期为30分钟，若未在30分钟内完成扫码缴款，可调用此接口重新生成二维码完成缴款。

#### 28.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 28.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | dzsphm | 电子税票号码 | number | 20 | 是 | |
| 2 | nsrsbh | 纳税人识别号 | varchar2 | 20 | 是 | 自然人纳税人识别号 |
| 3 | skjnfsDm | 税款缴纳方式代码 | varchar2 | 2 | 是 | 云闪付：99<br/>微信：A1<br/>支付宝：A2 |


#### 28.4请求报文示例
| {<br/>"dzsphm": "电子税票号码", <br/>"nsrsbh": "纳税人识别号",<br/>"skjnfsDm": "税款缴纳方式代码"<br/>} |
| --- |


#### 28.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | qrCodeText | 二维码字符串 | varchar | 2000 | 是 | |


#### 28.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "qrCodeText":"二维码字符串"<br/>        }<br/>    }<br/>}<br/><br/> |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 29.确认电子税票扣款状态
#### 29.1接口说明
当查询缴纳结果、第三方支付扣款状态返回状态不明时，需要直连单位调用电子税票扣款状态接口确认扣款状态，处理结果返回01扣款成功可以上传发票，处理结果返回02不存在扣款信息即未缴款需要完成缴款，处理结果返回03状态不明需要重新确认状态，建议间隔5分钟以上；处理结果返回04需要重新查询待缴税费获取新的缴费信息完成缴税。

#### 29.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 29.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | dzsphm | 电子税票号码 | number | 20 | 是 | |


#### 29.4请求报文示例
| {<br/>"dzsphm": "电子税票号码"<br/>} |
| --- |


#### 29.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | cljg | 处理结果 | varchar | 2 | 否 | 01:税费扣款成功；<br/>02:不存在扣款信息；<br/>03:税费扣款状态不明；<br/>04:税费扣款失败，税费信息已被作废 |
| 4 | cljgxx | 处理结果信息 | varchar | 75 | 否 | 处理结果为03时返回 |


#### 29.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "cljg": "处理结果",<br/>            "cljgxx": "处理结果信息"<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 30.验证银行卡号信息
#### 30.1接口说明
反向开票退税申请确认时，可调用该接口验证将用于退税申请的银行卡是否可使用。若验证不通过，则不可用于退税。

#### 30.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 30.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | yhzh | 银行账号 | varchar | 50 | 是 | |
| 2 | khyhszsf | 开户行所在省份 | char | 6 | 是 | 省级行政区划代码<br/>110000：北京市	<br/>120000：天津市<br/>130000：河北省<br/>140000：山西省<br/>150000：内蒙古自治区<br/>210000：辽宁省<br/>220000：吉林省<br/>230000：黑龙江省<br/>310000：上海市<br/>320000：江苏省<br/>330000：浙江省<br/>340000：安徽省<br/>350000：福建省<br/>360000：江西省<br/>370000：山东省<br/>410000：河南省<br/>420000：湖北省<br/>430000：湖南省<br/>440000：广东省<br/>450000：广西壮族自治区<br/>460000：海南省<br/>500000：重庆市<br/>510000：四川省<br/>520000：贵州省<br/>530000：云南省<br/>540000：西藏自治区<br/>610000：陕西省<br/>620000：甘肃省<br/>630000	青海省<br/>640000：宁夏回族自治区<br/>650000：新疆维吾尔自治区 |


#### 30.4请求报文示例
| {<br/>"yhzh": "银行账号",<br/>"khyhszsf": "开户行所在省份",<br/>} |
| --- |


#### 30.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| 3 | yztgbz | 验证通过标志 |  char | 1 | 是 | 0：不通过<br/>1：通过 |


#### 30.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功",<br/>            "yztgbz": "验证通过标志"<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |


### 31.自然人间接登记
#### 31.1接口说明
当直连单位第一次接收到某自然人的开票申请时，先调用自然人间接登记接口为自然人进行间接登记，减少算税校验接口处理时间。

#### 31.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 31.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | xm | 姓名 | varchar2 | 150 | 是 | 自然人姓名 |
| 2 | sfzjlxDm | 身份证件类型 | char | 3 | 是 | 201-身份证； |
| 3 | sfzjhm | 身份证件号码 | varchar2 | 30 | 是 | |
| 4 | gjDm | 国籍代码 | char | 3 | 是 | 156-中国<br/>自然人国籍代码，目前仅支持中国 |
| 5 | csrq | 出生日期 | varchar2 | 10 | 否 | yyyy-MM-dd |
| 6 | xb | 性别 | char | 1 | 否 | 1：男<br/>2：女 |


#### 31.4请求报文示例
| {<br/>"xm": "姓名",<br/>"sfzjlxDm": "身份证件类型",<br/>"sfzjhm": "身份证件号码",<br/>"gjDm": "国籍代码",<br/>"csrq": "出生日期",<br/>"xb": "性别"<br/>} |
| --- |


#### 31.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| 2 | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |


#### 31.6返回报文示例
成功时返回：

| {<br/>    "Response": {<br/>        "RequestId": "16位随机数字和字母组合",<br/>        "Data": {<br/>            "returncode": "00",<br/>            "returnmsg": "成功"<br/>        }<br/>    }<br/>} |
| --- |


失败返回：

| {<br/>	"Response":{<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error":{<br/>			"Code": "01”,<br/>			"Message": "错误说明"<br/>}<br/>	}<br/>} |
| --- |




### 32.上传发票对账数据
#### 32.1接口说明
为保障资源回收企业的“三流合一反向开票”围绕发票数据的真实性和准确性，以资金收付、税费计算、税费入库为重点开展对账，确保支付即反向开票、开票即缴税、缴税即入库的执行。

直连单位可调用此接口上传前一日上传的报废产品收购发票各项数据，与税局端数据进行对账，确认局端数据与企业端数据一致性。

发票上传日期必须为当前系统时间的前一天，只允许对前一天上传的发票数据进行对账，单次最多可上传500条数据。

#### 32.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 32.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | :---: | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">32</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">主键，各联用平台生成</font> |
| <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">ptbm</font> | <font style="color:rgb(0, 0, 0);">平台编码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">直连单位ID</font> |
| 3 | <font style="color:rgb(0, 0, 0);">djxh</font> | <font style="color:rgb(0, 0, 0);">登记序号</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业登记序号</font> |
| 4 | <font style="color:rgb(0, 0, 0);">nsrsbh</font> | <font style="color:rgb(0, 0, 0);">纳税人识别号</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业的纳税人识别号</font> |
| 5 | <font style="color:rgb(0, 0, 0);">nsrmc</font> | <font style="color:rgb(0, 0, 0);">纳税人名称</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">300</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业纳税人名称</font> |
| <font style="color:rgb(0, 0, 0);">6</font> | <font style="color:rgb(0, 0, 0);">sfzjlxDm</font> | <font style="color:rgb(0, 0, 0);">身份证件类型代码</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">是</font> | 201-居民身份证 |
| <font style="color:rgb(0, 0, 0);">7</font> | <font style="color:rgb(0, 0, 0);">sfzjhm</font> | <font style="color:rgb(0, 0, 0);">身份证件号码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">自然人的身份证件号码</font> |
| <font style="color:rgb(0, 0, 0);">8</font> | <font style="color:rgb(0, 0, 0);">zrrxm</font> | <font style="color:rgb(0, 0, 0);">自然人姓名</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">300</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">自然人姓名</font> |
| <font style="color:rgb(0, 0, 0);">9</font> | <font style="color:rgb(0, 0, 0);">gjDm</font> | <font style="color:rgb(0, 0, 0);">国籍代码</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">否</font> | 156-中国 |
| <font style="color:rgb(0, 0, 0);">10</font> | <font style="color:rgb(0, 0, 0);">fphm</font> | <font style="color:rgb(0, 0, 0);">发票号码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">是</font> |  |
| 11 | <font style="color:rgb(0, 0, 0);">kprq</font> | <font style="color:rgb(0, 0, 0);">开票日期</font> | <font style="color:rgb(0, 0, 0);">DATE</font> | - | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">YYYY-MM-DD</font> |
| 12 | <font style="color:rgb(0, 0, 0);">hsqyzfjyje</font> | <font style="color:rgb(0, 0, 0);">回收企业支付交易金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">含税金额，红字发票默认为空</font> |
| 13 | <font style="color:rgb(0, 0, 0);">zrrskje</font> | <font style="color:rgb(0, 0, 0);">自然人收款金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">红字发票默认为空</font> |
| 14 | <font style="color:rgb(0, 0, 0);">zfskze</font> | <font style="color:rgb(0, 0, 0);">支付税款总额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品，且不存在补税情况时可空，红字发票默认为空，未缴纳税款时默认为空，其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">自然人（或回收企业）支付税款的总额，含被补缴发票的税额，包括增值税及附征、个人所得税</font> |
| 15 | <font style="color:rgb(0, 0, 0);">zfzzsse</font> | <font style="color:rgb(0, 0, 0);">支付增值税税额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品时可空，红字发票默认为空，未缴纳增值税默认为空，其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">自然人（或回收企业）支付增值税税额，只是当前开具发票的增值税税额，且为实际缴纳的税款，非发票上的增值税税额</font> |
| <font style="color:rgb(0, 0, 0);">16</font> | <font style="color:rgb(0, 0, 0);">je</font> | <font style="color:rgb(0, 0, 0);">金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">发票的不含税金额，红字发票传负数金额</font> |
| <font style="color:rgb(0, 0, 0);">17</font> | <font style="color:rgb(0, 0, 0);">bfcpxslxbq</font> | <font style="color:rgb(0, 0, 0);">报废产品销售类型标签</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">01销售自己使用过的报废产品；   </font><font style="color:rgb(0, 0, 0);">02销售收购的报废产品</font> |
| <font style="color:rgb(0, 0, 0);">18</font> | <font style="color:rgb(0, 0, 0);">sczt</font> | <font style="color:rgb(0, 0, 0);">上传状态</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">1上传成功；   </font><font style="color:rgb(0, 0, 0);">2上传失败</font> |
| <font style="color:rgb(0, 0, 0);">19</font> | sfjnfs | 税费缴纳方式 | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品，且不存在补税情况时可空，红字发票默认为空，其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">0自然人自行缴纳；   </font><font style="color:rgb(0, 0, 0);">1回收企业代缴</font> |
| 20 | <font style="color:rgb(0, 0, 0);">fpscrq</font> | <font style="color:rgb(0, 0, 0);">发票上传日期</font> | <font style="color:rgb(0, 0, 0);">DATE</font> | - | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">YYYY-MM-DD   </font><font style="color:rgb(0, 0, 0);">只能为当前系统时间前一天</font> |


#### 32.4请求报文示例
| [<br/>	{<br/>"uuid": "uuid",<br/>"ptbm": "平台编码",<br/>"djxh": "登记序号",<br/>"nsrsbh": "纳税人识别号",<br/>"nsrmc": "纳税人名称",<br/>"sfzjlxDm": "身份证件类型代码",<br/>"sfzjhm": "身份证件号码",<br/>"zrrxm": "自然人姓名",<br/>"gjDm": "国籍代码",<br/>"fphm": "发票号码",<br/>"kprq": "开票日期",<br/>"hsqyzfjyje": "回收企业支付交易金额",<br/>"zrrskje": "自然人收款金额",<br/>"zfskze": "支付税款总额",<br/>"zfzzsse": "支付增值税税额",<br/>"je": "金额",<br/>"bfcpxslxbq": "报废产品销售类型标签",<br/>"sczt": "上传状态",<br/>"sfjnfs": "税费缴纳方式",<br/>"fpscrq": "发票上传日期"<br/>	}<br/>] |
| --- |


生产报文示例

| [<br/>    {<br/>        "uuid": "CSSJ2025050009",<br/>        "ptbm": "5d2cff**********b7a3",<br/>        "djxh": "10114401********8307",<br/>        "nsrsbh": "9144**********093N",<br/>        "nsrmc": "广州********设计室",<br/>        "sfzjlxDm": "201",<br/>        "sfzjhm": "520201********001X",<br/>        "zrrxm": "郑**",<br/>        "gjDm": "156",<br/>        "fphm": "25517*********016918",<br/>        "kprq": "2025-05-29",<br/>        "hsqyzfjyje": "1030.00",<br/>        "zrrskje": "1000.00",<br/>        "zfskze": "",<br/>        "zfzzsse": "",<br/>        "je": "1000.00",<br/>        "bfcpxslxbq": "02",<br/>        "sczt": "2",<br/>        "sfjnfs": "1",<br/>        "fpscrq": "2025-05-29"<br/>    }<br/>] |
| --- |


#### 32.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |


#### 32.6返回报文示例
成功时返回：

| <font style="color:rgb(0, 0, 0);">{</font><br/><font style="color:rgb(0, 0, 0);">    "Response": {</font><br/><font style="color:rgb(0, 0, 0);">        "RequestId": "16位随机数字和字母组合",</font><br/><font style="color:rgb(0, 0, 0);">        "Data": {</font><br/><font style="color:rgb(0, 0, 0);">            "returncode": "00",</font><br/><font style="color:rgb(0, 0, 0);">            "returnmsg": "成功"</font><br/><font style="color:rgb(0, 0, 0);">        }</font><br/><font style="color:rgb(0, 0, 0);">    }</font><br/><font style="color:rgb(0, 0, 0);">}</font> |
| :--- |




失败返回：

| <font style="color:rgb(0, 0, 0);">{</font><br/><font style="color:rgb(0, 0, 0);">	"Response":{</font><br/><font style="color:rgb(0, 0, 0);">		"RequestId": "16位随机数字和字母组合",</font><br/><font style="color:rgb(0, 0, 0);">		"Error":{</font><br/><font style="color:rgb(0, 0, 0);">			"Code": "01”,</font><br/><font style="color:rgb(0, 0, 0);">			"Message": "错误说明"</font><br/><font style="color:rgb(0, 0, 0);">}</font><br/><font style="color:rgb(0, 0, 0);">	}</font><br/><font style="color:rgb(0, 0, 0);">}</font> |
| :--- |


### 33.查询发票对账不符数据
#### 33.1接口说明
直连单位可调用此接口查询前一日上传的发票对账数据结果，该接口会返回对账不符的数据及原因，建议企业于上传对账数据后第二天下午进行查询，可获取到完整的对账不符数据结果。

#### 33.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 33.3请求参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">32</font> | <font style="color:rgb(0, 0, 0);">否</font> | |
| <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">ptbm</font> | <font style="color:rgb(0, 0, 0);">平台编码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">直连单位ID</font> |
| 3 | <font style="color:rgb(0, 0, 0);">nsrsbh</font> | <font style="color:rgb(0, 0, 0);">纳税人识别号</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业的纳税人识别号</font> |
| 4 | <font style="color:rgb(0, 0, 0);">fpscrq</font> | <font style="color:rgb(0, 0, 0);">发票上传日期</font> | <font style="color:rgb(0, 0, 0);">DATE</font> | - | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">YYYY-MM-DD   </font><font style="color:rgb(0, 0, 0);">只能为当前系统时间两天前   </font><font style="color:rgb(0, 0, 0);">如当前为1-3，可查询1-1上传发票的对账数据</font> |
| 5 | pageNumber | 页码 | number | 10 | 否 | 批量查询时必填 |
| 6 | pageSize | 每页数量 | number | 3 | 否 | 批量查询时必填<br/>最多500条 |


#### 33.4请求报文示例
| 	{<br/>"uuid": "uuid",<br/>"ptbm": "平台编码",<br/>"nsrsbh": "纳税人识别号",<br/>"fpscrq": "发票上传日期",<br/>"pageNumber": "页码",<br/>"pageSize": "每页数量"<br/>	} |
| --- |


#### 33.5返回参数
| **序号** | **数据项标识** | **数据项名称** | **字段类型** | **长度** | **必须** | **说明** |
| --- | --- | --- | --- | :---: | :---: | --- |
| <font style="color:rgb(0, 0, 0);">1</font> | returncode | 返回码 | varchar | 2 | 是 | 00：成功<br/>其它：失败 |
| <font style="color:rgb(0, 0, 0);">2</font> | returnmsg | 返回信息 | varchar | 2000 | 否 | 错误信息说明 |
| <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">zsl</font> | <font style="color:rgb(0, 0, 0);">总数量</font> | number | <font style="color:rgb(0, 0, 0);">8</font> | <font style="color:rgb(0, 0, 0);">否</font> | 批量查询时返回 |
| <font style="color:rgb(0, 0, 0);">4</font> | pageNumber | 页码 | number | 4 | 否 | 批量查询时返回 |
| <font style="color:rgb(0, 0, 0);">5</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">uuid</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">32</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">主键，各联用平台生成</font> |
| <font style="color:rgb(0, 0, 0);">6</font> | <font style="color:rgb(0, 0, 0);">ptbm</font> | <font style="color:rgb(0, 0, 0);">平台编码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">直连单位ID</font> |
| <font style="color:rgb(0, 0, 0);">7</font> | <font style="color:rgb(0, 0, 0);">djxh</font> | <font style="color:rgb(0, 0, 0);">登记序号</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业登记序号</font> |
| <font style="color:rgb(0, 0, 0);">8</font> | <font style="color:rgb(0, 0, 0);">nsrsbh</font> | <font style="color:rgb(0, 0, 0);">纳税人识别号</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业的纳税人识别号</font> |
| <font style="color:rgb(0, 0, 0);">9</font> | <font style="color:rgb(0, 0, 0);">nsrmc</font> | <font style="color:rgb(0, 0, 0);">纳税人名称</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">300</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">回收企业纳税人名称</font> |
| <font style="color:rgb(0, 0, 0);">10</font> | <font style="color:rgb(0, 0, 0);">sfzjlxDm</font> | <font style="color:rgb(0, 0, 0);">身份证件类型代码</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">是</font> | |
| <font style="color:rgb(0, 0, 0);">11</font> | <font style="color:rgb(0, 0, 0);">sfzjhm</font> | <font style="color:rgb(0, 0, 0);">身份证件号码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">自然人的身份证件号码</font> |
| <font style="color:rgb(0, 0, 0);">12</font> | <font style="color:rgb(0, 0, 0);">zrrxm</font> | <font style="color:rgb(0, 0, 0);">自然人姓名</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">300</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">自然人姓名</font> |
| <font style="color:rgb(0, 0, 0);">13</font> | <font style="color:rgb(0, 0, 0);">gjDm</font> | <font style="color:rgb(0, 0, 0);">国籍代码</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">3</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">参见dm_gy_gjhdq，如果办理业务时未选择国际，则默认为“156”（中国）</font> |
| <font style="color:rgb(0, 0, 0);">14</font> | <font style="color:rgb(0, 0, 0);">fphm</font> | <font style="color:rgb(0, 0, 0);">发票号码</font> | <font style="color:rgb(0, 0, 0);">VARCHAR</font> | <font style="color:rgb(0, 0, 0);">30</font> | <font style="color:rgb(0, 0, 0);">是</font> |  |
| <font style="color:rgb(0, 0, 0);">15</font> | <font style="color:rgb(0, 0, 0);">kprq</font> | <font style="color:rgb(0, 0, 0);">开票日期</font> | <font style="color:rgb(0, 0, 0);">DATE</font> | - | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">YYYY-MM-DD</font> |
| <font style="color:rgb(0, 0, 0);">16</font> | <font style="color:rgb(0, 0, 0);">hsqyzfjyje</font> | <font style="color:rgb(0, 0, 0);">回收企业支付交易金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">含税金额   </font><font style="color:rgb(0, 0, 0);">红字发票默认为空；</font><br/><font style="color:rgb(0, 0, 0);">其他情形不可空；</font> |
| <font style="color:rgb(0, 0, 0);">17</font> | <font style="color:rgb(0, 0, 0);">zrrskje</font> | <font style="color:rgb(0, 0, 0);">自然人收款金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">红字发票默认为空；</font><br/><font style="color:rgb(0, 0, 0);">其他情形不可空；</font> |
| <font style="color:rgb(0, 0, 0);">18</font> | <font style="color:rgb(0, 0, 0);">zfskze</font> | <font style="color:rgb(0, 0, 0);">支付税款总额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品，且不存在补税情况时可空；红字发票默认为空；未缴纳税款时默认为空；其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">自然人（或回收企业）支付税款的总额，含被补缴发票的税额，包括增值税及附征、个人所得税</font> |
| <font style="color:rgb(0, 0, 0);">19</font> | <font style="color:rgb(0, 0, 0);">zfzzsse</font> | <font style="color:rgb(0, 0, 0);">支付增值税税额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品时可空；当对账类型为04时可空；红字发票默认为空；未缴纳增值税默认为空；其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">自然人（或回收企业）支付增值税税额，只是当前开具发票的增值税税额，且为实际缴纳的税款，非发票上的增值税税额</font> |
| <font style="color:rgb(0, 0, 0);">20</font> | <font style="color:rgb(0, 0, 0);">je</font> | <font style="color:rgb(0, 0, 0);">金额</font> | <font style="color:rgb(0, 0, 0);">NUMBER</font> | <font style="color:rgb(0, 0, 0);">18,2</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">发票的不含税金额，红字发票传负数金额</font> |
| <font style="color:rgb(0, 0, 0);">21</font> | <font style="color:rgb(0, 0, 0);">bfcpxslxbq</font> | <font style="color:rgb(0, 0, 0);">报废产品销售类型标签</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">2</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">01销售自己使用过的报废产品；   </font><font style="color:rgb(0, 0, 0);">02销售收购的报废产品</font> |
| <font style="color:rgb(0, 0, 0);">22</font> | <font style="color:rgb(0, 0, 0);">sczt</font> | <font style="color:rgb(0, 0, 0);">上传状态</font> | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">1上传成功；   </font><font style="color:rgb(0, 0, 0);">2上传失败</font> |
| <font style="color:rgb(0, 0, 0);">23</font> | sfjnfs | 税费缴纳方式 | <font style="color:rgb(0, 0, 0);">CHAR</font> | <font style="color:rgb(0, 0, 0);">1</font> | <font style="color:rgb(0, 0, 0);">否</font> | <font style="color:rgb(0, 0, 0);">当报废产品销售类型标签为01销售自己使用过的报废产品，且不存在补税情况时可空；其他情形不可空；</font><br/><font style="color:rgb(0, 0, 0);">0自然人自行缴纳；   </font><font style="color:rgb(0, 0, 0);">1回收企业代缴</font> |
| <font style="color:rgb(0, 0, 0);">24</font> | <font style="color:rgb(0, 0, 0);">fpscrq</font> | <font style="color:rgb(0, 0, 0);">发票上传日期</font> | <font style="color:rgb(0, 0, 0);">DATE</font> | - | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(0, 0, 0);">YYYY-MM-DD</font> |
| <font style="color:rgb(0, 0, 0);">25</font> | dzbflx | 对账不符类型 | VACHAR | 50 | 是 | <font style="color:rgb(0, 0, 0);">多个以英文逗号分隔</font><br/><font style="color:rgb(0, 0, 0);">01：发票账户价税合计与回收企业（银行或平台账户）支付金额的对账；</font><br/><br/><font style="color:rgb(0, 0, 0);">0201：自然人支付账户收款金额与发票价税合计数的对账；</font><br/><font style="color:rgb(0, 0, 0);">0202：自然人银行账户支付（缴税）金额与算税规则计算的应缴税费的对账；</font><br/><font style="color:rgb(0, 0, 0);">0203：自然人银行账户收款金额与（发票价税合计数-算税规则计算的应缴税费）的对账；</font><br/><font style="color:rgb(0, 0, 0);">03：自然人（或回收企业）支付增值税金额与发票上的税额对账；</font><br/><font style="color:rgb(0, 0, 0);">05：发票上的交易金额与纳税账户算税结果对账；</font><br/><font style="color:rgb(0, 0, 0);">06：发票账户上已生效发票与联用平台开具发票对账。</font> |


#### 33.6返回报文示例
成功时返回：

| <font style="color:rgb(0, 0, 0);">{</font><br/><font style="color:rgb(0, 0, 0);">    "Response": {</font><br/><font style="color:rgb(0, 0, 0);">        "RequestId": "16位随机数字和字母组合",</font><br/><font style="color:rgb(0, 0, 0);">        "Data": {</font><br/><font style="color:rgb(0, 0, 0);">            "returncode": "00",</font><br/><font style="color:rgb(0, 0, 0);">            "returnmsg": "成功",   </font><font style="color:rgb(0, 0, 0);">            "zsl": "总数量",</font><br/><font style="color:rgb(0, 0, 0);">            </font><font style="color:rgb(0, 0, 0);">"pageNumber": "页码",</font><br/><font style="color:rgb(0, 0, 0);">            </font><font style="color:rgb(0, 0, 0);">"dzbfsjList”:</font><br/><font style="color:rgb(0, 0, 0);">[</font><br/><font style="color:rgb(0, 0, 0);">	{</font><br/><font style="color:rgb(0, 0, 0);">"uuid": "uuid",</font><br/><font style="color:rgb(0, 0, 0);">"ptbm": "平台编码",</font><br/><font style="color:rgb(0, 0, 0);">"djxh": "登记序号",</font><br/><font style="color:rgb(0, 0, 0);">"nsrsbh": "纳税人识别号",</font><br/><font style="color:rgb(0, 0, 0);">"nsrmc": "纳税人名称",</font><br/><font style="color:rgb(0, 0, 0);">"sfzjlxDm": "身份证件类型代码",</font><br/><font style="color:rgb(0, 0, 0);">"sfzjhm": "身份证件号码",</font><br/><font style="color:rgb(0, 0, 0);">"zrrxm": "自然人姓名",</font><br/><font style="color:rgb(0, 0, 0);">"gjDm": "国籍代码",</font><br/><font style="color:rgb(0, 0, 0);">"fphm": "发票号码",</font><br/><font style="color:rgb(0, 0, 0);">"kprq": "开票日期",</font><br/><font style="color:rgb(0, 0, 0);">"hsqyzfjyje": "回收企业支付交易金额",</font><br/><font style="color:rgb(0, 0, 0);">"zrrskje": "自然人收款金额",</font><br/><font style="color:rgb(0, 0, 0);">"zfskze": "支付税款总额",</font><br/><font style="color:rgb(0, 0, 0);">"zfzzsse": "支付增值税税额",</font><br/><font style="color:rgb(0, 0, 0);">"je": "金额",</font><br/><font style="color:rgb(0, 0, 0);">"bfcpxslxbq": "报废产品销售类型标签",</font><br/><font style="color:rgb(0, 0, 0);">"sczt": "上传状态",</font><br/><font style="color:rgb(0, 0, 0);">"sfjnfs": "税费缴纳方式",</font><br/><font style="color:rgb(0, 0, 0);">"fpscrq": "发票上传日期",</font><br/><font style="color:rgb(0, 0, 0);">"dzbflx": "对账不符类型"</font><br/><font style="color:rgb(0, 0, 0);">	}</font><br/><font style="color:rgb(0, 0, 0);">]     </font><br/><font style="color:rgb(0, 0, 0);">}</font><br/><font style="color:rgb(0, 0, 0);">}</font><br/><font style="color:rgb(0, 0, 0);">}</font> |
| :--- |




失败返回：

| <font style="color:rgb(0, 0, 0);">{</font><br/><font style="color:rgb(0, 0, 0);">	"Response":{</font><br/><font style="color:rgb(0, 0, 0);">		"RequestId": "16位随机数字和字母组合",</font><br/><font style="color:rgb(0, 0, 0);">		"Error":{</font><br/><font style="color:rgb(0, 0, 0);">			"Code": "01”,</font><br/><font style="color:rgb(0, 0, 0);">			"Message": "错误说明"</font><br/><font style="color:rgb(0, 0, 0);">}</font><br/><font style="color:rgb(0, 0, 0);">	}</font><br/><font style="color:rgb(0, 0, 0);">}</font> |
| :--- |




### 34.发票用途状态信息查询
#### 34.1接口说明
企业业务系统通过此接口查询单张发票状态、红字开具确认状态、发票用途等信息。此接口用途为辅助乐企开票企业发起红字确认单申请时的业务校验，实际以生成红字确认单时的业务校验结果为准。

发票用途状态信息查询结果仅供企业参考，在综服平台进行发票勾选的企业，其查询到的发票状态可能存在延时问题。

#### 34.2请求方式
请求方式为POST

● path 指该参数为路径参数

● query 指该参数需在请求URL传参

● body 指该参数需在请求JSON传参

#### 34.3请求参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | fplx | 发票类型 | String | 2 | 是 | 01：增值税专用发票<br/>02：货物运输业增值税专用发票<br/>03：机动车销售统一发票<br/>04：增值税普通发票<br/>08：增值税电子专用发票<br/>10：增值税电子普通发票<br/>11：卷式发票<br/>14：通行费发票<br/>15：二手车销售统一发票<br/>81：电子发票（增值税专用发票）<br/>82：电子发票（普通发票）<br/>85：纸质发票（增值税专用发票）<br/>86：纸质发票（普通发票）<br/>51：电子发票（铁路电子客票）<br/>61：电子发票（航空运输客票电子行程单）<br/>83：机动车销售电子统一发票<br/>84：二手车销售电子统一发票<br/>87：纸质发票（机动车销售统一发票）<br/>88：纸质发票（二手车销售统一发票） |
| 2 | fpdm | 发票代码 | String | 12 | 否 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票代码，其他发票类型无需传入 |
| 3 | fphm | 发票号码 | String | 20 | 是 | 发票类型为：01、02、03、04、08、10、11、14、15传纸质发票号码<br/>发票类型为：51、61、81、82、83、84、85、86、87、88传20位数字化电子发票号码 |
| 4 | kprq | 开票日期 | String | 8 | 是 | YYYYMMDD |


#### 34.4请求报文示例
| {<br/>	"fplx": "发票类型",<br/>	"fpdm": "发票代码",<br/>	"fphm": "发票号码",<br/>	"kprq": "开票日期"<br/>} |
| --- |


#### 34.5返回参数
| 序号 | 数据项标识 | 数据项名称 | 字段类型 | 长度 | 必须 | 说明 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | returncode | 返回码 | String | 2 | 是 | 详情可参照“六、附件：1.返回码代码表” |
| 2 | returnmsg | 返回信息 | String | 2000 | 否 | 错误信息说明 |
| 3 | fpdm | 发票代码 | String | 12 | 是 | <font style="color:#000000;">数字化电子发票发票代码可为空</font> |
| 4 | fphm | 发票号码 | String | 20 | 是 | <font style="color:#000000;">数字化电子发票，发票号码20位</font> |
| 5 | kprq | 开票日期 | String | 19 | 是 | YYYY-MM-DD HH:mm:ss |
| 6 | fpzt | 发票状态 | String | 1 | 否 | 0：正常<br/>2：作废<br/>3：已红冲<br/>7：部分红冲<br/>8：全额冲红 |
| 7 | ycpzzt | 异常凭证状态 | String | 1 | 否 | 01：正常<br/>02：异常凭证<br/>03：疑似异常凭证 |
| 8 | hzsdbs | 红字锁定标识 | String | 1 | 否 | Y：锁定<br/>N：未锁定 |
| 9 | fpyt | 发票用途 | String | 2 | 否 | 0：未使用<br/>1：已申请抵扣<br/>2：已申请退税<br/>3：已申请代办退税<br/>4：已勾选不抵扣（历史数据）<br/>5：已申请代办退税（历史数据）<br/>6：已申请不抵扣<br/>7：内销转出口<br/>8：出口转内销<br/>9：准予退税<br/>10：不予退税<br/>11：冬奥退税 |
| 10 | rzzt | 入账状态 | String | 2 | 否 | 01：未入账<br/>02：已入账<br/>03：已入账撤销 |
| 11 | cpyycbs | 成品油异常标识 | String | 1 | 否 | 9：正常<br/>1：成品油单价异常<br/>2：成品油超库存异常<br/>8：正常，需全额红冲 |
| 12 | cktsldm | 出口退税类代码 | String | 2 | 否 | 01：增值税专用发票可用于代办退税标签（仅用于代办退税） |
| 13 | zzsyhyt | 增值税优惠用途（农产品加计扣除） | String | 2 | 否 | 0：未使用 <br/>1：全部项目加计 <br/>2：全部项目不加计 <br/>3：部分项目加计 |
| 14 | xfsyt | 消费税用途 | String | 2 | 否 | 00：未勾选库存<br/>01：已勾选库存 |
| 15 | jdcycbs | 机动车异常标识 | String | 1 | 否 | 0：无风险<br/>1：低风险<br/>2：中风险<br/>3：高风险 |
| 16 | skssq | 税款所属期 | String | 6 | 否 | 返回格式：yyyymm |


#### 34.6返回报文示例
| {<br/>	"Response": {<br/>		"RequestId": "系统自动生成ID",<br/>		"Data": {<br/>			"returncode": "返回码",<br/>			"returnmsg": "返回信息",<br/>			"fpdm": "发票代码",<br/>			"fphm": "发票号码",<br/>			"kprq": "开票日期",<br/>			"fpzt": "发票状态",<br/>			"ycpzzt": "异常凭证状态",<br/>			"hzsdbs": "红字锁定标识",<br/>			"fpyt": "发票用途",<br/>			"rzzt": "入账状态",<br/>			"cpyycbs": "成品油异常标识",<br/>			"cktsldm": "出口退税类代码",<br/>			"zzsyhyt": "增值税优惠用途（农产品加计扣除）",<br/>			"xfsyt": "消费税用途",<br/>			"jdcycbs": "机动车异常标识",<br/>			"skssq": "税款所属期"<br/>		}<br/>	}<br/>} |
| --- |


失败返回：

| {<br/>	"Response": {<br/>		"RequestId": "16位随机数字和字母组合",<br/>		"Error": {<br/>			"Code": "01",<br/>			"Message": "错误说明"<br/>		}<br/>	}<br/>} |
| --- |


# 六、附件
无

