## 操作手册更新版本记录
| 文档版本 | 文档更新日期 | 对应产品版本号/功能更新日期 | 说明 | 更新人 |
| --- | --- | --- | --- | --- |
| V1.0 | 2025.11.17 |  | 初稿发布 |  |
|  |  |  |  |  |


## 发票类型操作路径
【发票云】-【开票管理】-【海外发票】-【公共数据】-【发票类型】

## 发票类型功能设计理念概述
### 功能定位
 “发票类型管理”用于集中维护海外发票在不同国家/地区的**发票类型、发票种类、类型字段映射**及**开票类型**配置。  
主要面向实施顾问、财务/税务管理员、主数据管理员等角色，为后续开票、上传税局、对账等流程提供统一的基础配置。  

### 设计理念与使用价值
+ **统一发票主数据**：在同一页面下，以 Tab 形式分别维护“发票类型 / 发票种类 / 发票类型映射 / 开票类型”，避免在多个子系统重复维护。
+ **按国家/税种配置**：支持按国家/地区、税种维度维护发票类型与种类，适配不同国家/地区的合规和业务要求。
+ **字段级校验控制**：通过“发票类型映射”定义各发票类型的字段名称、标签、数据类型、必填规则、长度与验证规则，在前端开票录入时统一校验。
+ **支持多种开票场景**：使用“开票类型”配置标准开票、贷项/借项、免税、退款、税务特殊开票等场景及其税额计算方式，减少人工判断。
+ **状态与自开发票管控**：通过“状态”“自开发票”等字段控制哪些配置可在业务中使用，降低错误选择发票类型的风险。

## 发票类型功能详解
### 发票类型关键字段说明
 「发票类型」Tab  

| **字段名称** | **业务含义** | **字段规则说明** | **其他说明** |
| --- | --- | --- | --- |
| 搜索类型代码/名称 | 过滤发票类型列表用的搜索框 | 选填；支持输入类型代码、中文名称或英文名称的关键字进行模糊查询，点击「查询」生效 |  |
| 选择国家/地区 | 按国家/地区过滤发票类型 | 选填；下拉选择某个国家/地区后，仅展示该国家/地区的发票类型 |  |
| 类型代码 | 发票类型的编码 |  |  |
| 中文名称 | 发票类型的中文名称 | 用于业务人员识别发票类型含义，例如：商业发票、货项发票、税务发票等 |  |
| 英文名称 | 发票类型的英文名称 | 用于业务人员识别发票类型含义，例如：Commercial Invoice、Credit Note、Tax invoice |  |
| 税种 | 发票类型所属税种 | 典型值如 VAT、SST、GST 等 |  |
| 国家 | 发票类型适用国家/地区 | 采用国家/地区缩写，如 DE、MY、SG、VN |  |
| 自开发票 | 标记该发票类型是否用于自开发票场景 |  |  |
| 状态 | 当前发票类型是否可用 | “启用/停用” |  |


「发票种类」Tab  

| **字段名称** | **业务含义** | **字段规则说明** | **其他说明** |
| --- | --- | --- | --- |
| 搜索种类代码/名称 | 过滤发票种类列表的搜索框 | 支持输入种类代码或名称关键字进行模糊查询，需点击「查询」按钮生效 |  |
| 选择国家/地区 | 按国家/地区过滤发票种类 | 仅展示选定国家/地区的发票种类 |  |
| 种类代码 | 发票种类编码 | 对应当地税局/业务对发票种类的编码 |  |
| 中文名称 | 发票种类中文名称 | 例如：VAT发票、销售发票、内部送货单等 |  |
| 英文名称 | 发票种类英文名称 | 例如：VAT invoice、Sales invoice、Internal Delivery Note |  |
| 税种 | 发票种类所属税种 | 如 VAT 等 |  |
| 国家 | 发票种类适用国家/地区 | 例如 VN，与“选择国家/地区”筛选条件关联 |  |
| 状态 | 当前发票种类是否可用 | “启用/停用” |  |


「发票类型映射」Tab

| **字段名称** | **业务含义** | **字段规则说明** | **其他说明** |
| --- | --- | --- | --- |
| 搜索字段名称/标签 | 按字段名称或标签过滤映射列表 | 支持输入英文字段名或中文字段标签关键字进行模糊查询 |  |
| 全部类型 | 按发票类型过滤列表 | 下拉选择，默认“全部类型”；选定后仅显示对应发票类型的字段配置 |  |
| 选择国家/地区 | 按国家/地区过滤列表 | 下拉选择，仅展示选定国家/地区的发票种类 |  |
| 详情ID | 映射记录的唯一编号 |  | 用于内部追踪及排查 |
| 发票类型 | 该字段所属的发票类型 | 一般包含类型代码+中文名称，如 IT_DE_380 商业发票 |  |
| 字段名称 | 系统内部使用的字段英文名 | 一般对应接口或数据库字段名，如 invoice_number、tax_amount |  |
| 字段标签 | 字段名称中文 | 如：发票号码、发票日期、税额、SST号码、GST税率、税务代码等 |  |
| 字段类型 | 字段的数据类型 | 值：string、date、decimal、percentage 等 |  |
| 必填 | 是否必填 | 取值“是/否”；为“是”时，业务录入不能为空 |  |
| 最大长度 | 字段允许的最大长度 | 对 string 等类型生效；数值，如 50、20；无要求时显示“—” |  |
| 验证规则 | 字段格式验证规则，用于控制编码、日期、税号等格式合规性 | 一般为正则表达式或格式说明，如 `^INV[0-9]{8}$`、`YYYY-MM-DD` 等 |  |
| 国家 | 映射规则适用的国家/地区 | 采用国家/地区缩写，如 DE、MY、SG、VN |  |
| 状态 | 字段映射是否生效 | “启用/停用” |  |


「开票类型」Tab

| **字段名称** | **业务含义** | **字段规则说明** | **其他说明** |
| --- | --- | --- | --- |
| 搜索开票代码/名称 | 按开票代码或名称过滤列表 | 输入关键字后点击「查询」筛选 |  |
| 全部分类 | 按开票分类过滤 | 下拉选项；默认“全部分类”；可选择普通发票、贷项发票、借项发票、免税发票、退款发票、税务发票等 |  |
| 全部状态 | 按启用/停用过滤开票类型，用于快速定位停用的配置 | 下拉选项；默认显示全部；可选择“启用”“停用” |  |
| 开票代码 | 开票类型编码，标识某种开票处理方式 |  |  |
| 开票名称 | 供业务人员选择、识别的开票类型名称 | 例如 标准开票、贷项开票、借项开票、免税开票、退款开票、税务开票 |  |
| 分类 | 开票类型隶属的分类 | 标签展示，如 普通发票、贷项发票、借项发票、免税发票、退款发票、税务发票 |  |
| 描述 | 对该开票类型的业务说明，便于理解使用场景 | 如“标准的商业发票开票方式”“退款业务的开票处理方式”等 |  |
| 税额计算 | 对应的税额计算方式 | 例如：按标准税率计算、负向税额计算、正向税额计算、免税处理、退税处理、税务局标准等 |  |
| 状态 | 开票类型是否可用 | 标签“启用/停用” |  |


### 发票类型按钮说明
| **按钮名称*** | **功能描述*** | **使用条件** | **其他说明** |
| --- | --- | --- | --- |
| 查询 | 根据当前筛选条件刷新列表数据 | 在任一 Tab 中设置搜索框/下拉条件后点击 |  |
| 重置 | 清空搜索框与下拉选项，恢复默认筛选条件 | 任一 Tab 中可用，重置后重新加载全部数据 |  |
| 编辑（铅笔图标） | 打开对应记录的编辑页面，修改发票类型/发票种类/字段映射/开票类型配置 |  |  |
| 删除（垃圾桶图标） | 删除当前行记录 |  |  |


### 发票类型主要操作说明
#### 在「发票类型」等Tab 查询发票类型列表
**操作目标**：按类型代码、名称或国家/地区查询目标数据。（以下截图以发票类型为例）

**操作步骤**：

1. 进入【发票类型管理】页面，选中「发票类型」、「发票种类」、「发票类型映射」、「开票类型」等Tab。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763376950711-9b2fba54-95d7-46dc-a129-97be8b2fe11b.png)

2. 在「搜索类型代码/名称」等输入框中输入需要查询的关键字。
3. 如需按国家过滤，在「选择国家/地区」下拉中选择目标国家（如 DE、MY 等）。
4. 点击「查询」按钮，系统根据条件刷新列表。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763376997702-cd907bc7-8cd2-4a4e-a1b2-87f8a37edfd4.png)

5. 如需清空条件，点击「重置」，系统恢复默认列表。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377047181-2f5737d0-c2b1-43da-b50c-01ae65a46a5d.png)

**结果说明**：

+ 列表展示满足条件的数据。

#### 维护发票类型（编辑）等数据
**操作目标**：维护发票类型、发票种类、发票类型映射、开票类型下的具体信息。（以下截图以发票类型为例）

**操作步骤**：

1. 按操作一方式查询并定位到目标发票类型行。
2. 在该行「操作」列点击铅笔图标（编辑）。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377151613-e51e1813-ef86-47a4-8375-bdd45a007fa9.png)

3. 在弹出的编辑页面/弹窗中，按业务需要修改相关字段信。
4. 完成修改后点击保存按钮。

**结果说明**：

+ 保存成功后，列表中对应行显示更新后的信息。

#### 在「发票类型映射」Tab 配置字段级校验规则
**操作目标**：为不同国家/发票类型配置字段名称、显示标签、数据类型、必填、长度和验证规则。

**操作步骤**：

1. 在页面上方点击 Tab「发票类型映射」。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377221095-80cf98bb-a515-424d-a6b7-ce93816895b9.png)

2. 在「全部类型」中选择需要维护的发票类型（如 IT_DE_380 商业发票）。
3. 在「选择国家/地区」中选择相应国家（如 DE）。
4. 若列表较多，可在「搜索字段名称/标签」中输入 invoice_number 或 “发票号码”等关键字进行筛选。
5. 在目标字段行的「操作」列点击铅笔图标（编辑），进入字段配置界面。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377237179-0903d602-f157-413e-b002-26f13af2726e.png)

6. 按需调整：
+ 「字段标签」：修改前端显示的字段名称；
+ 「字段类型」：根据业务需要设置为 string/date/decimal/percentage 等；
+ 「必填」：选择是/否；
+ 「最大长度」：对字符串类字段设置最大长度（如 50、20）；
+ 「验证规则」：维护正则表达式或格式说明，用于控制字段格式。
7. 保存修改，返回列表确认字段配置已更新。

**结果说明**：

+ 更新后的字段规则会在对应国家 + 发票类型的开票录入页面生效。

#### 在「开票类型」Tab 配置开票场景与税额计算方式
**操作目标**：维护各类开票场景（标准、贷项、借项、免税、退款、税务开票）及其税额计算方式、自动生成策略等。

**操作步骤**：

1. 点击 Tab「开票类型」，切换到开票类型列表。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377301869-d0b882df-345a-4d71-9192-567dca1923fc.png)

2. 如需按分类筛选，在「全部分类」下拉中选择“普通发票”“贷项发票”等；如需按启用状态筛选，在「全部状态」中选择“启用”或“停用”。
3. 在「搜索开票代码/名称」中输入 BT_001、标准开票 等关键字，点击「查询」。
4. 定位到目标行后：若需调整描述、税额计算方式、自动生成等配置，点击铅笔图标（编辑），在编辑界面中修改相关字段并保存。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1763377356495-a6b93d7d-9d97-431b-9eba-2b63617c223e.png)

#### 删除配置记录
**操作目标**：删除不再使用的发票类型、发票种类、发票类型映射或开票类型记录。

**操作步骤**：

1. 在对应 Tab 中，通过查询/筛选定位到目标记录。
2. 在该行「操作」列点击垃圾桶图标（删除）。
3. 在弹出的确认对话框中确认删除操作（例如点击“确定”）

**结果说明**：

+ 删除成功后，列表中不再显示该记录。

