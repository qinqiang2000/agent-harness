文档适用范围：星空旗舰版开票

## 操作手册更新版本记录
| 文档版本 | 文档更新日期 | 对应产品版本号/功能更新日期 | 说明 | 更新人 |
| --- | --- | --- | --- | --- |
| V1.0 | 2025.11.03 |  | 初稿发布 |  |


## 动态小票码开票操作路径及所属模块编码
操作路径：【发票服务】→【开票管理】→【无单据开票】→【扫码开票】→【动态小票码开票】

所属模块编码：F17010

所属模块名称：扫码开票

## 动态小票码开票功能设计理念概述
### <font style="color:#000000;">功能概述</font>
<font style="color:#000000;">订单扫码开票</font>

1. <font style="color:#000000;">业务系统生成二维码链接：</font>
    1. <font style="color:#000000;">商家通过星空发票服务提供的规则或约定好的地址（域名+参数）生成二维码并打印至小票</font>
    2. <font style="color:#000000;">用户扫码开票填写抬头提交开票</font>
    3. <font style="color:#000000;">调用业务系统查询接口获取订单数据并组装开票</font>
    4. <font style="color:#000000;">开票后通过短信或邮件等自动推送给消费者</font>
2. <font style="color:#000000;">推单生成二维码链接：</font>
    1. <font style="color:#000000;">  商家商通过【业务系统组装二维码链接格式】接口生成二维码给到用户</font>
    2. <font style="color:#000000;">  用户扫码到开票界面，填写购方信息</font>
    3. <font style="color:#000000;">  星空发票服务系统自动开票</font>
    4. <font style="color:#000000;">  完成开票后通过短信或邮件等自动推送给消费者</font>

<font style="color:#000000;">适用场景：适用快销场景开票。常见场景为酒店、零售、商超， 消费者通过收银台进行购物支付， 商家生成购物小票，并生成开票二维码。  客户扫码提交开票信息，供消费者自助开票，提升体验。助力B端客户节省开票成本，打通业务数据和发票数据，打造业财一体。</font>

### <font style="color:#000000;"></font><font style="color:rgba(0, 0, 0, 0.85);">目标客户以及客户解决核心痛点问题</font>
1. <font style="color:rgba(0, 0, 0, 0.85);">企业外部消费者/外部客户：在酒店、零售、商超等场景中购物的消费者，解决了传统开票方式中等待时间长、流程繁琐的痛点，通过扫描动态小票码即可快速自助开票，提升了开票体验。</font>
2. <font style="color:rgba(0, 0, 0, 0.85);">企业内部操作使用人员：财务或相关开票岗位，解决了手动处理大量小票开票的繁琐工作，提高了开票效率，减少了错误率。</font>
3. <font style="color:rgba(0, 0, 0, 0.85);">部门管理人员：财务部门管理人员，解决了对小票码开票流程进行监控和管理的痛点，能够确保开票操作的合规性和准确性，同时通过接口与业务系统的数据打通，实现了业财一体化管理。</font>
4. <font style="color:rgba(0, 0, 0, 0.85);">公司管理层：公司高层管理岗位，解决了对公司开票情况进行整体把握和决策的痛点，能够通过动态小票码开票的数据统计，了解公司的业务情况和客户需求，优化运营策略，降低开票成本，提升企业的竞争力。</font>

## 动态小票码开票功能详解
### 动态小票码开票关键字段说明【暂无字段说明】
| **序号*** | **<font style="color:rgb(26, 26, 26);">字段名称*</font>** | **<font style="color:rgb(26, 26, 26);">业务含义*</font>** | **<font style="color:rgb(26, 26, 26);">字段规则*</font>** | | **<font style="color:rgb(26, 26, 26);">其他属性说明</font>** |
| --- | --- | --- | --- | --- | --- |
| 1 |  |  |  | |  |


### 动态小票码开票列表按钮说明
| **序号*** | **按钮名称*** | **<font style="color:rgb(26, 26, 26);">功能描述*</font>** | **<font style="color:rgb(26, 26, 26);">使用条件</font>** | **<font style="color:rgb(26, 26, 26);">其他说明</font>** |
| --- | --- | --- | --- | --- |
| 1 | 新增（复制） | 增加小票码开票项目 |  |  |
| 2 | 禁用 | 禁止用该小票码开票 |  |  |
| 3 | 打印 | 将该项目的小票码打印生成 |  |  |


### 动态小票码开票主要操作说明
#### 新增小票码
**步骤1：**点击“新增”按钮，进入信息编辑界面。

![](https://cdn.nlark.com/yuque/0/2025/png/56650036/1748584253542-fcc505bb-ee54-40b5-ab65-06b07ceafa7c.png)

**步骤2：**完善小票信息。填写小票流水号，选择设备编号、电子税局账号、可选票种、默认发票种类，设定开票码有效期、小票底部备注等信息。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1744253556296-62f4644b-0019-45a3-835b-cf0ed520a31e.png)

其中可选票种字段影响扫码用户可具的开发票种类，具体规则如下：

①新增动态小票码开票时,单据上的可选票种字段默认取值小票码配置(基础资料-小票码配置)中选择的可开票类型，允许修改，但至少选择一个票种。

![](https://cdn.nlark.com/yuque/0/2025/png/38481329/1744253645685-e7dbd152-2217-468d-b57b-8dcabda765d7.png)  
②若可选票种字段填写多个开票类型，客户通过移动端扫码打开的开票页面可自行切换开票类型，扫码后默认展示的开票类型由默认发票种类字段决定。

![](https://cdn.nlark.com/yuque/0/2025/png/56650036/1748584279843-f34f093a-6a41-4a13-8bf4-0255095f2549.png)

**步骤3：**完善发票基本信息。销方名称、税号等信息由系统自动匹配，还要填写开票人名称，并根据需要填写收款人、复核人和发票备注等信息。

![](https://cdn.nlark.com/yuque/0/2025/png/56650036/1748584300973-22035680-547b-4fce-8df1-e6df983e7888.png)

**步骤4：**点击”增行“按钮，添加商品信息。在开票项下拉列表中选择商品，并填写规格、单位等其他信息。

![](https://cdn.nlark.com/yuque/0/2024/png/38481329/1722393222422-8a72a2d3-e55c-4417-82e7-789a637baf51.png)

**步骤5：**可点击”新增折扣行“，为上一行的商品添加折扣信息，填写折扣金额（需小于0）

![](https://cdn.nlark.com/yuque/0/2025/png/56650036/1748584318324-52188d61-0589-4e75-9360-27be7a9485fb.png)

**步骤6：**点击”预览打印“按钮，可预查看生成的发票信息。点击”保存“按钮，即可保存小票码。

![](https://cdn.nlark.com/yuque/0/2025/png/56650036/1748584334772-850dee8f-adb5-4807-8881-f7b41b93d735.png)

## 动态小票码开票相关配置说明
1. 小票码配置：[小票码配置 (yuque.com)](https://jdpiaozone.yuque.com/nbklz3/tadboa/bg3s9wclizpcxeeg)

## 动态小票码开票相关接口说明
| 编号 | 接口名称 | 接口用途 | 接口链接 |
| --- | --- | --- | --- |
| 001 | 3.1.01业务系统组装二维码链接格式 | 商家通过发票云提供的规则或约定好的地址（域名+参数）生成二维码 | [https://open-ultimate.piaozone.com/api-146003735](https://open-ultimate.piaozone.com/api-146003735) |
| 002 | 3.1.02查询订单接口 | <font style="color:#000000;">调用业务系统接口获取订单数据并组装开票（客户提供）</font> | [https://open-ultimate.piaozone.com/api-146003736](https://open-ultimate.piaozone.com/api-146003736) |
| 003 | 3.2.01上传销售单获取二维码链接 | <font style="color:#000000;">商家商通过【业务系统组装二维码链接格式】接口生成二维码给到用户</font> | [https://open-ultimate.piaozone.com/api-146003738](https://open-ultimate.piaozone.com/api-146003738) |


