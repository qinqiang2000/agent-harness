| **文档编号** | **适用产品版本** | **使用范围** | **更新内容** | **创建（修改）时间** | **责任人** |
| :---: | :---: | :---: | :---: | :---: | :---: |
| **v25.0.01** | **7.0及以上** | **公开** | **创建** | **2025-11-25** | **欧浩斌** |


# 文档说明
本文档主要介绍了星瀚环境的数据备份以及灾备环境部署操作流程。本文件仅介绍了标准版安装情况下，使用pgsql数据库的备份操作，如使用信创部署或其他数据库部署的，可根据实际情况选择备份方式。

# 灾备环境部署
灾备环境作为正式环境的临时过渡环境，长期处于静默状态，可以使用单机部署，节约硬件成本。

部署操作可参照：[《测试环境部署》](https://jdpiaozone.yuque.com/nbklz3/tadboa/kubpw47w3byk70at)

# 数据库备份
## 确认备份库
登录mc，查看目前数据中心使用的数据库实例；操作路径：租户列表——>租户id——>数据中心

![](https://cdn.nlark.com/yuque/0/2025/png/21778712/1764126878254-8d958c54-5b7f-4008-a0ff-b20606198ef3.png)

##  备份数据库
登录数据库服务器，使用pg_dump工具备份数据库，pg_dump只支持单个库备份，备份命令如下：

```shell
pg_dump -U postgres   -Fc -d default_datacenter_drp --no-owner -f /home/postgres/$date/default_datacenter_drp.dump
pg_dump -U postgres   -Fc -d default_datacenter_fi --no-owner -f /home/postgres/$date/default_datacenter_fi.dump
pg_dump -U postgres   -Fc -d default_datacenter_hr --no-owner -f /home/postgres/$date/default_datacenter_hr.dump
pg_dump -U postgres   -Fc -d default_datacenter_meta --no-owner -f /home/postgres/$date/default_datacenter_meta.dump
pg_dump -U postgres   -Fc -d default_datacenter_scm --no-owner -f /home/postgres/$date/default_datacenter_scm.dump
pg_dump -U postgres   -Fc -d default_datacenter_secd --no-owner -f /home/postgres/$date/default_datacenter_secd.dump
pg_dump -U postgres   -Fc -d default_datacenter_sys --no-owner -f /home/postgres/$date/default_datacenter_sys.dump
pg_dump -U postgres   -Fc -d mc --no-owner -f /home/postgres/$date/mc.dump
#-U postgres：指定数据库连接用户
#-Fc：说明备份将以自定义格式存储
#-d database_name：指定备份库
#--no-owner：备份时 不包含对象所有者信息
#-f：指定备份文件的输出路径
```

#  备份fileserver
fileserver文件服务存储了关键业务数据，可以选择定时备份或实时备份方案来备份

##  定时备份
fileserver数据一般存储在共享目录中，可以使用crontab定时任务进行备份；

```shell

```



